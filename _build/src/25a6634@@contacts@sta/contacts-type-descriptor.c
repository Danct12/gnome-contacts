/* contacts-type-descriptor.c generated by valac 0.47.2.1-ce69, the Vala compiler
 * generated from contacts-type-descriptor.vala, do not modify */

/*
 * Copyright (C) 2018 Niels De Graef <nielsdegraef@gmail.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <glib.h>
#include <gtk/gtk.h>
#include <glib/gi18n-lib.h>
#include <folks/folks.h>
#include <gee.h>
#include <config.h>

#define CONTACTS_TYPE_TYPEDESCRIPTOR (contacts_typedescriptor_get_type ())
#define CONTACTS_TYPEDESCRIPTOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CONTACTS_TYPE_TYPEDESCRIPTOR, ContactsTypeDescriptor))
#define CONTACTS_TYPEDESCRIPTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CONTACTS_TYPE_TYPEDESCRIPTOR, ContactsTypeDescriptorClass))
#define CONTACTS_IS_TYPEDESCRIPTOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CONTACTS_TYPE_TYPEDESCRIPTOR))
#define CONTACTS_IS_TYPEDESCRIPTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CONTACTS_TYPE_TYPEDESCRIPTOR))
#define CONTACTS_TYPEDESCRIPTOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CONTACTS_TYPE_TYPEDESCRIPTOR, ContactsTypeDescriptorClass))

typedef struct _ContactsTypeDescriptor ContactsTypeDescriptor;
typedef struct _ContactsTypeDescriptorClass ContactsTypeDescriptorClass;
typedef struct _ContactsTypeDescriptorPrivate ContactsTypeDescriptorPrivate;
typedef enum  {
	CONTACTS_TYPEDESCRIPTOR_SOURCE_VCARD,
	CONTACTS_TYPEDESCRIPTOR_SOURCE_OTHER,
	CONTACTS_TYPEDESCRIPTOR_SOURCE_CUSTOM
} ContactsTypeDescriptorSource;

#define CONTACTS_TYPEDESCRIPTOR_TYPE_SOURCE (contacts_typedescriptor_source_get_type ())
enum  {
	CONTACTS_TYPEDESCRIPTOR_0_PROPERTY,
	CONTACTS_TYPEDESCRIPTOR_DISPLAY_NAME_PROPERTY,
	CONTACTS_TYPEDESCRIPTOR_NUM_PROPERTIES
};
static GParamSpec* contacts_typedescriptor_properties[CONTACTS_TYPEDESCRIPTOR_NUM_PROPERTIES];
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_string_free0(var) ((var == NULL) ? NULL : (var = (g_string_free (var, TRUE), NULL)))

struct _ContactsTypeDescriptor {
	GObject parent_instance;
	ContactsTypeDescriptorPrivate * priv;
	gchar* name;
	gchar** vcard_types;
	gint vcard_types_length1;
	GtkTreeIter iter;
};

struct _ContactsTypeDescriptorClass {
	GObjectClass parent_class;
};

struct _ContactsTypeDescriptorPrivate {
	ContactsTypeDescriptorSource source;
};

static gint ContactsTypeDescriptor_private_offset;
static gpointer contacts_typedescriptor_parent_class = NULL;

GType contacts_typedescriptor_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (ContactsTypeDescriptor, g_object_unref)
static GType contacts_typedescriptor_source_get_type (void) G_GNUC_CONST G_GNUC_UNUSED;
static gchar* contacts_typedescriptor_source_to_string (ContactsTypeDescriptorSource self);
#define CONTACTS_TYPEDESCRIPTOR_X_GOOGLE_LABEL "x-google-label"
ContactsTypeDescriptor* contacts_typedescriptor_new_vcard (const gchar* untranslated_name,
                                                           gchar** types,
                                                           gint types_length1);
ContactsTypeDescriptor* contacts_typedescriptor_construct_vcard (GType object_type,
                                                                 const gchar* untranslated_name,
                                                                 gchar** types,
                                                                 gint types_length1);
static gchar** _vala_array_dup1 (gchar** self,
                          gint length);
ContactsTypeDescriptor* contacts_typedescriptor_new_custom (const gchar* name);
ContactsTypeDescriptor* contacts_typedescriptor_construct_custom (GType object_type,
                                                                  const gchar* name);
ContactsTypeDescriptor* contacts_typedescriptor_new_other (void);
ContactsTypeDescriptor* contacts_typedescriptor_construct_other (GType object_type);
gboolean contacts_typedescriptor_is_custom (ContactsTypeDescriptor* self);
void contacts_typedescriptor_save_to_field_details (ContactsTypeDescriptor* self,
                                                    FolksAbstractFieldDetails* details);
gchar* contacts_typedescriptor_to_string (ContactsTypeDescriptor* self);
const gchar* contacts_typedescriptor_get_display_name (ContactsTypeDescriptor* self);
ContactsTypeDescriptor* contacts_typedescriptor_new (void);
ContactsTypeDescriptor* contacts_typedescriptor_construct (GType object_type);
static void contacts_typedescriptor_finalize (GObject * obj);
static GType contacts_typedescriptor_get_type_once (void);
static void _vala_contacts_typedescriptor_get_property (GObject * object,
                                                 guint property_id,
                                                 GValue * value,
                                                 GParamSpec * pspec);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);

static inline gpointer
contacts_typedescriptor_get_instance_private (ContactsTypeDescriptor* self)
{
	return G_STRUCT_MEMBER_P (self, ContactsTypeDescriptor_private_offset);
}

static gchar*
contacts_typedescriptor_source_to_string (ContactsTypeDescriptorSource self)
{
	gchar* _tmp3_;
	gchar* result = NULL;
#line 35 "../src/contacts-type-descriptor.vala"
	switch (self) {
#line 35 "../src/contacts-type-descriptor.vala"
		case CONTACTS_TYPEDESCRIPTOR_SOURCE_VCARD:
#line 133 "contacts-type-descriptor.c"
		{
			gchar* _tmp0_;
#line 37 "../src/contacts-type-descriptor.vala"
			_tmp0_ = g_strdup ("vcard");
#line 37 "../src/contacts-type-descriptor.vala"
			result = _tmp0_;
#line 37 "../src/contacts-type-descriptor.vala"
			return result;
#line 142 "contacts-type-descriptor.c"
		}
#line 35 "../src/contacts-type-descriptor.vala"
		case CONTACTS_TYPEDESCRIPTOR_SOURCE_OTHER:
#line 146 "contacts-type-descriptor.c"
		{
			gchar* _tmp1_;
#line 39 "../src/contacts-type-descriptor.vala"
			_tmp1_ = g_strdup ("other");
#line 39 "../src/contacts-type-descriptor.vala"
			result = _tmp1_;
#line 39 "../src/contacts-type-descriptor.vala"
			return result;
#line 155 "contacts-type-descriptor.c"
		}
#line 35 "../src/contacts-type-descriptor.vala"
		case CONTACTS_TYPEDESCRIPTOR_SOURCE_CUSTOM:
#line 159 "contacts-type-descriptor.c"
		{
			gchar* _tmp2_;
#line 41 "../src/contacts-type-descriptor.vala"
			_tmp2_ = g_strdup ("custom");
#line 41 "../src/contacts-type-descriptor.vala"
			result = _tmp2_;
#line 41 "../src/contacts-type-descriptor.vala"
			return result;
#line 168 "contacts-type-descriptor.c"
		}
		default:
#line 35 "../src/contacts-type-descriptor.vala"
		break;
#line 173 "contacts-type-descriptor.c"
	}
#line 43 "../src/contacts-type-descriptor.vala"
	_tmp3_ = g_strdup ("INVALID");
#line 43 "../src/contacts-type-descriptor.vala"
	result = _tmp3_;
#line 43 "../src/contacts-type-descriptor.vala"
	return result;
#line 181 "contacts-type-descriptor.c"
}

static GType
contacts_typedescriptor_source_get_type_once (void)
{
	static const GEnumValue values[] = {{CONTACTS_TYPEDESCRIPTOR_SOURCE_VCARD, "CONTACTS_TYPEDESCRIPTOR_SOURCE_VCARD", "vcard"}, {CONTACTS_TYPEDESCRIPTOR_SOURCE_OTHER, "CONTACTS_TYPEDESCRIPTOR_SOURCE_OTHER", "other"}, {CONTACTS_TYPEDESCRIPTOR_SOURCE_CUSTOM, "CONTACTS_TYPEDESCRIPTOR_SOURCE_CUSTOM", "custom"}, {0, NULL, NULL}};
	GType contacts_typedescriptor_source_type_id;
	contacts_typedescriptor_source_type_id = g_enum_register_static ("ContactsTypeDescriptorSource", values);
	return contacts_typedescriptor_source_type_id;
}

static GType
contacts_typedescriptor_source_get_type (void)
{
	static volatile gsize contacts_typedescriptor_source_type_id__volatile = 0;
	if (g_once_init_enter (&contacts_typedescriptor_source_type_id__volatile)) {
		GType contacts_typedescriptor_source_type_id;
		contacts_typedescriptor_source_type_id = contacts_typedescriptor_source_get_type_once ();
		g_once_init_leave (&contacts_typedescriptor_source_type_id__volatile, contacts_typedescriptor_source_type_id);
	}
	return contacts_typedescriptor_source_type_id__volatile;
}

/**
   * Creates a TypeDescriptor which is mappable to the given VCard Type strings.
   */
static gchar**
_vala_array_dup1 (gchar** self,
                  gint length)
{
	gchar** result;
	gint i;
#line 69 "../src/contacts-type-descriptor.vala"
	result = g_new0 (gchar*, length + 1);
#line 69 "../src/contacts-type-descriptor.vala"
	for (i = 0; i < length; i++) {
#line 218 "contacts-type-descriptor.c"
		gchar* _tmp0_;
#line 69 "../src/contacts-type-descriptor.vala"
		_tmp0_ = g_strdup (self[i]);
#line 69 "../src/contacts-type-descriptor.vala"
		result[i] = _tmp0_;
#line 224 "contacts-type-descriptor.c"
	}
#line 69 "../src/contacts-type-descriptor.vala"
	return result;
#line 228 "contacts-type-descriptor.c"
}

ContactsTypeDescriptor*
contacts_typedescriptor_construct_vcard (GType object_type,
                                         const gchar* untranslated_name,
                                         gchar** types,
                                         gint types_length1)
{
	ContactsTypeDescriptor * self = NULL;
	gchar* _tmp0_;
	gchar** _tmp1_;
	gint _tmp1__length1;
#line 66 "../src/contacts-type-descriptor.vala"
	g_return_val_if_fail (untranslated_name != NULL, NULL);
#line 66 "../src/contacts-type-descriptor.vala"
	self = (ContactsTypeDescriptor*) g_object_new (object_type, NULL);
#line 67 "../src/contacts-type-descriptor.vala"
	self->priv->source = CONTACTS_TYPEDESCRIPTOR_SOURCE_VCARD;
#line 68 "../src/contacts-type-descriptor.vala"
	_tmp0_ = g_strdup (untranslated_name);
#line 68 "../src/contacts-type-descriptor.vala"
	_g_free0 (self->name);
#line 68 "../src/contacts-type-descriptor.vala"
	self->name = _tmp0_;
#line 69 "../src/contacts-type-descriptor.vala"
	_tmp1_ = (types != NULL) ? _vala_array_dup1 (types, types_length1) : ((gpointer) types);
#line 69 "../src/contacts-type-descriptor.vala"
	_tmp1__length1 = types_length1;
#line 69 "../src/contacts-type-descriptor.vala"
	self->vcard_types = (_vala_array_free (self->vcard_types, self->vcard_types_length1, (GDestroyNotify) g_free), NULL);
#line 69 "../src/contacts-type-descriptor.vala"
	self->vcard_types = _tmp1_;
#line 69 "../src/contacts-type-descriptor.vala"
	self->vcard_types_length1 = _tmp1__length1;
#line 66 "../src/contacts-type-descriptor.vala"
	return self;
#line 265 "contacts-type-descriptor.c"
}

ContactsTypeDescriptor*
contacts_typedescriptor_new_vcard (const gchar* untranslated_name,
                                   gchar** types,
                                   gint types_length1)
{
#line 66 "../src/contacts-type-descriptor.vala"
	return contacts_typedescriptor_construct_vcard (CONTACTS_TYPE_TYPEDESCRIPTOR, untranslated_name, types, types_length1);
#line 275 "contacts-type-descriptor.c"
}

/**
   * Creates a TypeDescriptor with a custom label
   */
ContactsTypeDescriptor*
contacts_typedescriptor_construct_custom (GType object_type,
                                          const gchar* name)
{
	ContactsTypeDescriptor * self = NULL;
	gchar* _tmp0_;
#line 75 "../src/contacts-type-descriptor.vala"
	g_return_val_if_fail (name != NULL, NULL);
#line 75 "../src/contacts-type-descriptor.vala"
	self = (ContactsTypeDescriptor*) g_object_new (object_type, NULL);
#line 76 "../src/contacts-type-descriptor.vala"
	self->priv->source = CONTACTS_TYPEDESCRIPTOR_SOURCE_CUSTOM;
#line 77 "../src/contacts-type-descriptor.vala"
	_tmp0_ = g_strdup (name);
#line 77 "../src/contacts-type-descriptor.vala"
	_g_free0 (self->name);
#line 77 "../src/contacts-type-descriptor.vala"
	self->name = _tmp0_;
#line 75 "../src/contacts-type-descriptor.vala"
	return self;
#line 301 "contacts-type-descriptor.c"
}

ContactsTypeDescriptor*
contacts_typedescriptor_new_custom (const gchar* name)
{
#line 75 "../src/contacts-type-descriptor.vala"
	return contacts_typedescriptor_construct_custom (CONTACTS_TYPE_TYPEDESCRIPTOR, name);
#line 309 "contacts-type-descriptor.c"
}

/**
   * Creates a TypeDescriptor which represents all non-representable types.
   */
ContactsTypeDescriptor*
contacts_typedescriptor_construct_other (GType object_type)
{
	ContactsTypeDescriptor * self = NULL;
	gchar* _tmp0_;
#line 83 "../src/contacts-type-descriptor.vala"
	self = (ContactsTypeDescriptor*) g_object_new (object_type, NULL);
#line 84 "../src/contacts-type-descriptor.vala"
	self->priv->source = CONTACTS_TYPEDESCRIPTOR_SOURCE_OTHER;
#line 85 "../src/contacts-type-descriptor.vala"
	_tmp0_ = g_strdup (N_ ("Other"));
#line 85 "../src/contacts-type-descriptor.vala"
	_g_free0 (self->name);
#line 85 "../src/contacts-type-descriptor.vala"
	self->name = _tmp0_;
#line 83 "../src/contacts-type-descriptor.vala"
	return self;
#line 332 "contacts-type-descriptor.c"
}

ContactsTypeDescriptor*
contacts_typedescriptor_new_other (void)
{
#line 83 "../src/contacts-type-descriptor.vala"
	return contacts_typedescriptor_construct_other (CONTACTS_TYPE_TYPEDESCRIPTOR);
#line 340 "contacts-type-descriptor.c"
}

gboolean
contacts_typedescriptor_is_custom (ContactsTypeDescriptor* self)
{
	ContactsTypeDescriptorSource _tmp0_;
	gboolean result = FALSE;
#line 88 "../src/contacts-type-descriptor.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 89 "../src/contacts-type-descriptor.vala"
	_tmp0_ = self->priv->source;
#line 89 "../src/contacts-type-descriptor.vala"
	result = _tmp0_ == CONTACTS_TYPEDESCRIPTOR_SOURCE_CUSTOM;
#line 89 "../src/contacts-type-descriptor.vala"
	return result;
#line 356 "contacts-type-descriptor.c"
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 95 "../src/contacts-type-descriptor.vala"
	return self ? g_object_ref (self) : NULL;
#line 364 "contacts-type-descriptor.c"
}

void
contacts_typedescriptor_save_to_field_details (ContactsTypeDescriptor* self,
                                               FolksAbstractFieldDetails* details)
{
	gchar* _tmp0_;
	gchar* _tmp1_;
	GeeMultiMap* old_parameters = NULL;
	GeeMultiMap* _tmp2_;
	GeeMultiMap* _tmp3_;
	GeeMultiMap* _tmp4_;
	GeeHashMultiMap* new_parameters = NULL;
	GeeHashMultiMap* _tmp5_;
	gboolean has_pref = FALSE;
	ContactsTypeDescriptorSource _tmp38_;
	GeeHashMultiMap* _tmp49_;
#line 92 "../src/contacts-type-descriptor.vala"
	g_return_if_fail (self != NULL);
#line 92 "../src/contacts-type-descriptor.vala"
	g_return_if_fail (details != NULL);
#line 93 "../src/contacts-type-descriptor.vala"
	_tmp0_ = contacts_typedescriptor_to_string (self);
#line 93 "../src/contacts-type-descriptor.vala"
	_tmp1_ = _tmp0_;
#line 93 "../src/contacts-type-descriptor.vala"
	g_debug ("contacts-type-descriptor.vala:93: Saving type %s", _tmp1_);
#line 93 "../src/contacts-type-descriptor.vala"
	_g_free0 (_tmp1_);
#line 95 "../src/contacts-type-descriptor.vala"
	_tmp2_ = folks_abstract_field_details_get_parameters (details);
#line 95 "../src/contacts-type-descriptor.vala"
	_tmp3_ = _tmp2_;
#line 95 "../src/contacts-type-descriptor.vala"
	_tmp4_ = _g_object_ref0 (_tmp3_);
#line 95 "../src/contacts-type-descriptor.vala"
	old_parameters = _tmp4_;
#line 96 "../src/contacts-type-descriptor.vala"
	_tmp5_ = gee_hash_multi_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
#line 96 "../src/contacts-type-descriptor.vala"
	new_parameters = _tmp5_;
#line 99 "../src/contacts-type-descriptor.vala"
	has_pref = FALSE;
#line 408 "contacts-type-descriptor.c"
	{
		GeeIterator* _val_it = NULL;
		GeeMultiMap* _tmp6_;
		GeeCollection* _tmp7_;
		GeeCollection* _tmp8_;
		GeeIterator* _tmp9_;
		GeeIterator* _tmp10_;
#line 100 "../src/contacts-type-descriptor.vala"
		_tmp6_ = old_parameters;
#line 100 "../src/contacts-type-descriptor.vala"
		_tmp7_ = gee_multi_map_get (_tmp6_, "type");
#line 100 "../src/contacts-type-descriptor.vala"
		_tmp8_ = _tmp7_;
#line 100 "../src/contacts-type-descriptor.vala"
		_tmp9_ = gee_iterable_iterator ((GeeIterable*) _tmp8_);
#line 100 "../src/contacts-type-descriptor.vala"
		_tmp10_ = _tmp9_;
#line 100 "../src/contacts-type-descriptor.vala"
		_g_object_unref0 (_tmp8_);
#line 100 "../src/contacts-type-descriptor.vala"
		_val_it = _tmp10_;
#line 100 "../src/contacts-type-descriptor.vala"
		while (TRUE) {
#line 432 "contacts-type-descriptor.c"
			GeeIterator* _tmp11_;
			gchar* val = NULL;
			GeeIterator* _tmp12_;
			gpointer _tmp13_;
			const gchar* _tmp14_;
#line 100 "../src/contacts-type-descriptor.vala"
			_tmp11_ = _val_it;
#line 100 "../src/contacts-type-descriptor.vala"
			if (!gee_iterator_next (_tmp11_)) {
#line 100 "../src/contacts-type-descriptor.vala"
				break;
#line 444 "contacts-type-descriptor.c"
			}
#line 100 "../src/contacts-type-descriptor.vala"
			_tmp12_ = _val_it;
#line 100 "../src/contacts-type-descriptor.vala"
			_tmp13_ = gee_iterator_get (_tmp12_);
#line 100 "../src/contacts-type-descriptor.vala"
			val = (gchar*) _tmp13_;
#line 101 "../src/contacts-type-descriptor.vala"
			_tmp14_ = val;
#line 101 "../src/contacts-type-descriptor.vala"
			if (g_ascii_strcasecmp (_tmp14_, "PREF") == 0) {
#line 102 "../src/contacts-type-descriptor.vala"
				has_pref = TRUE;
#line 103 "../src/contacts-type-descriptor.vala"
				_g_free0 (val);
#line 103 "../src/contacts-type-descriptor.vala"
				break;
#line 462 "contacts-type-descriptor.c"
			}
#line 100 "../src/contacts-type-descriptor.vala"
			_g_free0 (val);
#line 466 "contacts-type-descriptor.c"
		}
#line 100 "../src/contacts-type-descriptor.vala"
		_g_object_unref0 (_val_it);
#line 470 "contacts-type-descriptor.c"
	}
	{
		GeeIterator* _param_it = NULL;
		GeeMultiMap* _tmp15_;
		GeeSet* _tmp16_;
		GeeSet* _tmp17_;
		GeeIterator* _tmp18_;
		GeeIterator* _tmp19_;
#line 108 "../src/contacts-type-descriptor.vala"
		_tmp15_ = old_parameters;
#line 108 "../src/contacts-type-descriptor.vala"
		_tmp16_ = gee_multi_map_get_keys (_tmp15_);
#line 108 "../src/contacts-type-descriptor.vala"
		_tmp17_ = _tmp16_;
#line 108 "../src/contacts-type-descriptor.vala"
		_tmp18_ = gee_iterable_iterator ((GeeIterable*) _tmp17_);
#line 108 "../src/contacts-type-descriptor.vala"
		_tmp19_ = _tmp18_;
#line 108 "../src/contacts-type-descriptor.vala"
		_g_object_unref0 (_tmp17_);
#line 108 "../src/contacts-type-descriptor.vala"
		_param_it = _tmp19_;
#line 108 "../src/contacts-type-descriptor.vala"
		while (TRUE) {
#line 495 "contacts-type-descriptor.c"
			GeeIterator* _tmp20_;
			gchar* param = NULL;
			GeeIterator* _tmp21_;
			gpointer _tmp22_;
			gboolean _tmp23_ = FALSE;
			const gchar* _tmp24_;
#line 108 "../src/contacts-type-descriptor.vala"
			_tmp20_ = _param_it;
#line 108 "../src/contacts-type-descriptor.vala"
			if (!gee_iterator_next (_tmp20_)) {
#line 108 "../src/contacts-type-descriptor.vala"
				break;
#line 508 "contacts-type-descriptor.c"
			}
#line 108 "../src/contacts-type-descriptor.vala"
			_tmp21_ = _param_it;
#line 108 "../src/contacts-type-descriptor.vala"
			_tmp22_ = gee_iterator_get (_tmp21_);
#line 108 "../src/contacts-type-descriptor.vala"
			param = (gchar*) _tmp22_;
#line 109 "../src/contacts-type-descriptor.vala"
			_tmp24_ = param;
#line 109 "../src/contacts-type-descriptor.vala"
			if (g_strcmp0 (_tmp24_, "type") != 0) {
#line 520 "contacts-type-descriptor.c"
				const gchar* _tmp25_;
#line 109 "../src/contacts-type-descriptor.vala"
				_tmp25_ = param;
#line 109 "../src/contacts-type-descriptor.vala"
				_tmp23_ = g_strcmp0 (_tmp25_, CONTACTS_TYPEDESCRIPTOR_X_GOOGLE_LABEL) != 0;
#line 526 "contacts-type-descriptor.c"
			} else {
#line 109 "../src/contacts-type-descriptor.vala"
				_tmp23_ = FALSE;
#line 530 "contacts-type-descriptor.c"
			}
#line 109 "../src/contacts-type-descriptor.vala"
			if (_tmp23_) {
#line 534 "contacts-type-descriptor.c"
				{
					GeeIterator* _val_it = NULL;
					GeeMultiMap* _tmp26_;
					const gchar* _tmp27_;
					GeeCollection* _tmp28_;
					GeeCollection* _tmp29_;
					GeeIterator* _tmp30_;
					GeeIterator* _tmp31_;
#line 110 "../src/contacts-type-descriptor.vala"
					_tmp26_ = old_parameters;
#line 110 "../src/contacts-type-descriptor.vala"
					_tmp27_ = param;
#line 110 "../src/contacts-type-descriptor.vala"
					_tmp28_ = gee_multi_map_get (_tmp26_, _tmp27_);
#line 110 "../src/contacts-type-descriptor.vala"
					_tmp29_ = _tmp28_;
#line 110 "../src/contacts-type-descriptor.vala"
					_tmp30_ = gee_iterable_iterator ((GeeIterable*) _tmp29_);
#line 110 "../src/contacts-type-descriptor.vala"
					_tmp31_ = _tmp30_;
#line 110 "../src/contacts-type-descriptor.vala"
					_g_object_unref0 (_tmp29_);
#line 110 "../src/contacts-type-descriptor.vala"
					_val_it = _tmp31_;
#line 110 "../src/contacts-type-descriptor.vala"
					while (TRUE) {
#line 561 "contacts-type-descriptor.c"
						GeeIterator* _tmp32_;
						gchar* val = NULL;
						GeeIterator* _tmp33_;
						gpointer _tmp34_;
						GeeHashMultiMap* _tmp35_;
						const gchar* _tmp36_;
						const gchar* _tmp37_;
#line 110 "../src/contacts-type-descriptor.vala"
						_tmp32_ = _val_it;
#line 110 "../src/contacts-type-descriptor.vala"
						if (!gee_iterator_next (_tmp32_)) {
#line 110 "../src/contacts-type-descriptor.vala"
							break;
#line 575 "contacts-type-descriptor.c"
						}
#line 110 "../src/contacts-type-descriptor.vala"
						_tmp33_ = _val_it;
#line 110 "../src/contacts-type-descriptor.vala"
						_tmp34_ = gee_iterator_get (_tmp33_);
#line 110 "../src/contacts-type-descriptor.vala"
						val = (gchar*) _tmp34_;
#line 111 "../src/contacts-type-descriptor.vala"
						_tmp35_ = new_parameters;
#line 111 "../src/contacts-type-descriptor.vala"
						_tmp36_ = param;
#line 111 "../src/contacts-type-descriptor.vala"
						_tmp37_ = val;
#line 111 "../src/contacts-type-descriptor.vala"
						gee_multi_map_set ((GeeMultiMap*) _tmp35_, _tmp36_, _tmp37_);
#line 110 "../src/contacts-type-descriptor.vala"
						_g_free0 (val);
#line 593 "contacts-type-descriptor.c"
					}
#line 110 "../src/contacts-type-descriptor.vala"
					_g_object_unref0 (_val_it);
#line 597 "contacts-type-descriptor.c"
				}
			}
#line 108 "../src/contacts-type-descriptor.vala"
			_g_free0 (param);
#line 602 "contacts-type-descriptor.c"
		}
#line 108 "../src/contacts-type-descriptor.vala"
		_g_object_unref0 (_param_it);
#line 606 "contacts-type-descriptor.c"
	}
#line 115 "../src/contacts-type-descriptor.vala"
	_tmp38_ = self->priv->source;
#line 115 "../src/contacts-type-descriptor.vala"
	switch (_tmp38_) {
#line 115 "../src/contacts-type-descriptor.vala"
		case CONTACTS_TYPEDESCRIPTOR_SOURCE_VCARD:
#line 614 "contacts-type-descriptor.c"
		{
			gchar** _tmp39_;
			gint _tmp39__length1;
#line 117 "../src/contacts-type-descriptor.vala"
			_tmp39_ = self->vcard_types;
#line 117 "../src/contacts-type-descriptor.vala"
			_tmp39__length1 = self->vcard_types_length1;
#line 622 "contacts-type-descriptor.c"
			{
				gchar** type_collection = NULL;
				gint type_collection_length1 = 0;
				gint _type_collection_size_ = 0;
				gint type_it = 0;
#line 117 "../src/contacts-type-descriptor.vala"
				type_collection = _tmp39_;
#line 117 "../src/contacts-type-descriptor.vala"
				type_collection_length1 = _tmp39__length1;
#line 117 "../src/contacts-type-descriptor.vala"
				for (type_it = 0; type_it < type_collection_length1; type_it = type_it + 1) {
#line 634 "contacts-type-descriptor.c"
					gchar* _tmp40_;
					gchar* type = NULL;
#line 117 "../src/contacts-type-descriptor.vala"
					_tmp40_ = g_strdup (type_collection[type_it]);
#line 117 "../src/contacts-type-descriptor.vala"
					type = _tmp40_;
#line 641 "contacts-type-descriptor.c"
					{
						const gchar* _tmp41_;
#line 118 "../src/contacts-type-descriptor.vala"
						_tmp41_ = type;
#line 118 "../src/contacts-type-descriptor.vala"
						if (_tmp41_ != NULL) {
#line 648 "contacts-type-descriptor.c"
							GeeHashMultiMap* _tmp42_;
							const gchar* _tmp43_;
#line 119 "../src/contacts-type-descriptor.vala"
							_tmp42_ = new_parameters;
#line 119 "../src/contacts-type-descriptor.vala"
							_tmp43_ = type;
#line 119 "../src/contacts-type-descriptor.vala"
							gee_multi_map_set ((GeeMultiMap*) _tmp42_, "type", _tmp43_);
#line 657 "contacts-type-descriptor.c"
						}
#line 117 "../src/contacts-type-descriptor.vala"
						_g_free0 (type);
#line 661 "contacts-type-descriptor.c"
					}
				}
			}
#line 120 "../src/contacts-type-descriptor.vala"
			break;
#line 667 "contacts-type-descriptor.c"
		}
#line 115 "../src/contacts-type-descriptor.vala"
		case CONTACTS_TYPEDESCRIPTOR_SOURCE_OTHER:
#line 671 "contacts-type-descriptor.c"
		{
			GeeHashMultiMap* _tmp44_;
#line 122 "../src/contacts-type-descriptor.vala"
			_tmp44_ = new_parameters;
#line 122 "../src/contacts-type-descriptor.vala"
			gee_multi_map_set ((GeeMultiMap*) _tmp44_, "type", "OTHER");
#line 123 "../src/contacts-type-descriptor.vala"
			break;
#line 680 "contacts-type-descriptor.c"
		}
#line 115 "../src/contacts-type-descriptor.vala"
		case CONTACTS_TYPEDESCRIPTOR_SOURCE_CUSTOM:
#line 684 "contacts-type-descriptor.c"
		{
			GeeHashMultiMap* _tmp45_;
			GeeHashMultiMap* _tmp46_;
			const gchar* _tmp47_;
#line 125 "../src/contacts-type-descriptor.vala"
			_tmp45_ = new_parameters;
#line 125 "../src/contacts-type-descriptor.vala"
			gee_multi_map_set ((GeeMultiMap*) _tmp45_, "type", "OTHER");
#line 126 "../src/contacts-type-descriptor.vala"
			_tmp46_ = new_parameters;
#line 126 "../src/contacts-type-descriptor.vala"
			_tmp47_ = self->name;
#line 126 "../src/contacts-type-descriptor.vala"
			gee_multi_map_set ((GeeMultiMap*) _tmp46_, CONTACTS_TYPEDESCRIPTOR_X_GOOGLE_LABEL, _tmp47_);
#line 127 "../src/contacts-type-descriptor.vala"
			break;
#line 701 "contacts-type-descriptor.c"
		}
		default:
#line 115 "../src/contacts-type-descriptor.vala"
		break;
#line 706 "contacts-type-descriptor.c"
	}
#line 130 "../src/contacts-type-descriptor.vala"
	if (has_pref) {
#line 710 "contacts-type-descriptor.c"
		GeeHashMultiMap* _tmp48_;
#line 131 "../src/contacts-type-descriptor.vala"
		_tmp48_ = new_parameters;
#line 131 "../src/contacts-type-descriptor.vala"
		gee_multi_map_set ((GeeMultiMap*) _tmp48_, "type", "PREF");
#line 716 "contacts-type-descriptor.c"
	}
#line 134 "../src/contacts-type-descriptor.vala"
	_tmp49_ = new_parameters;
#line 134 "../src/contacts-type-descriptor.vala"
	folks_abstract_field_details_set_parameters (details, (GeeMultiMap*) _tmp49_);
#line 92 "../src/contacts-type-descriptor.vala"
	_g_object_unref0 (new_parameters);
#line 92 "../src/contacts-type-descriptor.vala"
	_g_object_unref0 (old_parameters);
#line 726 "contacts-type-descriptor.c"
}

/**
   * Converts the TypeDescriptor to a string. Should only be used for debugging.
   */
static gchar*
_vala_g_strjoinv (const gchar* separator,
                  gchar** str_array,
                  gint str_array_length1)
{
	gboolean _tmp0_ = FALSE;
	gchar* result = NULL;
#line 1200 "glib-2.0.vapi"
	if (separator == NULL) {
#line 1201 "glib-2.0.vapi"
		separator = "";
#line 743 "contacts-type-descriptor.c"
	}
#line 1203 "glib-2.0.vapi"
	if (str_array != NULL) {
#line 747 "contacts-type-descriptor.c"
		gboolean _tmp1_ = FALSE;
#line 1203 "glib-2.0.vapi"
		if (str_array_length1 > 0) {
#line 1203 "glib-2.0.vapi"
			_tmp1_ = TRUE;
#line 753 "contacts-type-descriptor.c"
		} else {
			gboolean _tmp2_ = FALSE;
#line 1203 "glib-2.0.vapi"
			if (str_array_length1 == -1) {
#line 758 "contacts-type-descriptor.c"
				const gchar* _tmp3_;
#line 1203 "glib-2.0.vapi"
				_tmp3_ = str_array[0];
#line 1203 "glib-2.0.vapi"
				_tmp2_ = _tmp3_ != NULL;
#line 764 "contacts-type-descriptor.c"
			} else {
#line 1203 "glib-2.0.vapi"
				_tmp2_ = FALSE;
#line 768 "contacts-type-descriptor.c"
			}
#line 1203 "glib-2.0.vapi"
			_tmp1_ = _tmp2_;
#line 772 "contacts-type-descriptor.c"
		}
#line 1203 "glib-2.0.vapi"
		_tmp0_ = _tmp1_;
#line 776 "contacts-type-descriptor.c"
	} else {
#line 1203 "glib-2.0.vapi"
		_tmp0_ = FALSE;
#line 780 "contacts-type-descriptor.c"
	}
#line 1203 "glib-2.0.vapi"
	if (_tmp0_) {
#line 784 "contacts-type-descriptor.c"
		gint i = 0;
		gsize len = 0UL;
		gint _tmp16_;
		gint _tmp17_;
		const gchar* res = NULL;
		void* _tmp18_;
		void* ptr = NULL;
		const gchar* _tmp19_;
		const gchar* _tmp20_;
		void* _tmp21_;
		const gchar* _tmp31_;
#line 1205 "glib-2.0.vapi"
		len = (gsize) 1;
#line 798 "contacts-type-descriptor.c"
		{
			gboolean _tmp4_ = FALSE;
#line 1206 "glib-2.0.vapi"
			i = 0;
#line 1206 "glib-2.0.vapi"
			_tmp4_ = TRUE;
#line 1206 "glib-2.0.vapi"
			while (TRUE) {
#line 807 "contacts-type-descriptor.c"
				gboolean _tmp6_ = FALSE;
				gboolean _tmp7_ = FALSE;
				gint _tmp10_ = 0;
				const gchar* _tmp11_;
#line 1206 "glib-2.0.vapi"
				if (!_tmp4_) {
#line 814 "contacts-type-descriptor.c"
					gint _tmp5_;
#line 1206 "glib-2.0.vapi"
					_tmp5_ = i;
#line 1206 "glib-2.0.vapi"
					i = _tmp5_ + 1;
#line 820 "contacts-type-descriptor.c"
				}
#line 1206 "glib-2.0.vapi"
				_tmp4_ = FALSE;
#line 1206 "glib-2.0.vapi"
				if (str_array_length1 != -1) {
#line 1206 "glib-2.0.vapi"
					_tmp7_ = i < str_array_length1;
#line 828 "contacts-type-descriptor.c"
				} else {
#line 1206 "glib-2.0.vapi"
					_tmp7_ = FALSE;
#line 832 "contacts-type-descriptor.c"
				}
#line 1206 "glib-2.0.vapi"
				if (_tmp7_) {
#line 1206 "glib-2.0.vapi"
					_tmp6_ = TRUE;
#line 838 "contacts-type-descriptor.c"
				} else {
					gboolean _tmp8_ = FALSE;
#line 1206 "glib-2.0.vapi"
					if (str_array_length1 == -1) {
#line 843 "contacts-type-descriptor.c"
						const gchar* _tmp9_;
#line 1206 "glib-2.0.vapi"
						_tmp9_ = str_array[i];
#line 1206 "glib-2.0.vapi"
						_tmp8_ = _tmp9_ != NULL;
#line 849 "contacts-type-descriptor.c"
					} else {
#line 1206 "glib-2.0.vapi"
						_tmp8_ = FALSE;
#line 853 "contacts-type-descriptor.c"
					}
#line 1206 "glib-2.0.vapi"
					_tmp6_ = _tmp8_;
#line 857 "contacts-type-descriptor.c"
				}
#line 1206 "glib-2.0.vapi"
				if (!_tmp6_) {
#line 1206 "glib-2.0.vapi"
					break;
#line 863 "contacts-type-descriptor.c"
				}
#line 1207 "glib-2.0.vapi"
				_tmp11_ = str_array[i];
#line 1207 "glib-2.0.vapi"
				if (_tmp11_ != NULL) {
#line 869 "contacts-type-descriptor.c"
					const gchar* _tmp12_;
					gint _tmp13_;
					gint _tmp14_;
#line 1207 "glib-2.0.vapi"
					_tmp12_ = str_array[i];
#line 1207 "glib-2.0.vapi"
					_tmp13_ = strlen ((const gchar*) _tmp12_);
#line 1207 "glib-2.0.vapi"
					_tmp14_ = _tmp13_;
#line 1207 "glib-2.0.vapi"
					_tmp10_ = _tmp14_;
#line 881 "contacts-type-descriptor.c"
				} else {
#line 1207 "glib-2.0.vapi"
					_tmp10_ = 0;
#line 885 "contacts-type-descriptor.c"
				}
#line 1207 "glib-2.0.vapi"
				len += (gsize) _tmp10_;
#line 889 "contacts-type-descriptor.c"
			}
		}
#line 1209 "glib-2.0.vapi"
		if (i == 0) {
#line 894 "contacts-type-descriptor.c"
			gchar* _tmp15_;
#line 1210 "glib-2.0.vapi"
			_tmp15_ = g_strdup ("");
#line 1210 "glib-2.0.vapi"
			result = _tmp15_;
#line 1210 "glib-2.0.vapi"
			return result;
#line 902 "contacts-type-descriptor.c"
		}
#line 1212 "glib-2.0.vapi"
		str_array_length1 = i;
#line 1213 "glib-2.0.vapi"
		_tmp16_ = strlen ((const gchar*) separator);
#line 1213 "glib-2.0.vapi"
		_tmp17_ = _tmp16_;
#line 1213 "glib-2.0.vapi"
		len += (gsize) (_tmp17_ * (i - 1));
#line 1215 "glib-2.0.vapi"
		_tmp18_ = g_malloc (len);
#line 1215 "glib-2.0.vapi"
		res = _tmp18_;
#line 1216 "glib-2.0.vapi"
		_tmp19_ = res;
#line 1216 "glib-2.0.vapi"
		_tmp20_ = str_array[0];
#line 1216 "glib-2.0.vapi"
		_tmp21_ = g_stpcpy ((void*) _tmp19_, (const gchar*) _tmp20_);
#line 1216 "glib-2.0.vapi"
		ptr = _tmp21_;
#line 924 "contacts-type-descriptor.c"
		{
			gboolean _tmp22_ = FALSE;
#line 1217 "glib-2.0.vapi"
			i = 1;
#line 1217 "glib-2.0.vapi"
			_tmp22_ = TRUE;
#line 1217 "glib-2.0.vapi"
			while (TRUE) {
#line 933 "contacts-type-descriptor.c"
				void* _tmp24_;
				void* _tmp25_;
				const gchar* _tmp26_ = NULL;
				const gchar* _tmp27_;
				void* _tmp29_;
				void* _tmp30_;
#line 1217 "glib-2.0.vapi"
				if (!_tmp22_) {
#line 942 "contacts-type-descriptor.c"
					gint _tmp23_;
#line 1217 "glib-2.0.vapi"
					_tmp23_ = i;
#line 1217 "glib-2.0.vapi"
					i = _tmp23_ + 1;
#line 948 "contacts-type-descriptor.c"
				}
#line 1217 "glib-2.0.vapi"
				_tmp22_ = FALSE;
#line 1217 "glib-2.0.vapi"
				if (!(i < str_array_length1)) {
#line 1217 "glib-2.0.vapi"
					break;
#line 956 "contacts-type-descriptor.c"
				}
#line 1218 "glib-2.0.vapi"
				_tmp24_ = ptr;
#line 1218 "glib-2.0.vapi"
				_tmp25_ = g_stpcpy (_tmp24_, (const gchar*) separator);
#line 1218 "glib-2.0.vapi"
				ptr = _tmp25_;
#line 1219 "glib-2.0.vapi"
				_tmp27_ = str_array[i];
#line 1219 "glib-2.0.vapi"
				if (_tmp27_ != NULL) {
#line 968 "contacts-type-descriptor.c"
					const gchar* _tmp28_;
#line 1219 "glib-2.0.vapi"
					_tmp28_ = str_array[i];
#line 1219 "glib-2.0.vapi"
					_tmp26_ = (const gchar*) _tmp28_;
#line 974 "contacts-type-descriptor.c"
				} else {
#line 1219 "glib-2.0.vapi"
					_tmp26_ = "";
#line 978 "contacts-type-descriptor.c"
				}
#line 1219 "glib-2.0.vapi"
				_tmp29_ = ptr;
#line 1219 "glib-2.0.vapi"
				_tmp30_ = g_stpcpy (_tmp29_, _tmp26_);
#line 1219 "glib-2.0.vapi"
				ptr = _tmp30_;
#line 986 "contacts-type-descriptor.c"
			}
		}
#line 1222 "glib-2.0.vapi"
		_tmp31_ = res;
#line 1222 "glib-2.0.vapi"
		res = NULL;
#line 1222 "glib-2.0.vapi"
		result = (gchar*) _tmp31_;
#line 1222 "glib-2.0.vapi"
		return result;
#line 997 "contacts-type-descriptor.c"
	} else {
		gchar* _tmp32_;
#line 1224 "glib-2.0.vapi"
		_tmp32_ = g_strdup ("");
#line 1224 "glib-2.0.vapi"
		result = _tmp32_;
#line 1224 "glib-2.0.vapi"
		return result;
#line 1006 "contacts-type-descriptor.c"
	}
}

gchar*
contacts_typedescriptor_to_string (ContactsTypeDescriptor* self)
{
	GString* str = NULL;
	GString* _tmp0_;
	GString* _tmp1_;
	ContactsTypeDescriptorSource _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	GString* _tmp5_;
	const gchar* _tmp6_;
	GString* _tmp7_;
	const gchar* _tmp8_;
	const gchar* _tmp9_;
	gchar** _tmp10_;
	gint _tmp10__length1;
	GString* _tmp16_;
	const gchar* _tmp17_;
	gchar* _tmp18_;
	gchar* result = NULL;
#line 140 "../src/contacts-type-descriptor.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 141 "../src/contacts-type-descriptor.vala"
	_tmp0_ = g_string_new ("{ ");
#line 141 "../src/contacts-type-descriptor.vala"
	str = _tmp0_;
#line 142 "../src/contacts-type-descriptor.vala"
	_tmp1_ = str;
#line 142 "../src/contacts-type-descriptor.vala"
	_tmp2_ = self->priv->source;
#line 142 "../src/contacts-type-descriptor.vala"
	_tmp3_ = contacts_typedescriptor_source_to_string (_tmp2_);
#line 142 "../src/contacts-type-descriptor.vala"
	_tmp4_ = _tmp3_;
#line 142 "../src/contacts-type-descriptor.vala"
	g_string_append_printf (_tmp1_, ".source = %s, ", _tmp4_);
#line 142 "../src/contacts-type-descriptor.vala"
	_g_free0 (_tmp4_);
#line 143 "../src/contacts-type-descriptor.vala"
	_tmp5_ = str;
#line 143 "../src/contacts-type-descriptor.vala"
	_tmp6_ = self->name;
#line 143 "../src/contacts-type-descriptor.vala"
	g_string_append_printf (_tmp5_, ".name = \"%s\", ", _tmp6_);
#line 144 "../src/contacts-type-descriptor.vala"
	_tmp7_ = str;
#line 144 "../src/contacts-type-descriptor.vala"
	_tmp8_ = contacts_typedescriptor_get_display_name (self);
#line 144 "../src/contacts-type-descriptor.vala"
	_tmp9_ = _tmp8_;
#line 144 "../src/contacts-type-descriptor.vala"
	g_string_append_printf (_tmp7_, ".display_name = \"%s\", ", _tmp9_);
#line 145 "../src/contacts-type-descriptor.vala"
	_tmp10_ = self->vcard_types;
#line 145 "../src/contacts-type-descriptor.vala"
	_tmp10__length1 = self->vcard_types_length1;
#line 145 "../src/contacts-type-descriptor.vala"
	if (_tmp10_ == NULL) {
#line 1068 "contacts-type-descriptor.c"
		GString* _tmp11_;
#line 146 "../src/contacts-type-descriptor.vala"
		_tmp11_ = str;
#line 146 "../src/contacts-type-descriptor.vala"
		g_string_append_printf (_tmp11_, ".vcard_types = NULL }");
#line 1074 "contacts-type-descriptor.c"
	} else {
		GString* _tmp12_;
		gchar** _tmp13_;
		gint _tmp13__length1;
		gchar* _tmp14_;
		gchar* _tmp15_;
#line 148 "../src/contacts-type-descriptor.vala"
		_tmp12_ = str;
#line 148 "../src/contacts-type-descriptor.vala"
		_tmp13_ = self->vcard_types;
#line 148 "../src/contacts-type-descriptor.vala"
		_tmp13__length1 = self->vcard_types_length1;
#line 148 "../src/contacts-type-descriptor.vala"
		_tmp14_ = _vala_g_strjoinv (", ", _tmp13_, (gint) _tmp13__length1);
#line 148 "../src/contacts-type-descriptor.vala"
		_tmp15_ = _tmp14_;
#line 148 "../src/contacts-type-descriptor.vala"
		g_string_append_printf (_tmp12_, ".vcard_types = [ %s }", _tmp15_);
#line 148 "../src/contacts-type-descriptor.vala"
		_g_free0 (_tmp15_);
#line 1095 "contacts-type-descriptor.c"
	}
#line 149 "../src/contacts-type-descriptor.vala"
	_tmp16_ = str;
#line 149 "../src/contacts-type-descriptor.vala"
	_tmp17_ = _tmp16_->str;
#line 149 "../src/contacts-type-descriptor.vala"
	_tmp18_ = g_strdup (_tmp17_);
#line 149 "../src/contacts-type-descriptor.vala"
	result = _tmp18_;
#line 149 "../src/contacts-type-descriptor.vala"
	_g_string_free0 (str);
#line 149 "../src/contacts-type-descriptor.vala"
	return result;
#line 1109 "contacts-type-descriptor.c"
}

ContactsTypeDescriptor*
contacts_typedescriptor_construct (GType object_type)
{
	ContactsTypeDescriptor * self = NULL;
#line 25 "../src/contacts-type-descriptor.vala"
	self = (ContactsTypeDescriptor*) g_object_new (object_type, NULL);
#line 25 "../src/contacts-type-descriptor.vala"
	return self;
#line 1120 "contacts-type-descriptor.c"
}

ContactsTypeDescriptor*
contacts_typedescriptor_new (void)
{
#line 25 "../src/contacts-type-descriptor.vala"
	return contacts_typedescriptor_construct (CONTACTS_TYPE_TYPEDESCRIPTOR);
#line 1128 "contacts-type-descriptor.c"
}

const gchar*
contacts_typedescriptor_get_display_name (ContactsTypeDescriptor* self)
{
	const gchar* result;
	const gchar* _tmp1_;
#line 56 "../src/contacts-type-descriptor.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 57 "../src/contacts-type-descriptor.vala"
	if (contacts_typedescriptor_is_custom (self)) {
#line 1140 "contacts-type-descriptor.c"
		const gchar* _tmp0_;
#line 58 "../src/contacts-type-descriptor.vala"
		_tmp0_ = self->name;
#line 58 "../src/contacts-type-descriptor.vala"
		result = _tmp0_;
#line 58 "../src/contacts-type-descriptor.vala"
		return result;
#line 1148 "contacts-type-descriptor.c"
	}
#line 59 "../src/contacts-type-descriptor.vala"
	_tmp1_ = self->name;
#line 59 "../src/contacts-type-descriptor.vala"
	result = g_dgettext (GETTEXT_PACKAGE, _tmp1_);
#line 59 "../src/contacts-type-descriptor.vala"
	return result;
#line 1156 "contacts-type-descriptor.c"
}

static void
contacts_typedescriptor_class_init (ContactsTypeDescriptorClass * klass,
                                    gpointer klass_data)
{
#line 25 "../src/contacts-type-descriptor.vala"
	contacts_typedescriptor_parent_class = g_type_class_peek_parent (klass);
#line 25 "../src/contacts-type-descriptor.vala"
	g_type_class_adjust_private_offset (klass, &ContactsTypeDescriptor_private_offset);
#line 25 "../src/contacts-type-descriptor.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_contacts_typedescriptor_get_property;
#line 25 "../src/contacts-type-descriptor.vala"
	G_OBJECT_CLASS (klass)->finalize = contacts_typedescriptor_finalize;
#line 1171 "contacts-type-descriptor.c"
	/**
	   * Returns the translated name for this property.
	   */
#line 25 "../src/contacts-type-descriptor.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), CONTACTS_TYPEDESCRIPTOR_DISPLAY_NAME_PROPERTY, contacts_typedescriptor_properties[CONTACTS_TYPEDESCRIPTOR_DISPLAY_NAME_PROPERTY] = g_param_spec_string ("display-name", "display-name", "display-name", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
#line 1177 "contacts-type-descriptor.c"
}

static void
contacts_typedescriptor_instance_init (ContactsTypeDescriptor * self,
                                       gpointer klass)
{
#line 25 "../src/contacts-type-descriptor.vala"
	self->priv = contacts_typedescriptor_get_instance_private (self);
#line 48 "../src/contacts-type-descriptor.vala"
	self->name = NULL;
#line 49 "../src/contacts-type-descriptor.vala"
	self->vcard_types = NULL;
#line 49 "../src/contacts-type-descriptor.vala"
	self->vcard_types_length1 = 0;
#line 1192 "contacts-type-descriptor.c"
}

static void
contacts_typedescriptor_finalize (GObject * obj)
{
	ContactsTypeDescriptor * self;
#line 25 "../src/contacts-type-descriptor.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, CONTACTS_TYPE_TYPEDESCRIPTOR, ContactsTypeDescriptor);
#line 48 "../src/contacts-type-descriptor.vala"
	_g_free0 (self->name);
#line 49 "../src/contacts-type-descriptor.vala"
	self->vcard_types = (_vala_array_free (self->vcard_types, self->vcard_types_length1, (GDestroyNotify) g_free), NULL);
#line 25 "../src/contacts-type-descriptor.vala"
	G_OBJECT_CLASS (contacts_typedescriptor_parent_class)->finalize (obj);
#line 1207 "contacts-type-descriptor.c"
}

/**
 * The TypeDescriptor is the internal representation of a property's type.
 */
static GType
contacts_typedescriptor_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (ContactsTypeDescriptorClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) contacts_typedescriptor_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ContactsTypeDescriptor), 0, (GInstanceInitFunc) contacts_typedescriptor_instance_init, NULL };
	GType contacts_typedescriptor_type_id;
	contacts_typedescriptor_type_id = g_type_register_static (G_TYPE_OBJECT, "ContactsTypeDescriptor", &g_define_type_info, 0);
	ContactsTypeDescriptor_private_offset = g_type_add_instance_private (contacts_typedescriptor_type_id, sizeof (ContactsTypeDescriptorPrivate));
	return contacts_typedescriptor_type_id;
}

GType
contacts_typedescriptor_get_type (void)
{
	static volatile gsize contacts_typedescriptor_type_id__volatile = 0;
	if (g_once_init_enter (&contacts_typedescriptor_type_id__volatile)) {
		GType contacts_typedescriptor_type_id;
		contacts_typedescriptor_type_id = contacts_typedescriptor_get_type_once ();
		g_once_init_leave (&contacts_typedescriptor_type_id__volatile, contacts_typedescriptor_type_id);
	}
	return contacts_typedescriptor_type_id__volatile;
}

static void
_vala_contacts_typedescriptor_get_property (GObject * object,
                                            guint property_id,
                                            GValue * value,
                                            GParamSpec * pspec)
{
	ContactsTypeDescriptor * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, CONTACTS_TYPE_TYPEDESCRIPTOR, ContactsTypeDescriptor);
#line 25 "../src/contacts-type-descriptor.vala"
	switch (property_id) {
#line 25 "../src/contacts-type-descriptor.vala"
		case CONTACTS_TYPEDESCRIPTOR_DISPLAY_NAME_PROPERTY:
#line 25 "../src/contacts-type-descriptor.vala"
		g_value_set_string (value, contacts_typedescriptor_get_display_name (self));
#line 25 "../src/contacts-type-descriptor.vala"
		break;
#line 1251 "contacts-type-descriptor.c"
		default:
#line 25 "../src/contacts-type-descriptor.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 25 "../src/contacts-type-descriptor.vala"
		break;
#line 1257 "contacts-type-descriptor.c"
	}
}

static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		gint i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}

static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}

