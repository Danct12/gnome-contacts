/* contacts-contact-pane.c generated by valac 0.47.2.1-ce69, the Vala compiler
 * generated from contacts-contact-pane.vala, do not modify */

/*
 * Copyright (C) 2011 Alexander Larsson <alexl@redhat.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

#include <glib.h>
#include <gtk/gtk.h>
#include <glib-object.h>
#include <folks/folks.h>
#include "contacts.h"
#include <gio/gio.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>
#include <glib/gi18n-lib.h>

#define CONTACTS_TYPE_CONTACT_PANE (contacts_contact_pane_get_type ())
#define CONTACTS_CONTACT_PANE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CONTACTS_TYPE_CONTACT_PANE, ContactsContactPane))
#define CONTACTS_CONTACT_PANE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CONTACTS_TYPE_CONTACT_PANE, ContactsContactPaneClass))
#define CONTACTS_IS_CONTACT_PANE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CONTACTS_TYPE_CONTACT_PANE))
#define CONTACTS_IS_CONTACT_PANE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CONTACTS_TYPE_CONTACT_PANE))
#define CONTACTS_CONTACT_PANE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CONTACTS_TYPE_CONTACT_PANE, ContactsContactPaneClass))

typedef struct _ContactsContactPane ContactsContactPane;
typedef struct _ContactsContactPaneClass ContactsContactPaneClass;
typedef struct _ContactsContactPanePrivate ContactsContactPanePrivate;

#define CONTACTS_TYPE_WINDOW (contacts_window_get_type ())
#define CONTACTS_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CONTACTS_TYPE_WINDOW, ContactsWindow))
#define CONTACTS_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CONTACTS_TYPE_WINDOW, ContactsWindowClass))
#define CONTACTS_IS_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CONTACTS_TYPE_WINDOW))
#define CONTACTS_IS_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CONTACTS_TYPE_WINDOW))
#define CONTACTS_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CONTACTS_TYPE_WINDOW, ContactsWindowClass))

typedef struct _ContactsWindow ContactsWindow;
typedef struct _ContactsWindowClass ContactsWindowClass;

#define CONTACTS_TYPE_CONTACT_FORM (contacts_contact_form_get_type ())
#define CONTACTS_CONTACT_FORM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CONTACTS_TYPE_CONTACT_FORM, ContactsContactForm))
#define CONTACTS_CONTACT_FORM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CONTACTS_TYPE_CONTACT_FORM, ContactsContactFormClass))
#define CONTACTS_IS_CONTACT_FORM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CONTACTS_TYPE_CONTACT_FORM))
#define CONTACTS_IS_CONTACT_FORM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CONTACTS_TYPE_CONTACT_FORM))
#define CONTACTS_CONTACT_FORM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CONTACTS_TYPE_CONTACT_FORM, ContactsContactFormClass))

typedef struct _ContactsContactForm ContactsContactForm;
typedef struct _ContactsContactFormClass ContactsContactFormClass;

#define CONTACTS_TYPE_CONTACT_SHEET (contacts_contact_sheet_get_type ())
#define CONTACTS_CONTACT_SHEET(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CONTACTS_TYPE_CONTACT_SHEET, ContactsContactSheet))
#define CONTACTS_CONTACT_SHEET_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CONTACTS_TYPE_CONTACT_SHEET, ContactsContactSheetClass))
#define CONTACTS_IS_CONTACT_SHEET(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CONTACTS_TYPE_CONTACT_SHEET))
#define CONTACTS_IS_CONTACT_SHEET_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CONTACTS_TYPE_CONTACT_SHEET))
#define CONTACTS_CONTACT_SHEET_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CONTACTS_TYPE_CONTACT_SHEET, ContactsContactSheetClass))

typedef struct _ContactsContactSheet ContactsContactSheet;
typedef struct _ContactsContactSheetClass ContactsContactSheetClass;

#define CONTACTS_TYPE_CONTACT_EDITOR (contacts_contact_editor_get_type ())
#define CONTACTS_CONTACT_EDITOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CONTACTS_TYPE_CONTACT_EDITOR, ContactsContactEditor))
#define CONTACTS_CONTACT_EDITOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CONTACTS_TYPE_CONTACT_EDITOR, ContactsContactEditorClass))
#define CONTACTS_IS_CONTACT_EDITOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CONTACTS_TYPE_CONTACT_EDITOR))
#define CONTACTS_IS_CONTACT_EDITOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CONTACTS_TYPE_CONTACT_EDITOR))
#define CONTACTS_CONTACT_EDITOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CONTACTS_TYPE_CONTACT_EDITOR, ContactsContactEditorClass))

typedef struct _ContactsContactEditor ContactsContactEditor;
typedef struct _ContactsContactEditorClass ContactsContactEditorClass;

#define CONTACTS_TYPE_LINK_SUGGESTION_GRID (contacts_link_suggestion_grid_get_type ())
#define CONTACTS_LINK_SUGGESTION_GRID(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CONTACTS_TYPE_LINK_SUGGESTION_GRID, ContactsLinkSuggestionGrid))
#define CONTACTS_LINK_SUGGESTION_GRID_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CONTACTS_TYPE_LINK_SUGGESTION_GRID, ContactsLinkSuggestionGridClass))
#define CONTACTS_IS_LINK_SUGGESTION_GRID(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CONTACTS_TYPE_LINK_SUGGESTION_GRID))
#define CONTACTS_IS_LINK_SUGGESTION_GRID_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CONTACTS_TYPE_LINK_SUGGESTION_GRID))
#define CONTACTS_LINK_SUGGESTION_GRID_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CONTACTS_TYPE_LINK_SUGGESTION_GRID, ContactsLinkSuggestionGridClass))

typedef struct _ContactsLinkSuggestionGrid ContactsLinkSuggestionGrid;
typedef struct _ContactsLinkSuggestionGridClass ContactsLinkSuggestionGridClass;
enum  {
	CONTACTS_CONTACT_PANE_0_PROPERTY,
	CONTACTS_CONTACT_PANE_NUM_PROPERTIES
};
static GParamSpec* contacts_contact_pane_properties[CONTACTS_CONTACT_PANE_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
typedef struct _Block17Data Block17Data;
typedef struct _Block18Data Block18Data;
#define _g_free0(var) (var = (g_free (var), NULL))

#define CONTACTS_TYPE_LINK_OPERATION (contacts_link_operation_get_type ())
#define CONTACTS_LINK_OPERATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CONTACTS_TYPE_LINK_OPERATION, ContactsLinkOperation))
#define CONTACTS_LINK_OPERATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CONTACTS_TYPE_LINK_OPERATION, ContactsLinkOperationClass))
#define CONTACTS_IS_LINK_OPERATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CONTACTS_TYPE_LINK_OPERATION))
#define CONTACTS_IS_LINK_OPERATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CONTACTS_TYPE_LINK_OPERATION))
#define CONTACTS_LINK_OPERATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CONTACTS_TYPE_LINK_OPERATION, ContactsLinkOperationClass))

typedef struct _ContactsLinkOperation ContactsLinkOperation;
typedef struct _ContactsLinkOperationClass ContactsLinkOperationClass;
typedef struct _ContactsContactFormPrivate ContactsContactFormPrivate;
typedef struct _ContactsContactEditorPrivate ContactsContactEditorPrivate;

#define CONTACTS_TYPE_LINKED_PERSONAS_DIALOG (contacts_linked_personas_dialog_get_type ())
#define CONTACTS_LINKED_PERSONAS_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CONTACTS_TYPE_LINKED_PERSONAS_DIALOG, ContactsLinkedPersonasDialog))
#define CONTACTS_LINKED_PERSONAS_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CONTACTS_TYPE_LINKED_PERSONAS_DIALOG, ContactsLinkedPersonasDialogClass))
#define CONTACTS_IS_LINKED_PERSONAS_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CONTACTS_TYPE_LINKED_PERSONAS_DIALOG))
#define CONTACTS_IS_LINKED_PERSONAS_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CONTACTS_TYPE_LINKED_PERSONAS_DIALOG))
#define CONTACTS_LINKED_PERSONAS_DIALOG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CONTACTS_TYPE_LINKED_PERSONAS_DIALOG, ContactsLinkedPersonasDialogClass))

typedef struct _ContactsLinkedPersonasDialog ContactsLinkedPersonasDialog;
typedef struct _ContactsLinkedPersonasDialogClass ContactsLinkedPersonasDialogClass;
typedef struct _ContactsLinkedPersonasDialogPrivate ContactsLinkedPersonasDialogPrivate;

#define CONTACTS_CONTACT_EDITOR_TYPE_PROPERTY_DATA (contacts_contact_editor_property_data_get_type ())
typedef struct _ContactsContactEditorPropertyData ContactsContactEditorPropertyData;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _ContactsContactPaneSaveEditorChangesData ContactsContactPaneSaveEditorChangesData;
#define _g_hash_table_unref0(var) ((var == NULL) ? NULL : (var = (g_hash_table_unref (var), NULL)))
typedef struct _ContactsContactPaneCreateContactData ContactsContactPaneCreateContactData;

#define CONTACTS_TYPE_IN_APP_NOTIFICATION (contacts_in_app_notification_get_type ())
#define CONTACTS_IN_APP_NOTIFICATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CONTACTS_TYPE_IN_APP_NOTIFICATION, ContactsInAppNotification))
#define CONTACTS_IN_APP_NOTIFICATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CONTACTS_TYPE_IN_APP_NOTIFICATION, ContactsInAppNotificationClass))
#define CONTACTS_IS_IN_APP_NOTIFICATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CONTACTS_TYPE_IN_APP_NOTIFICATION))
#define CONTACTS_IS_IN_APP_NOTIFICATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CONTACTS_TYPE_IN_APP_NOTIFICATION))
#define CONTACTS_IN_APP_NOTIFICATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CONTACTS_TYPE_IN_APP_NOTIFICATION, ContactsInAppNotificationClass))

typedef struct _ContactsInAppNotification ContactsInAppNotification;
typedef struct _ContactsInAppNotificationClass ContactsInAppNotificationClass;
enum  {
	CONTACTS_CONTACT_PANE_CONTACTS_LINKED_SIGNAL,
	CONTACTS_CONTACT_PANE_WILL_DELETE_SIGNAL,
	CONTACTS_CONTACT_PANE_DISPLAY_NAME_CHANGED_SIGNAL,
	CONTACTS_CONTACT_PANE_NUM_SIGNALS
};
static guint contacts_contact_pane_signals[CONTACTS_CONTACT_PANE_NUM_SIGNALS] = {0};
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);
#define _vala_return_if_fail(expr, msg) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return; }
#define _vala_return_val_if_fail(expr, msg, val) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return val; }
#define _vala_warn_if_fail(expr, msg) if G_LIKELY (expr) ; else g_warn_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _ContactsContactPane {
	GtkStack parent_instance;
	ContactsContactPanePrivate * priv;
	FolksIndividual* individual;
	gboolean on_edit_mode;
};

struct _ContactsContactPaneClass {
	GtkStackClass parent_class;
};

struct _ContactsContactPanePrivate {
	ContactsWindow* parent_window;
	ContactsStore* store;
	GtkGrid* none_selected_page;
	GtkContainer* contact_sheet_page;
	ContactsContactSheet* sheet;
	GtkBox* contact_editor_page;
	ContactsContactEditor* editor;
	GSimpleActionGroup* edit_contact_actions;
	ContactsLinkSuggestionGrid* suggestion_grid;
};

struct _Block17Data {
	int _ref_count_;
	ContactsContactPane* self;
	FolksIndividual* i;
};

struct _Block18Data {
	int _ref_count_;
	Block17Data * _data17_;
	gchar* linked_contact;
};

struct _ContactsContactForm {
	GtkGrid parent_instance;
	ContactsContactFormPrivate * priv;
	FolksIndividual* individual;
	ContactsStore* store;
	GtkGrid* container_grid;
	gint last_row;
};

struct _ContactsContactFormClass {
	GtkGridClass parent_class;
};

struct _ContactsContactEditor {
	ContactsContactForm parent_instance;
	ContactsContactEditorPrivate * priv;
	GtkButton* linked_button;
	GtkButton* remove_button;
};

struct _ContactsContactEditorClass {
	ContactsContactFormClass parent_class;
};

struct _ContactsLinkedPersonasDialog {
	GtkDialog parent_instance;
	ContactsLinkedPersonasDialogPrivate * priv;
	gboolean any_unlinked;
};

struct _ContactsLinkedPersonasDialogClass {
	GtkDialogClass parent_class;
};

struct _ContactsContactEditorPropertyData {
	FolksPersona* persona;
	GValue value;
};

struct _ContactsContactPaneSaveEditorChangesData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	ContactsContactPane* self;
	GeeIterator* _prop_it;
	ContactsContactEditor* _tmp0_;
	GeeHashMap* _tmp1_;
	GeeHashMap* _tmp2_;
	GeeSet* _tmp3_;
	GeeSet* _tmp4_;
	GeeSet* _tmp5_;
	GeeIterator* _tmp6_;
	GeeIterator* _tmp7_;
	GeeIterator* _tmp8_;
	GeeMapEntry* prop;
	GeeIterator* _tmp9_;
	gpointer _tmp10_;
	GeeMapEntry* _tmp11_;
	gconstpointer _tmp12_;
	ContactsContactEditorPropertyData* _tmp13_;
	FolksPersona* _tmp14_;
	GeeMapEntry* _tmp15_;
	gconstpointer _tmp16_;
	const gchar* _tmp17_;
	GeeMapEntry* _tmp18_;
	gconstpointer _tmp19_;
	ContactsContactEditorPropertyData* _tmp20_;
	GValue _tmp21_;
	GError* e;
	GError* _tmp22_;
	const gchar* _tmp23_;
	ContactsContactEditor* _tmp24_;
	GValue v;
	ContactsContactEditor* _tmp25_;
	GValue _tmp26_;
	FolksIndividual* _tmp27_;
	GValue _tmp28_;
	const gchar* _tmp29_;
	GError* _vala1_e;
	GError* _tmp30_;
	const gchar* _tmp31_;
	ContactsContactEditor* _tmp32_;
	GValue _vala1_v;
	ContactsContactEditor* _tmp33_;
	GValue _tmp34_;
	FolksIndividual* _tmp35_;
	GValue _tmp36_;
	GError* _vala2_e;
	GError* _tmp37_;
	const gchar* _tmp38_;
	GError* _inner_error0_;
};

struct _ContactsContactPaneCreateContactData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	ContactsContactPane* self;
	GHashTable* details;
	GHashFunc _tmp0_;
	GEqualFunc _tmp1_;
	GHashTable* _tmp2_;
	ContactsContactEditor* _tmp3_;
	GHashTable* _tmp4_;
	gchar* _tmp5_;
	ContactsContactEditor* _tmp6_;
	GValue _tmp7_;
	GValue _tmp8_;
	GValue* _tmp9_;
	ContactsContactEditor* _tmp10_;
	GHashTable* _tmp11_;
	gchar* _tmp12_;
	ContactsContactEditor* _tmp13_;
	GValue _tmp14_;
	GValue _tmp15_;
	GValue* _tmp16_;
	GeeIterator* _prop_it;
	ContactsContactEditor* _tmp17_;
	GeeHashMap* _tmp18_;
	GeeHashMap* _tmp19_;
	GeeSet* _tmp20_;
	GeeSet* _tmp21_;
	GeeSet* _tmp22_;
	GeeIterator* _tmp23_;
	GeeIterator* _tmp24_;
	GeeIterator* _tmp25_;
	GeeMapEntry* prop;
	GeeIterator* _tmp26_;
	gpointer _tmp27_;
	GHashTable* _tmp28_;
	GeeMapEntry* _tmp29_;
	gconstpointer _tmp30_;
	const gchar* _tmp31_;
	gchar* _tmp32_;
	GeeMapEntry* _tmp33_;
	gconstpointer _tmp34_;
	ContactsContactEditorPropertyData* _tmp35_;
	GValue _tmp36_;
	GValue _tmp37_;
	GValue* _tmp38_;
	GHashTable* _tmp39_;
	ContactsStore* _tmp40_;
	FolksIndividualAggregator* _tmp41_;
	FolksIndividualAggregator* _tmp42_;
	FolksPersonaStore* _tmp43_;
	FolksPersonaStore* _tmp44_;
	ContactsFakePersona* fake_persona;
	ContactsFakePersonaStore* _tmp45_;
	ContactsFakePersonaStore* _tmp46_;
	GHashTable* _tmp47_;
	ContactsFakePersona* _tmp48_;
	ContactsFakePersona* _tmp49_;
	GeeHashSet* fake_personas;
	GeeHashSet* _tmp50_;
	GeeHashSet* _tmp51_;
	ContactsFakePersona* _tmp52_;
	FolksIndividual* fake_individual;
	GeeHashSet* _tmp53_;
	FolksIndividual* _tmp54_;
	ContactsWindow* _tmp55_;
	FolksIndividual* _tmp56_;
	FolksPersonaStore* primary_store;
	ContactsStore* _tmp57_;
	FolksIndividualAggregator* _tmp58_;
	FolksIndividualAggregator* _tmp59_;
	FolksPersonaStore* _tmp60_;
	FolksPersonaStore* _tmp61_;
	FolksPersonaStore* _tmp62_;
	FolksPersona* persona;
	FolksPersona* _tmp63_;
	FolksPersonaStore* _tmp64_;
	GHashTable* _tmp65_;
	FolksPersona* _tmp66_;
	FolksPersona* _tmp67_;
	GError* e;
	GError* _tmp68_;
	const gchar* _tmp69_;
	gchar* _tmp70_;
	gchar* _tmp71_;
	ContactsWindow* _tmp72_;
	FolksIndividual* individual;
	FolksPersona* _tmp73_;
	FolksIndividual* _tmp74_;
	FolksIndividual* _tmp75_;
	FolksIndividual* _tmp76_;
	FolksIndividual* _tmp77_;
	ContactsWindow* _tmp78_;
	FolksIndividual* _tmp79_;
	ContactsWindow* _tmp80_;
	GError* _inner_error0_;
};

static gint ContactsContactPane_private_offset;
static gpointer contacts_contact_pane_parent_class = NULL;

#define PROFILE_SIZE 128
GType contacts_contact_pane_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (ContactsContactPane, g_object_unref)
GType contacts_window_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (ContactsWindow, g_object_unref)
GType contacts_contact_form_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (ContactsContactForm, g_object_unref)
GType contacts_contact_sheet_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (ContactsContactSheet, g_object_unref)
GType contacts_contact_editor_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (ContactsContactEditor, g_object_unref)
GType contacts_link_suggestion_grid_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (ContactsLinkSuggestionGrid, g_object_unref)
static void contacts_contact_pane_on_add_detail (ContactsContactPane* self,
                                          GSimpleAction* action,
                                          GVariant* parameter);
static void _contacts_contact_pane_on_add_detail_gsimple_action_activate_callback (GSimpleAction* action,
                                                                            GVariant* parameter,
                                                                            gpointer self);
ContactsContactPane* contacts_contact_pane_new (ContactsWindow* parent_window,
                                                ContactsStore* contacts_store);
ContactsContactPane* contacts_contact_pane_construct (GType object_type,
                                                      ContactsWindow* parent_window,
                                                      ContactsStore* contacts_store);
void contacts_contact_pane_add_suggestion (ContactsContactPane* self,
                                           FolksIndividual* i);
static Block17Data* block17_data_ref (Block17Data* _data17_);
static void block17_data_unref (void * _userdata_);
static void contacts_contact_pane_remove_suggestion_grid (ContactsContactPane* self);
ContactsLinkSuggestionGrid* contacts_link_suggestion_grid_new (FolksIndividual* individual);
ContactsLinkSuggestionGrid* contacts_link_suggestion_grid_construct (GType object_type,
                                                                     FolksIndividual* individual);
static void __lambda43_ (Block17Data* _data17_);
static Block18Data* block18_data_ref (Block18Data* _data18_);
static void block18_data_unref (void * _userdata_);
void contacts_link_contacts (FolksIndividual* main,
                             FolksIndividual* other,
                             ContactsStore* contacts_store,
                             GAsyncReadyCallback _callback_,
                             gpointer _user_data_);
GType contacts_link_operation_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (ContactsLinkOperation, g_object_unref)
ContactsLinkOperation* contacts_link_contacts_finish (GAsyncResult* _res_);
static void __lambda44_ (Block18Data* _data18_,
                  GObject* obj,
                  GAsyncResult* _result_);
static void ___lambda44__gasync_ready_callback (GObject* source_object,
                                         GAsyncResult* res,
                                         gpointer self);
static void ___lambda43__contacts_link_suggestion_grid_suggestion_accepted (ContactsLinkSuggestionGrid* _sender,
                                                                     gpointer self);
static void __lambda45_ (Block17Data* _data17_);
static void ___lambda45__contacts_link_suggestion_grid_suggestion_rejected (ContactsLinkSuggestionGrid* _sender,
                                                                     gpointer self);
void contacts_contact_pane_show_contact (ContactsContactPane* self,
                                         FolksIndividual* individual);
static void contacts_contact_pane_show_contact_sheet (ContactsContactPane* self);
static void contacts_contact_pane_remove_contact_sheet (ContactsContactPane* self);
ContactsContactSheet* contacts_contact_sheet_new (FolksIndividual* individual,
                                                  ContactsStore* store);
ContactsContactSheet* contacts_contact_sheet_construct (GType object_type,
                                                        FolksIndividual* individual,
                                                        ContactsStore* store);
static void contacts_contact_pane_create_contact_editor (ContactsContactPane* self);
static void contacts_contact_pane_remove_contact_editor (ContactsContactPane* self);
ContactsContactEditor* contacts_contact_editor_new (FolksIndividual* individual,
                                                    ContactsStore* store,
                                                    GActionGroup* editor_actions);
ContactsContactEditor* contacts_contact_editor_construct (GType object_type,
                                                          FolksIndividual* individual,
                                                          ContactsStore* store,
                                                          GActionGroup* editor_actions);
static void contacts_contact_pane_linked_accounts (ContactsContactPane* self);
static void _contacts_contact_pane_linked_accounts_gtk_button_clicked (GtkButton* _sender,
                                                                gpointer self);
static void contacts_contact_pane_delete_contact (ContactsContactPane* self);
static void _contacts_contact_pane_delete_contact_gtk_button_clicked (GtkButton* _sender,
                                                               gpointer self);
void contacts_contact_editor_add_new_row_for_property (ContactsContactEditor* self,
                                                       FolksPersona* persona,
                                                       const gchar* prop_name,
                                                       const gchar* type);
GType contacts_linked_personas_dialog_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (ContactsLinkedPersonasDialog, g_object_unref)
ContactsLinkedPersonasDialog* contacts_linked_personas_dialog_new (ContactsWindow* main_win,
                                                                   ContactsStore* store,
                                                                   FolksIndividual* individual);
ContactsLinkedPersonasDialog* contacts_linked_personas_dialog_construct (GType object_type,
                                                                         ContactsWindow* main_win,
                                                                         ContactsStore* store,
                                                                         FolksIndividual* individual);
void contacts_contact_pane_stop_editing (ContactsContactPane* self,
                                         gboolean drop_changes);
void contacts_contact_pane_start_editing (ContactsContactPane* self);
static void contacts_contact_pane_save_editor_changes (ContactsContactPane* self,
                                                GAsyncReadyCallback _callback_,
                                                gpointer _user_data_);
static void contacts_contact_pane_save_editor_changes_finish (ContactsContactPane* self,
                                                       GAsyncResult* _res_);
static void contacts_contact_pane_save_editor_changes_data_free (gpointer _data);
static gboolean contacts_contact_pane_save_editor_changes_co (ContactsContactPaneSaveEditorChangesData* _data_);
GType contacts_contact_editor_property_data_get_type (void) G_GNUC_CONST;
ContactsContactEditorPropertyData* contacts_contact_editor_property_data_dup (const ContactsContactEditorPropertyData* self);
void contacts_contact_editor_property_data_free (ContactsContactEditorPropertyData* self);
void contacts_contact_editor_property_data_copy (const ContactsContactEditorPropertyData* self,
                                                 ContactsContactEditorPropertyData* dest);
void contacts_contact_editor_property_data_destroy (ContactsContactEditorPropertyData* self);
GeeHashMap* contacts_contact_editor_properties_changed (ContactsContactEditor* self);
static void contacts_contact_pane_save_editor_changes_ready (GObject* source_object,
                                                      GAsyncResult* _res_,
                                                      gpointer _user_data_);
static void contacts_contact_pane_show_message (ContactsContactPane* self,
                                         const gchar* message);
gboolean contacts_contact_editor_name_changed (ContactsContactEditor* self);
void contacts_contact_editor_get_full_name_value (ContactsContactEditor* self,
                                                  GValue* result);
gboolean contacts_contact_editor_avatar_changed (ContactsContactEditor* self);
void contacts_contact_editor_get_avatar_value (ContactsContactEditor* self,
                                               GValue* result);
void contacts_contact_pane_new_contact (ContactsContactPane* self);
static void contacts_contact_pane_create_contact_data_free (gpointer _data);
void contacts_contact_pane_create_contact (ContactsContactPane* self,
                                           GAsyncReadyCallback _callback_,
                                           gpointer _user_data_);
void contacts_contact_pane_create_contact_finish (ContactsContactPane* self,
                                                  GAsyncResult* _res_);
static gboolean contacts_contact_pane_create_contact_co (ContactsContactPaneCreateContactData* _data_);
static void _g_free0_ (gpointer var);
static void _vala_GValue_free (GValue* self);
static void __vala_GValue_free0_ (gpointer var);
static GValue* _g_value_dup (GValue* self);
static void contacts_contact_pane_show_message_dialog (ContactsContactPane* self,
                                                const gchar* message);
void contacts_window_set_shown_contact (ContactsWindow* self,
                                        FolksIndividual* i);
static void contacts_contact_pane_create_contact_ready (GObject* source_object,
                                                 GAsyncResult* _res_,
                                                 gpointer _user_data_);
GType contacts_in_app_notification_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (ContactsInAppNotification, g_object_unref)
ContactsInAppNotification* contacts_in_app_notification_new (const gchar* message,
                                                             GtkButton* button);
ContactsInAppNotification* contacts_in_app_notification_construct (GType object_type,
                                                                   const gchar* message,
                                                                   GtkButton* button);
void contacts_in_app_notification_show (ContactsInAppNotification* self);
void contacts_window_add_notification (ContactsWindow* self,
                                       ContactsInAppNotification* notification);
static void g_cclosure_user_marshal_VOID__STRING_STRING_OBJECT (GClosure * closure,
                                                         GValue * return_value,
                                                         guint n_param_values,
                                                         const GValue * param_values,
                                                         gpointer invocation_hint,
                                                         gpointer marshal_data);
static void contacts_contact_pane_finalize (GObject * obj);
static GType contacts_contact_pane_get_type_once (void);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);

static const GActionEntry CONTACTS_CONTACT_PANE_action_entries[11] = {{"add.email-addresses.home", _contacts_contact_pane_on_add_detail_gsimple_action_activate_callback}, {"add.email-addresses.work", _contacts_contact_pane_on_add_detail_gsimple_action_activate_callback}, {"add.phone-numbers.cell", _contacts_contact_pane_on_add_detail_gsimple_action_activate_callback}, {"add.phone-numbers.home", _contacts_contact_pane_on_add_detail_gsimple_action_activate_callback}, {"add.phone-numbers.work", _contacts_contact_pane_on_add_detail_gsimple_action_activate_callback}, {"add.urls", _contacts_contact_pane_on_add_detail_gsimple_action_activate_callback}, {"add.nickname", _contacts_contact_pane_on_add_detail_gsimple_action_activate_callback}, {"add.birthday", _contacts_contact_pane_on_add_detail_gsimple_action_activate_callback}, {"add.postal-addresses.home", _contacts_contact_pane_on_add_detail_gsimple_action_activate_callback}, {"add.postal-addresses.work", _contacts_contact_pane_on_add_detail_gsimple_action_activate_callback}, {"add.notes", _contacts_contact_pane_on_add_detail_gsimple_action_activate_callback}};

static inline gpointer
contacts_contact_pane_get_instance_private (ContactsContactPane* self)
{
	return G_STRUCT_MEMBER_P (self, ContactsContactPane_private_offset);
}

static void
_contacts_contact_pane_on_add_detail_gsimple_action_activate_callback (GSimpleAction* action,
                                                                       GVariant* parameter,
                                                                       gpointer self)
{
#line 50 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_on_add_detail ((ContactsContactPane*) self, action, parameter);
#line 565 "contacts-contact-pane.c"
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 77 "../src/contacts-contact-pane.vala"
	return self ? g_object_ref (self) : NULL;
#line 573 "contacts-contact-pane.c"
}

ContactsContactPane*
contacts_contact_pane_construct (GType object_type,
                                 ContactsWindow* parent_window,
                                 ContactsStore* contacts_store)
{
	ContactsContactPane * self = NULL;
	ContactsWindow* _tmp0_;
	ContactsStore* _tmp1_;
	GSimpleActionGroup* _tmp2_;
#line 76 "../src/contacts-contact-pane.vala"
	g_return_val_if_fail (parent_window != NULL, NULL);
#line 76 "../src/contacts-contact-pane.vala"
	g_return_val_if_fail (contacts_store != NULL, NULL);
#line 76 "../src/contacts-contact-pane.vala"
	self = (ContactsContactPane*) g_object_new (object_type, NULL);
#line 77 "../src/contacts-contact-pane.vala"
	_tmp0_ = _g_object_ref0 (parent_window);
#line 77 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->parent_window);
#line 77 "../src/contacts-contact-pane.vala"
	self->priv->parent_window = _tmp0_;
#line 78 "../src/contacts-contact-pane.vala"
	_tmp1_ = _g_object_ref0 (contacts_store);
#line 78 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->store);
#line 78 "../src/contacts-contact-pane.vala"
	self->priv->store = _tmp1_;
#line 80 "../src/contacts-contact-pane.vala"
	_tmp2_ = self->priv->edit_contact_actions;
#line 80 "../src/contacts-contact-pane.vala"
	g_action_map_add_action_entries ((GActionMap*) _tmp2_, CONTACTS_CONTACT_PANE_action_entries, (gint) G_N_ELEMENTS (CONTACTS_CONTACT_PANE_action_entries), self);
#line 76 "../src/contacts-contact-pane.vala"
	return self;
#line 609 "contacts-contact-pane.c"
}

ContactsContactPane*
contacts_contact_pane_new (ContactsWindow* parent_window,
                           ContactsStore* contacts_store)
{
#line 76 "../src/contacts-contact-pane.vala"
	return contacts_contact_pane_construct (CONTACTS_TYPE_CONTACT_PANE, parent_window, contacts_store);
#line 618 "contacts-contact-pane.c"
}

static Block17Data*
block17_data_ref (Block17Data* _data17_)
{
#line 83 "../src/contacts-contact-pane.vala"
	g_atomic_int_inc (&_data17_->_ref_count_);
#line 83 "../src/contacts-contact-pane.vala"
	return _data17_;
#line 628 "contacts-contact-pane.c"
}

static void
block17_data_unref (void * _userdata_)
{
	Block17Data* _data17_;
	_data17_ = (Block17Data*) _userdata_;
#line 83 "../src/contacts-contact-pane.vala"
	if (g_atomic_int_dec_and_test (&_data17_->_ref_count_)) {
#line 638 "contacts-contact-pane.c"
		ContactsContactPane* self;
#line 83 "../src/contacts-contact-pane.vala"
		self = _data17_->self;
#line 83 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data17_->i);
#line 83 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (self);
#line 83 "../src/contacts-contact-pane.vala"
		g_slice_free (Block17Data, _data17_);
#line 648 "contacts-contact-pane.c"
	}
}

static Block18Data*
block18_data_ref (Block18Data* _data18_)
{
#line 90 "../src/contacts-contact-pane.vala"
	g_atomic_int_inc (&_data18_->_ref_count_);
#line 90 "../src/contacts-contact-pane.vala"
	return _data18_;
#line 659 "contacts-contact-pane.c"
}

static void
block18_data_unref (void * _userdata_)
{
	Block18Data* _data18_;
	_data18_ = (Block18Data*) _userdata_;
#line 90 "../src/contacts-contact-pane.vala"
	if (g_atomic_int_dec_and_test (&_data18_->_ref_count_)) {
#line 669 "contacts-contact-pane.c"
		ContactsContactPane* self;
#line 90 "../src/contacts-contact-pane.vala"
		self = _data18_->_data17_->self;
#line 90 "../src/contacts-contact-pane.vala"
		_g_free0 (_data18_->linked_contact);
#line 90 "../src/contacts-contact-pane.vala"
		block17_data_unref (_data18_->_data17_);
#line 90 "../src/contacts-contact-pane.vala"
		_data18_->_data17_ = NULL;
#line 90 "../src/contacts-contact-pane.vala"
		g_slice_free (Block18Data, _data18_);
#line 681 "contacts-contact-pane.c"
	}
}

static void
__lambda44_ (Block18Data* _data18_,
             GObject* obj,
             GAsyncResult* _result_)
{
	Block17Data* _data17_;
	ContactsContactPane* self;
	ContactsLinkOperation* operation = NULL;
	ContactsLinkOperation* _tmp0_;
#line 92 "../src/contacts-contact-pane.vala"
	_data17_ = _data18_->_data17_;
#line 92 "../src/contacts-contact-pane.vala"
	self = _data17_->self;
#line 92 "../src/contacts-contact-pane.vala"
	g_return_if_fail (_result_ != NULL);
#line 93 "../src/contacts-contact-pane.vala"
	_tmp0_ = contacts_link_contacts_finish (_result_);
#line 93 "../src/contacts-contact-pane.vala"
	operation = _tmp0_;
#line 94 "../src/contacts-contact-pane.vala"
	g_signal_emit (self, contacts_contact_pane_signals[CONTACTS_CONTACT_PANE_CONTACTS_LINKED_SIGNAL], 0, NULL, _data18_->linked_contact, operation);
#line 92 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (operation);
#line 708 "contacts-contact-pane.c"
}

static void
___lambda44__gasync_ready_callback (GObject* source_object,
                                    GAsyncResult* res,
                                    gpointer self)
{
#line 92 "../src/contacts-contact-pane.vala"
	__lambda44_ (self, source_object, res);
#line 92 "../src/contacts-contact-pane.vala"
	block18_data_unref (self);
#line 720 "contacts-contact-pane.c"
}

static void
__lambda43_ (Block17Data* _data17_)
{
	ContactsContactPane* self;
	Block18Data* _data18_;
	FolksIndividual* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	FolksIndividual* _tmp4_;
	ContactsStore* _tmp5_;
#line 90 "../src/contacts-contact-pane.vala"
	self = _data17_->self;
#line 90 "../src/contacts-contact-pane.vala"
	_data18_ = g_slice_new0 (Block18Data);
#line 90 "../src/contacts-contact-pane.vala"
	_data18_->_ref_count_ = 1;
#line 90 "../src/contacts-contact-pane.vala"
	_data18_->_data17_ = block17_data_ref (_data17_);
#line 91 "../src/contacts-contact-pane.vala"
	_tmp0_ = self->individual;
#line 91 "../src/contacts-contact-pane.vala"
	_tmp1_ = folks_individual_get_display_name (_tmp0_);
#line 91 "../src/contacts-contact-pane.vala"
	_tmp2_ = _tmp1_;
#line 91 "../src/contacts-contact-pane.vala"
	_tmp3_ = g_strdup (_tmp2_);
#line 91 "../src/contacts-contact-pane.vala"
	_data18_->linked_contact = _tmp3_;
#line 92 "../src/contacts-contact-pane.vala"
	_tmp4_ = self->individual;
#line 92 "../src/contacts-contact-pane.vala"
	_tmp5_ = self->priv->store;
#line 92 "../src/contacts-contact-pane.vala"
	contacts_link_contacts (_tmp4_, _data17_->i, _tmp5_, ___lambda44__gasync_ready_callback, block18_data_ref (_data18_));
#line 96 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_remove_suggestion_grid (self);
#line 90 "../src/contacts-contact-pane.vala"
	block18_data_unref (_data18_);
#line 90 "../src/contacts-contact-pane.vala"
	_data18_ = NULL;
#line 764 "contacts-contact-pane.c"
}

static void
___lambda43__contacts_link_suggestion_grid_suggestion_accepted (ContactsLinkSuggestionGrid* _sender,
                                                                gpointer self)
{
#line 90 "../src/contacts-contact-pane.vala"
	__lambda43_ (self);
#line 773 "contacts-contact-pane.c"
}

static void
__lambda45_ (Block17Data* _data17_)
{
	ContactsContactPane* self;
	ContactsStore* _tmp0_;
	FolksIndividual* _tmp1_;
#line 99 "../src/contacts-contact-pane.vala"
	self = _data17_->self;
#line 101 "../src/contacts-contact-pane.vala"
	_tmp0_ = self->priv->store;
#line 101 "../src/contacts-contact-pane.vala"
	_tmp1_ = self->individual;
#line 101 "../src/contacts-contact-pane.vala"
	contacts_store_add_no_suggest_link (_tmp0_, _tmp1_, _data17_->i);
#line 102 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_remove_suggestion_grid (self);
#line 792 "contacts-contact-pane.c"
}

static void
___lambda45__contacts_link_suggestion_grid_suggestion_rejected (ContactsLinkSuggestionGrid* _sender,
                                                                gpointer self)
{
#line 99 "../src/contacts-contact-pane.vala"
	__lambda45_ (self);
#line 801 "contacts-contact-pane.c"
}

void
contacts_contact_pane_add_suggestion (ContactsContactPane* self,
                                      FolksIndividual* i)
{
	Block17Data* _data17_;
	FolksIndividual* _tmp0_;
	GtkOverlay* parent_overlay = NULL;
	GtkContainer* _tmp1_;
	GtkOverlay* _tmp2_;
	ContactsLinkSuggestionGrid* _tmp3_;
	ContactsLinkSuggestionGrid* _tmp4_;
	ContactsLinkSuggestionGrid* _tmp5_;
	ContactsLinkSuggestionGrid* _tmp6_;
#line 83 "../src/contacts-contact-pane.vala"
	g_return_if_fail (self != NULL);
#line 83 "../src/contacts-contact-pane.vala"
	g_return_if_fail (i != NULL);
#line 83 "../src/contacts-contact-pane.vala"
	_data17_ = g_slice_new0 (Block17Data);
#line 83 "../src/contacts-contact-pane.vala"
	_data17_->_ref_count_ = 1;
#line 83 "../src/contacts-contact-pane.vala"
	_data17_->self = g_object_ref (self);
#line 83 "../src/contacts-contact-pane.vala"
	_tmp0_ = _g_object_ref0 (i);
#line 83 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (_data17_->i);
#line 83 "../src/contacts-contact-pane.vala"
	_data17_->i = _tmp0_;
#line 84 "../src/contacts-contact-pane.vala"
	_tmp1_ = gtk_widget_get_parent ((GtkWidget*) self);
#line 84 "../src/contacts-contact-pane.vala"
	_tmp2_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp1_, gtk_overlay_get_type ()) ? ((GtkOverlay*) _tmp1_) : NULL);
#line 84 "../src/contacts-contact-pane.vala"
	parent_overlay = _tmp2_;
#line 86 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_remove_suggestion_grid (self);
#line 87 "../src/contacts-contact-pane.vala"
	_tmp3_ = contacts_link_suggestion_grid_new (_data17_->i);
#line 87 "../src/contacts-contact-pane.vala"
	g_object_ref_sink (_tmp3_);
#line 87 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->suggestion_grid);
#line 87 "../src/contacts-contact-pane.vala"
	self->priv->suggestion_grid = _tmp3_;
#line 88 "../src/contacts-contact-pane.vala"
	_tmp4_ = self->priv->suggestion_grid;
#line 88 "../src/contacts-contact-pane.vala"
	gtk_overlay_add_overlay (parent_overlay, (GtkWidget*) _tmp4_);
#line 90 "../src/contacts-contact-pane.vala"
	_tmp5_ = self->priv->suggestion_grid;
#line 90 "../src/contacts-contact-pane.vala"
	g_signal_connect_data (_tmp5_, "suggestion-accepted", (GCallback) ___lambda43__contacts_link_suggestion_grid_suggestion_accepted, block17_data_ref (_data17_), (GClosureNotify) block17_data_unref, 0);
#line 99 "../src/contacts-contact-pane.vala"
	_tmp6_ = self->priv->suggestion_grid;
#line 99 "../src/contacts-contact-pane.vala"
	g_signal_connect_data (_tmp6_, "suggestion-rejected", (GCallback) ___lambda45__contacts_link_suggestion_grid_suggestion_rejected, block17_data_ref (_data17_), (GClosureNotify) block17_data_unref, 0);
#line 83 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (parent_overlay);
#line 83 "../src/contacts-contact-pane.vala"
	block17_data_unref (_data17_);
#line 83 "../src/contacts-contact-pane.vala"
	_data17_ = NULL;
#line 867 "contacts-contact-pane.c"
}

void
contacts_contact_pane_show_contact (ContactsContactPane* self,
                                    FolksIndividual* individual)
{
	FolksIndividual* _tmp0_;
	FolksIndividual* _tmp1_;
	FolksIndividual* _tmp2_;
#line 106 "../src/contacts-contact-pane.vala"
	g_return_if_fail (self != NULL);
#line 107 "../src/contacts-contact-pane.vala"
	_tmp0_ = self->individual;
#line 107 "../src/contacts-contact-pane.vala"
	if (_tmp0_ == individual) {
#line 108 "../src/contacts-contact-pane.vala"
		return;
#line 885 "contacts-contact-pane.c"
	}
#line 110 "../src/contacts-contact-pane.vala"
	_tmp1_ = _g_object_ref0 (individual);
#line 110 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->individual);
#line 110 "../src/contacts-contact-pane.vala"
	self->individual = _tmp1_;
#line 112 "../src/contacts-contact-pane.vala"
	_tmp2_ = self->individual;
#line 112 "../src/contacts-contact-pane.vala"
	if (_tmp2_ != NULL) {
#line 113 "../src/contacts-contact-pane.vala"
		contacts_contact_pane_show_contact_sheet (self);
#line 899 "contacts-contact-pane.c"
	} else {
		GtkGrid* _tmp3_;
#line 115 "../src/contacts-contact-pane.vala"
		contacts_contact_pane_remove_contact_sheet (self);
#line 116 "../src/contacts-contact-pane.vala"
		_tmp3_ = self->priv->none_selected_page;
#line 116 "../src/contacts-contact-pane.vala"
		gtk_stack_set_visible_child ((GtkStack*) self, (GtkWidget*) _tmp3_);
#line 908 "contacts-contact-pane.c"
	}
}

static void
contacts_contact_pane_show_contact_sheet (ContactsContactPane* self)
{
	FolksIndividual* _tmp0_;
	FolksIndividual* _tmp1_;
	ContactsStore* _tmp2_;
	ContactsContactSheet* _tmp3_;
	GtkContainer* _tmp4_;
	ContactsContactSheet* _tmp5_;
	GtkContainer* _tmp6_;
	GeeMap* matches = NULL;
	ContactsStore* _tmp7_;
	FolksIndividualAggregator* _tmp8_;
	FolksIndividualAggregator* _tmp9_;
	FolksIndividual* _tmp10_;
	GeeMap* _tmp11_;
#line 120 "../src/contacts-contact-pane.vala"
	g_return_if_fail (self != NULL);
#line 121 "../src/contacts-contact-pane.vala"
	_tmp0_ = self->individual;
#line 121 "../src/contacts-contact-pane.vala"
	_vala_assert (_tmp0_ != NULL, "this.individual != null");
#line 123 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_remove_contact_sheet (self);
#line 124 "../src/contacts-contact-pane.vala"
	_tmp1_ = self->individual;
#line 124 "../src/contacts-contact-pane.vala"
	_tmp2_ = self->priv->store;
#line 124 "../src/contacts-contact-pane.vala"
	_tmp3_ = contacts_contact_sheet_new (_tmp1_, _tmp2_);
#line 124 "../src/contacts-contact-pane.vala"
	g_object_ref_sink (_tmp3_);
#line 124 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->sheet);
#line 124 "../src/contacts-contact-pane.vala"
	self->priv->sheet = _tmp3_;
#line 125 "../src/contacts-contact-pane.vala"
	_tmp4_ = self->priv->contact_sheet_page;
#line 125 "../src/contacts-contact-pane.vala"
	_tmp5_ = self->priv->sheet;
#line 125 "../src/contacts-contact-pane.vala"
	gtk_container_add (_tmp4_, (GtkWidget*) _tmp5_);
#line 126 "../src/contacts-contact-pane.vala"
	_tmp6_ = self->priv->contact_sheet_page;
#line 126 "../src/contacts-contact-pane.vala"
	gtk_stack_set_visible_child ((GtkStack*) self, (GtkWidget*) _tmp6_);
#line 128 "../src/contacts-contact-pane.vala"
	_tmp7_ = self->priv->store;
#line 128 "../src/contacts-contact-pane.vala"
	_tmp8_ = contacts_store_get_aggregator (_tmp7_);
#line 128 "../src/contacts-contact-pane.vala"
	_tmp9_ = _tmp8_;
#line 128 "../src/contacts-contact-pane.vala"
	_tmp10_ = self->individual;
#line 128 "../src/contacts-contact-pane.vala"
	_tmp11_ = folks_individual_aggregator_get_potential_matches (_tmp9_, _tmp10_, FOLKS_MATCH_RESULT_HIGH);
#line 128 "../src/contacts-contact-pane.vala"
	matches = _tmp11_;
#line 970 "contacts-contact-pane.c"
	{
		GeeIterator* _i_it = NULL;
		GeeMap* _tmp12_;
		GeeSet* _tmp13_;
		GeeSet* _tmp14_;
		GeeSet* _tmp15_;
		GeeIterator* _tmp16_;
		GeeIterator* _tmp17_;
#line 129 "../src/contacts-contact-pane.vala"
		_tmp12_ = matches;
#line 129 "../src/contacts-contact-pane.vala"
		_tmp13_ = gee_map_get_keys (_tmp12_);
#line 129 "../src/contacts-contact-pane.vala"
		_tmp14_ = _tmp13_;
#line 129 "../src/contacts-contact-pane.vala"
		_tmp15_ = _tmp14_;
#line 129 "../src/contacts-contact-pane.vala"
		_tmp16_ = gee_iterable_iterator ((GeeIterable*) _tmp15_);
#line 129 "../src/contacts-contact-pane.vala"
		_tmp17_ = _tmp16_;
#line 129 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_tmp15_);
#line 129 "../src/contacts-contact-pane.vala"
		_i_it = _tmp17_;
#line 129 "../src/contacts-contact-pane.vala"
		while (TRUE) {
#line 997 "contacts-contact-pane.c"
			GeeIterator* _tmp18_;
			FolksIndividual* i = NULL;
			GeeIterator* _tmp19_;
			gpointer _tmp20_;
			gboolean _tmp21_ = FALSE;
			FolksIndividual* _tmp22_;
#line 129 "../src/contacts-contact-pane.vala"
			_tmp18_ = _i_it;
#line 129 "../src/contacts-contact-pane.vala"
			if (!gee_iterator_next (_tmp18_)) {
#line 129 "../src/contacts-contact-pane.vala"
				break;
#line 1010 "contacts-contact-pane.c"
			}
#line 129 "../src/contacts-contact-pane.vala"
			_tmp19_ = _i_it;
#line 129 "../src/contacts-contact-pane.vala"
			_tmp20_ = gee_iterator_get (_tmp19_);
#line 129 "../src/contacts-contact-pane.vala"
			i = (FolksIndividual*) _tmp20_;
#line 130 "../src/contacts-contact-pane.vala"
			_tmp22_ = i;
#line 130 "../src/contacts-contact-pane.vala"
			if (_tmp22_ != NULL) {
#line 1022 "contacts-contact-pane.c"
				ContactsStore* _tmp23_;
				FolksIndividual* _tmp24_;
				FolksIndividual* _tmp25_;
#line 130 "../src/contacts-contact-pane.vala"
				_tmp23_ = self->priv->store;
#line 130 "../src/contacts-contact-pane.vala"
				_tmp24_ = self->individual;
#line 130 "../src/contacts-contact-pane.vala"
				_tmp25_ = i;
#line 130 "../src/contacts-contact-pane.vala"
				_tmp21_ = contacts_utils_suggest_link_to (_tmp23_, _tmp24_, _tmp25_);
#line 1034 "contacts-contact-pane.c"
			} else {
#line 130 "../src/contacts-contact-pane.vala"
				_tmp21_ = FALSE;
#line 1038 "contacts-contact-pane.c"
			}
#line 130 "../src/contacts-contact-pane.vala"
			if (_tmp21_) {
#line 1042 "contacts-contact-pane.c"
				FolksIndividual* _tmp26_;
#line 131 "../src/contacts-contact-pane.vala"
				_tmp26_ = i;
#line 131 "../src/contacts-contact-pane.vala"
				contacts_contact_pane_add_suggestion (self, _tmp26_);
#line 132 "../src/contacts-contact-pane.vala"
				_g_object_unref0 (i);
#line 132 "../src/contacts-contact-pane.vala"
				break;
#line 1052 "contacts-contact-pane.c"
			}
#line 129 "../src/contacts-contact-pane.vala"
			_g_object_unref0 (i);
#line 1056 "contacts-contact-pane.c"
		}
#line 129 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_i_it);
#line 1060 "contacts-contact-pane.c"
	}
#line 120 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (matches);
#line 1064 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_remove_contact_sheet (ContactsContactPane* self)
{
	ContactsContactSheet* _tmp0_;
	GtkContainer* _tmp1_;
	ContactsContactSheet* _tmp2_;
	ContactsContactSheet* _tmp3_;
#line 137 "../src/contacts-contact-pane.vala"
	g_return_if_fail (self != NULL);
#line 138 "../src/contacts-contact-pane.vala"
	_tmp0_ = self->priv->sheet;
#line 138 "../src/contacts-contact-pane.vala"
	if (_tmp0_ == NULL) {
#line 139 "../src/contacts-contact-pane.vala"
		return;
#line 1082 "contacts-contact-pane.c"
	}
#line 142 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_remove_suggestion_grid (self);
#line 144 "../src/contacts-contact-pane.vala"
	_tmp1_ = self->priv->contact_sheet_page;
#line 144 "../src/contacts-contact-pane.vala"
	_tmp2_ = self->priv->sheet;
#line 144 "../src/contacts-contact-pane.vala"
	gtk_container_remove (_tmp1_, (GtkWidget*) _tmp2_);
#line 145 "../src/contacts-contact-pane.vala"
	_tmp3_ = self->priv->sheet;
#line 145 "../src/contacts-contact-pane.vala"
	gtk_widget_destroy ((GtkWidget*) _tmp3_);
#line 146 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->sheet);
#line 146 "../src/contacts-contact-pane.vala"
	self->priv->sheet = NULL;
#line 1100 "contacts-contact-pane.c"
}

static void
_contacts_contact_pane_linked_accounts_gtk_button_clicked (GtkButton* _sender,
                                                           gpointer self)
{
#line 155 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_linked_accounts ((ContactsContactPane*) self);
#line 1109 "contacts-contact-pane.c"
}

static void
_contacts_contact_pane_delete_contact_gtk_button_clicked (GtkButton* _sender,
                                                          gpointer self)
{
#line 156 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_delete_contact ((ContactsContactPane*) self);
#line 1118 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_create_contact_editor (ContactsContactPane* self)
{
	ContactsContactEditor* _tmp0_;
	FolksIndividual* _tmp1_;
	ContactsStore* _tmp2_;
	GSimpleActionGroup* _tmp3_;
	ContactsContactEditor* _tmp4_;
	ContactsContactEditor* _tmp5_;
	GtkButton* _tmp6_;
	ContactsContactEditor* _tmp7_;
	GtkButton* _tmp8_;
	GSimpleAction* birthday_action = NULL;
	GSimpleActionGroup* _tmp9_;
	GAction* _tmp10_;
	GSimpleAction* _tmp11_;
	ContactsContactEditor* _tmp12_;
	GSimpleAction* nickname_action = NULL;
	GSimpleActionGroup* _tmp13_;
	GAction* _tmp14_;
	GSimpleAction* _tmp15_;
	ContactsContactEditor* _tmp16_;
	GSimpleAction* notes_action = NULL;
	GSimpleActionGroup* _tmp17_;
	GAction* _tmp18_;
	GSimpleAction* _tmp19_;
	ContactsContactEditor* _tmp20_;
	GtkBox* _tmp21_;
	ContactsContactEditor* _tmp22_;
#line 149 "../src/contacts-contact-pane.vala"
	g_return_if_fail (self != NULL);
#line 150 "../src/contacts-contact-pane.vala"
	_tmp0_ = self->priv->editor;
#line 150 "../src/contacts-contact-pane.vala"
	if (_tmp0_ != NULL) {
#line 151 "../src/contacts-contact-pane.vala"
		contacts_contact_pane_remove_contact_editor (self);
#line 1158 "contacts-contact-pane.c"
	}
#line 153 "../src/contacts-contact-pane.vala"
	_tmp1_ = self->individual;
#line 153 "../src/contacts-contact-pane.vala"
	_tmp2_ = self->priv->store;
#line 153 "../src/contacts-contact-pane.vala"
	_tmp3_ = self->priv->edit_contact_actions;
#line 153 "../src/contacts-contact-pane.vala"
	_tmp4_ = contacts_contact_editor_new (_tmp1_, _tmp2_, (GActionGroup*) _tmp3_);
#line 153 "../src/contacts-contact-pane.vala"
	g_object_ref_sink (_tmp4_);
#line 153 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->editor);
#line 153 "../src/contacts-contact-pane.vala"
	self->priv->editor = _tmp4_;
#line 155 "../src/contacts-contact-pane.vala"
	_tmp5_ = self->priv->editor;
#line 155 "../src/contacts-contact-pane.vala"
	_tmp6_ = _tmp5_->linked_button;
#line 155 "../src/contacts-contact-pane.vala"
	g_signal_connect_object (_tmp6_, "clicked", (GCallback) _contacts_contact_pane_linked_accounts_gtk_button_clicked, self, 0);
#line 156 "../src/contacts-contact-pane.vala"
	_tmp7_ = self->priv->editor;
#line 156 "../src/contacts-contact-pane.vala"
	_tmp8_ = _tmp7_->remove_button;
#line 156 "../src/contacts-contact-pane.vala"
	g_signal_connect_object (_tmp8_, "clicked", (GCallback) _contacts_contact_pane_delete_contact_gtk_button_clicked, self, 0);
#line 159 "../src/contacts-contact-pane.vala"
	_tmp9_ = self->priv->edit_contact_actions;
#line 159 "../src/contacts-contact-pane.vala"
	_tmp10_ = g_action_map_lookup_action ((GActionMap*) _tmp9_, "add.birthday");
#line 159 "../src/contacts-contact-pane.vala"
	_tmp11_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp10_, g_simple_action_get_type ()) ? ((GSimpleAction*) _tmp10_) : NULL);
#line 159 "../src/contacts-contact-pane.vala"
	birthday_action = _tmp11_;
#line 160 "../src/contacts-contact-pane.vala"
	_tmp12_ = self->priv->editor;
#line 160 "../src/contacts-contact-pane.vala"
	g_object_bind_property_with_closures ((GObject*) _tmp12_, "has-birthday-row", (GObject*) birthday_action, "enabled", G_BINDING_SYNC_CREATE | G_BINDING_INVERT_BOOLEAN, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 163 "../src/contacts-contact-pane.vala"
	_tmp13_ = self->priv->edit_contact_actions;
#line 163 "../src/contacts-contact-pane.vala"
	_tmp14_ = g_action_map_lookup_action ((GActionMap*) _tmp13_, "add.nickname");
#line 163 "../src/contacts-contact-pane.vala"
	_tmp15_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp14_, g_simple_action_get_type ()) ? ((GSimpleAction*) _tmp14_) : NULL);
#line 163 "../src/contacts-contact-pane.vala"
	nickname_action = _tmp15_;
#line 164 "../src/contacts-contact-pane.vala"
	_tmp16_ = self->priv->editor;
#line 164 "../src/contacts-contact-pane.vala"
	g_object_bind_property_with_closures ((GObject*) _tmp16_, "has-nickname-row", (GObject*) nickname_action, "enabled", G_BINDING_SYNC_CREATE | G_BINDING_INVERT_BOOLEAN, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 167 "../src/contacts-contact-pane.vala"
	_tmp17_ = self->priv->edit_contact_actions;
#line 167 "../src/contacts-contact-pane.vala"
	_tmp18_ = g_action_map_lookup_action ((GActionMap*) _tmp17_, "add.notes");
#line 167 "../src/contacts-contact-pane.vala"
	_tmp19_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp18_, g_simple_action_get_type ()) ? ((GSimpleAction*) _tmp18_) : NULL);
#line 167 "../src/contacts-contact-pane.vala"
	notes_action = _tmp19_;
#line 168 "../src/contacts-contact-pane.vala"
	_tmp20_ = self->priv->editor;
#line 168 "../src/contacts-contact-pane.vala"
	g_object_bind_property_with_closures ((GObject*) _tmp20_, "has-notes-row", (GObject*) notes_action, "enabled", G_BINDING_SYNC_CREATE | G_BINDING_INVERT_BOOLEAN, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 171 "../src/contacts-contact-pane.vala"
	_tmp21_ = self->priv->contact_editor_page;
#line 171 "../src/contacts-contact-pane.vala"
	_tmp22_ = self->priv->editor;
#line 171 "../src/contacts-contact-pane.vala"
	gtk_container_add ((GtkContainer*) _tmp21_, (GtkWidget*) _tmp22_);
#line 149 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (notes_action);
#line 149 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (nickname_action);
#line 149 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (birthday_action);
#line 1234 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_remove_contact_editor (ContactsContactPane* self)
{
	ContactsContactEditor* _tmp0_;
	GtkBox* _tmp1_;
	ContactsContactEditor* _tmp2_;
#line 174 "../src/contacts-contact-pane.vala"
	g_return_if_fail (self != NULL);
#line 175 "../src/contacts-contact-pane.vala"
	_tmp0_ = self->priv->editor;
#line 175 "../src/contacts-contact-pane.vala"
	if (_tmp0_ == NULL) {
#line 176 "../src/contacts-contact-pane.vala"
		return;
#line 1251 "contacts-contact-pane.c"
	}
#line 178 "../src/contacts-contact-pane.vala"
	_tmp1_ = self->priv->contact_editor_page;
#line 178 "../src/contacts-contact-pane.vala"
	_tmp2_ = self->priv->editor;
#line 178 "../src/contacts-contact-pane.vala"
	gtk_container_remove ((GtkContainer*) _tmp1_, (GtkWidget*) _tmp2_);
#line 179 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->editor);
#line 179 "../src/contacts-contact-pane.vala"
	self->priv->editor = NULL;
#line 1263 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_on_add_detail (ContactsContactPane* self,
                                     GSimpleAction* action,
                                     GVariant* parameter)
{
	gchar** tok = NULL;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gchar** _tmp2_;
	gchar** _tmp3_;
	gint tok_length1;
	gint _tok_size_;
	gchar** _tmp4_;
	gint _tmp4__length1;
	const gchar* _tmp5_;
#line 182 "../src/contacts-contact-pane.vala"
	g_return_if_fail (self != NULL);
#line 182 "../src/contacts-contact-pane.vala"
	g_return_if_fail (action != NULL);
#line 183 "../src/contacts-contact-pane.vala"
	_tmp0_ = g_action_get_name ((GAction*) action);
#line 183 "../src/contacts-contact-pane.vala"
	_tmp1_ = _tmp0_;
#line 183 "../src/contacts-contact-pane.vala"
	_tmp3_ = _tmp2_ = g_strsplit (_tmp1_, ".", 0);
#line 183 "../src/contacts-contact-pane.vala"
	tok = _tmp3_;
#line 183 "../src/contacts-contact-pane.vala"
	tok_length1 = _vala_array_length (_tmp2_);
#line 183 "../src/contacts-contact-pane.vala"
	_tok_size_ = tok_length1;
#line 185 "../src/contacts-contact-pane.vala"
	_tmp4_ = tok;
#line 185 "../src/contacts-contact-pane.vala"
	_tmp4__length1 = tok_length1;
#line 185 "../src/contacts-contact-pane.vala"
	_tmp5_ = _tmp4_[0];
#line 185 "../src/contacts-contact-pane.vala"
	if (g_strcmp0 (_tmp5_, "add") == 0) {
#line 1305 "contacts-contact-pane.c"
		gchar* _tmp6_ = NULL;
		gchar** _tmp7_;
		gint _tmp7__length1;
		ContactsContactEditor* _tmp11_;
		FolksIndividual* _tmp12_;
		FolksPersona* _tmp13_;
		FolksPersona* _tmp14_;
		gchar** _tmp15_;
		gint _tmp15__length1;
		const gchar* _tmp16_;
#line 188 "../src/contacts-contact-pane.vala"
		_tmp7_ = tok;
#line 188 "../src/contacts-contact-pane.vala"
		_tmp7__length1 = tok_length1;
#line 188 "../src/contacts-contact-pane.vala"
		if (_tmp7__length1 > 2) {
#line 1322 "contacts-contact-pane.c"
			gchar** _tmp8_;
			gint _tmp8__length1;
			const gchar* _tmp9_;
			gchar* _tmp10_;
#line 188 "../src/contacts-contact-pane.vala"
			_tmp8_ = tok;
#line 188 "../src/contacts-contact-pane.vala"
			_tmp8__length1 = tok_length1;
#line 188 "../src/contacts-contact-pane.vala"
			_tmp9_ = _tmp8_[2];
#line 188 "../src/contacts-contact-pane.vala"
			_tmp10_ = g_utf8_strup (_tmp9_, (gssize) -1);
#line 188 "../src/contacts-contact-pane.vala"
			_g_free0 (_tmp6_);
#line 188 "../src/contacts-contact-pane.vala"
			_tmp6_ = _tmp10_;
#line 1339 "contacts-contact-pane.c"
		} else {
#line 188 "../src/contacts-contact-pane.vala"
			_g_free0 (_tmp6_);
#line 188 "../src/contacts-contact-pane.vala"
			_tmp6_ = NULL;
#line 1345 "contacts-contact-pane.c"
		}
#line 186 "../src/contacts-contact-pane.vala"
		_tmp11_ = self->priv->editor;
#line 186 "../src/contacts-contact-pane.vala"
		_tmp12_ = self->individual;
#line 186 "../src/contacts-contact-pane.vala"
		_tmp13_ = contacts_utils_find_primary_persona (_tmp12_);
#line 186 "../src/contacts-contact-pane.vala"
		_tmp14_ = _tmp13_;
#line 186 "../src/contacts-contact-pane.vala"
		_tmp15_ = tok;
#line 186 "../src/contacts-contact-pane.vala"
		_tmp15__length1 = tok_length1;
#line 186 "../src/contacts-contact-pane.vala"
		_tmp16_ = _tmp15_[1];
#line 186 "../src/contacts-contact-pane.vala"
		contacts_contact_editor_add_new_row_for_property (_tmp11_, _tmp14_, _tmp16_, _tmp6_);
#line 186 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_tmp14_);
#line 185 "../src/contacts-contact-pane.vala"
		_g_free0 (_tmp6_);
#line 1367 "contacts-contact-pane.c"
	}
#line 182 "../src/contacts-contact-pane.vala"
	tok = (_vala_array_free (tok, tok_length1, (GDestroyNotify) g_free), NULL);
#line 1371 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_linked_accounts (ContactsContactPane* self)
{
	ContactsLinkedPersonasDialog* dialog = NULL;
	ContactsWindow* _tmp0_;
	ContactsStore* _tmp1_;
	FolksIndividual* _tmp2_;
	ContactsLinkedPersonasDialog* _tmp3_;
	gboolean _tmp4_ = FALSE;
	ContactsLinkedPersonasDialog* _tmp5_;
	ContactsLinkedPersonasDialog* _tmp7_;
#line 192 "../src/contacts-contact-pane.vala"
	g_return_if_fail (self != NULL);
#line 193 "../src/contacts-contact-pane.vala"
	_tmp0_ = self->priv->parent_window;
#line 193 "../src/contacts-contact-pane.vala"
	_tmp1_ = self->priv->store;
#line 193 "../src/contacts-contact-pane.vala"
	_tmp2_ = self->individual;
#line 193 "../src/contacts-contact-pane.vala"
	_tmp3_ = contacts_linked_personas_dialog_new (_tmp0_, _tmp1_, _tmp2_);
#line 193 "../src/contacts-contact-pane.vala"
	g_object_ref_sink (_tmp3_);
#line 193 "../src/contacts-contact-pane.vala"
	dialog = _tmp3_;
#line 194 "../src/contacts-contact-pane.vala"
	_tmp5_ = dialog;
#line 194 "../src/contacts-contact-pane.vala"
	if (gtk_dialog_run ((GtkDialog*) _tmp5_) == ((gint) GTK_RESPONSE_CLOSE)) {
#line 1403 "contacts-contact-pane.c"
		ContactsLinkedPersonasDialog* _tmp6_;
#line 194 "../src/contacts-contact-pane.vala"
		_tmp6_ = dialog;
#line 194 "../src/contacts-contact-pane.vala"
		_tmp4_ = _tmp6_->any_unlinked;
#line 1409 "contacts-contact-pane.c"
	} else {
#line 194 "../src/contacts-contact-pane.vala"
		_tmp4_ = FALSE;
#line 1413 "contacts-contact-pane.c"
	}
#line 194 "../src/contacts-contact-pane.vala"
	if (_tmp4_) {
#line 196 "../src/contacts-contact-pane.vala"
		contacts_contact_pane_stop_editing (self, FALSE);
#line 197 "../src/contacts-contact-pane.vala"
		contacts_contact_pane_start_editing (self);
#line 1421 "contacts-contact-pane.c"
	}
#line 199 "../src/contacts-contact-pane.vala"
	_tmp7_ = dialog;
#line 199 "../src/contacts-contact-pane.vala"
	gtk_widget_destroy ((GtkWidget*) _tmp7_);
#line 192 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (dialog);
#line 1429 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_delete_contact (ContactsContactPane* self)
{
	FolksIndividual* _tmp0_;
#line 202 "../src/contacts-contact-pane.vala"
	g_return_if_fail (self != NULL);
#line 203 "../src/contacts-contact-pane.vala"
	_tmp0_ = self->individual;
#line 203 "../src/contacts-contact-pane.vala"
	if (_tmp0_ != NULL) {
#line 1442 "contacts-contact-pane.c"
		FolksIndividual* _tmp1_;
#line 204 "../src/contacts-contact-pane.vala"
		_tmp1_ = self->individual;
#line 204 "../src/contacts-contact-pane.vala"
		g_signal_emit (self, contacts_contact_pane_signals[CONTACTS_CONTACT_PANE_WILL_DELETE_SIGNAL], 0, _tmp1_);
#line 1448 "contacts-contact-pane.c"
	}
}

void
contacts_contact_pane_start_editing (ContactsContactPane* self)
{
	gboolean _tmp0_ = FALSE;
	GtkBox* _tmp2_;
#line 208 "../src/contacts-contact-pane.vala"
	g_return_if_fail (self != NULL);
#line 209 "../src/contacts-contact-pane.vala"
	if (self->on_edit_mode) {
#line 209 "../src/contacts-contact-pane.vala"
		_tmp0_ = TRUE;
#line 1463 "contacts-contact-pane.c"
	} else {
		FolksIndividual* _tmp1_;
#line 209 "../src/contacts-contact-pane.vala"
		_tmp1_ = self->individual;
#line 209 "../src/contacts-contact-pane.vala"
		_tmp0_ = _tmp1_ == NULL;
#line 1470 "contacts-contact-pane.c"
	}
#line 209 "../src/contacts-contact-pane.vala"
	if (_tmp0_) {
#line 210 "../src/contacts-contact-pane.vala"
		return;
#line 1476 "contacts-contact-pane.c"
	}
#line 212 "../src/contacts-contact-pane.vala"
	self->on_edit_mode = TRUE;
#line 214 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_remove_contact_sheet (self);
#line 215 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_create_contact_editor (self);
#line 216 "../src/contacts-contact-pane.vala"
	_tmp2_ = self->priv->contact_editor_page;
#line 216 "../src/contacts-contact-pane.vala"
	gtk_stack_set_visible_child ((GtkStack*) self, (GtkWidget*) _tmp2_);
#line 1488 "contacts-contact-pane.c"
}

void
contacts_contact_pane_stop_editing (ContactsContactPane* self,
                                    gboolean drop_changes)
{
	FolksIndividual* _tmp0_;
#line 219 "../src/contacts-contact-pane.vala"
	g_return_if_fail (self != NULL);
#line 220 "../src/contacts-contact-pane.vala"
	if (!self->on_edit_mode) {
#line 221 "../src/contacts-contact-pane.vala"
		return;
#line 1502 "contacts-contact-pane.c"
	}
#line 223 "../src/contacts-contact-pane.vala"
	self->on_edit_mode = FALSE;
#line 225 "../src/contacts-contact-pane.vala"
	if (!drop_changes) {
#line 226 "../src/contacts-contact-pane.vala"
		contacts_contact_pane_save_editor_changes (self, NULL, NULL);
#line 1510 "contacts-contact-pane.c"
	}
#line 228 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_remove_contact_editor (self);
#line 230 "../src/contacts-contact-pane.vala"
	_tmp0_ = self->individual;
#line 230 "../src/contacts-contact-pane.vala"
	if (_tmp0_ != NULL) {
#line 231 "../src/contacts-contact-pane.vala"
		contacts_contact_pane_show_contact_sheet (self);
#line 1520 "contacts-contact-pane.c"
	} else {
		GtkGrid* _tmp1_;
#line 233 "../src/contacts-contact-pane.vala"
		_tmp1_ = self->priv->none_selected_page;
#line 233 "../src/contacts-contact-pane.vala"
		gtk_stack_set_visible_child ((GtkStack*) self, (GtkWidget*) _tmp1_);
#line 1527 "contacts-contact-pane.c"
	}
}

static void
contacts_contact_pane_save_editor_changes_data_free (gpointer _data)
{
	ContactsContactPaneSaveEditorChangesData* _data_;
	_data_ = _data;
#line 30 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (_data_->self);
#line 30 "../src/contacts-contact-pane.vala"
	g_slice_free (ContactsContactPaneSaveEditorChangesData, _data_);
#line 1540 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_save_editor_changes (ContactsContactPane* self,
                                           GAsyncReadyCallback _callback_,
                                           gpointer _user_data_)
{
	ContactsContactPaneSaveEditorChangesData* _data_;
	ContactsContactPane* _tmp0_;
#line 30 "../src/contacts-contact-pane.vala"
	_data_ = g_slice_new0 (ContactsContactPaneSaveEditorChangesData);
#line 30 "../src/contacts-contact-pane.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 30 "../src/contacts-contact-pane.vala"
	g_task_set_task_data (_data_->_async_result, _data_, contacts_contact_pane_save_editor_changes_data_free);
#line 30 "../src/contacts-contact-pane.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 30 "../src/contacts-contact-pane.vala"
	_data_->self = _tmp0_;
#line 30 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_save_editor_changes_co (_data_);
#line 1562 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_save_editor_changes_finish (ContactsContactPane* self,
                                                  GAsyncResult* _res_)
{
	ContactsContactPaneSaveEditorChangesData* _data_;
#line 30 "../src/contacts-contact-pane.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 1572 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_save_editor_changes_ready (GObject* source_object,
                                                 GAsyncResult* _res_,
                                                 gpointer _user_data_)
{
	ContactsContactPaneSaveEditorChangesData* _data_;
#line 239 "../src/contacts-contact-pane.vala"
	_data_ = _user_data_;
#line 239 "../src/contacts-contact-pane.vala"
	_data_->_source_object_ = source_object;
#line 239 "../src/contacts-contact-pane.vala"
	_data_->_res_ = _res_;
#line 239 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_save_editor_changes_co (_data_);
#line 1589 "contacts-contact-pane.c"
}

static gboolean
contacts_contact_pane_save_editor_changes_co (ContactsContactPaneSaveEditorChangesData* _data_)
{
#line 236 "../src/contacts-contact-pane.vala"
	switch (_data_->_state_) {
#line 236 "../src/contacts-contact-pane.vala"
		case 0:
#line 1599 "contacts-contact-pane.c"
		goto _state_0;
#line 236 "../src/contacts-contact-pane.vala"
		case 1:
#line 1603 "contacts-contact-pane.c"
		goto _state_1;
#line 236 "../src/contacts-contact-pane.vala"
		case 2:
#line 1607 "contacts-contact-pane.c"
		goto _state_2;
#line 236 "../src/contacts-contact-pane.vala"
		case 3:
#line 1611 "contacts-contact-pane.c"
		goto _state_3;
		default:
#line 236 "../src/contacts-contact-pane.vala"
		g_assert_not_reached ();
#line 1616 "contacts-contact-pane.c"
	}
	_state_0:
	{
#line 237 "../src/contacts-contact-pane.vala"
		_data_->_tmp0_ = _data_->self->priv->editor;
#line 237 "../src/contacts-contact-pane.vala"
		_data_->_tmp1_ = contacts_contact_editor_properties_changed (_data_->_tmp0_);
#line 237 "../src/contacts-contact-pane.vala"
		_data_->_tmp2_ = _data_->_tmp1_;
#line 237 "../src/contacts-contact-pane.vala"
		_data_->_tmp3_ = gee_abstract_map_get_entries ((GeeAbstractMap*) _data_->_tmp2_);
#line 237 "../src/contacts-contact-pane.vala"
		_data_->_tmp4_ = _data_->_tmp3_;
#line 237 "../src/contacts-contact-pane.vala"
		_data_->_tmp5_ = _data_->_tmp4_;
#line 237 "../src/contacts-contact-pane.vala"
		_data_->_tmp6_ = gee_iterable_iterator ((GeeIterable*) _data_->_tmp5_);
#line 237 "../src/contacts-contact-pane.vala"
		_data_->_tmp7_ = _data_->_tmp6_;
#line 237 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->_tmp5_);
#line 237 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->_tmp2_);
#line 237 "../src/contacts-contact-pane.vala"
		_data_->_prop_it = _data_->_tmp7_;
#line 237 "../src/contacts-contact-pane.vala"
		while (TRUE) {
#line 237 "../src/contacts-contact-pane.vala"
			_data_->_tmp8_ = _data_->_prop_it;
#line 237 "../src/contacts-contact-pane.vala"
			if (!gee_iterator_next (_data_->_tmp8_)) {
#line 237 "../src/contacts-contact-pane.vala"
				break;
#line 1650 "contacts-contact-pane.c"
			}
#line 237 "../src/contacts-contact-pane.vala"
			_data_->_tmp9_ = _data_->_prop_it;
#line 237 "../src/contacts-contact-pane.vala"
			_data_->_tmp10_ = gee_iterator_get (_data_->_tmp9_);
#line 237 "../src/contacts-contact-pane.vala"
			_data_->prop = (GeeMapEntry*) _data_->_tmp10_;
#line 1658 "contacts-contact-pane.c"
			{
#line 239 "../src/contacts-contact-pane.vala"
				_data_->_tmp11_ = _data_->prop;
#line 239 "../src/contacts-contact-pane.vala"
				_data_->_tmp12_ = gee_map_entry_get_value (_data_->_tmp11_);
#line 239 "../src/contacts-contact-pane.vala"
				_data_->_tmp13_ = _data_->_tmp12_;
#line 239 "../src/contacts-contact-pane.vala"
				_data_->_tmp14_ = (*((ContactsContactEditorPropertyData*) _data_->_tmp13_)).persona;
#line 239 "../src/contacts-contact-pane.vala"
				_data_->_tmp15_ = _data_->prop;
#line 239 "../src/contacts-contact-pane.vala"
				_data_->_tmp16_ = gee_map_entry_get_key (_data_->_tmp15_);
#line 239 "../src/contacts-contact-pane.vala"
				_data_->_tmp17_ = _data_->_tmp16_;
#line 239 "../src/contacts-contact-pane.vala"
				_data_->_tmp18_ = _data_->prop;
#line 239 "../src/contacts-contact-pane.vala"
				_data_->_tmp19_ = gee_map_entry_get_value (_data_->_tmp18_);
#line 239 "../src/contacts-contact-pane.vala"
				_data_->_tmp20_ = _data_->_tmp19_;
#line 239 "../src/contacts-contact-pane.vala"
				_data_->_tmp21_ = (*((ContactsContactEditorPropertyData*) _data_->_tmp20_)).value;
#line 239 "../src/contacts-contact-pane.vala"
				_data_->_state_ = 1;
#line 239 "../src/contacts-contact-pane.vala"
				contacts_utils_set_persona_property (_data_->_tmp14_, (const gchar*) _data_->_tmp17_, &_data_->_tmp21_, contacts_contact_pane_save_editor_changes_ready, _data_);
#line 239 "../src/contacts-contact-pane.vala"
				return FALSE;
#line 1688 "contacts-contact-pane.c"
				_state_1:
#line 239 "../src/contacts-contact-pane.vala"
				contacts_utils_set_persona_property_finish (_data_->_res_, &_data_->_inner_error0_);
#line 239 "../src/contacts-contact-pane.vala"
				if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 1694 "contacts-contact-pane.c"
					goto __catch10_g_error;
				}
			}
			goto __finally10;
			__catch10_g_error:
			{
#line 238 "../src/contacts-contact-pane.vala"
				_data_->e = _data_->_inner_error0_;
#line 238 "../src/contacts-contact-pane.vala"
				_data_->_inner_error0_ = NULL;
#line 241 "../src/contacts-contact-pane.vala"
				_data_->_tmp22_ = _data_->e;
#line 241 "../src/contacts-contact-pane.vala"
				_data_->_tmp23_ = _data_->_tmp22_->message;
#line 241 "../src/contacts-contact-pane.vala"
				contacts_contact_pane_show_message (_data_->self, _data_->_tmp23_);
#line 238 "../src/contacts-contact-pane.vala"
				_g_error_free0 (_data_->e);
#line 1713 "contacts-contact-pane.c"
			}
			__finally10:
#line 238 "../src/contacts-contact-pane.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 238 "../src/contacts-contact-pane.vala"
				_g_object_unref0 (_data_->prop);
#line 238 "../src/contacts-contact-pane.vala"
				_g_object_unref0 (_data_->_prop_it);
#line 238 "../src/contacts-contact-pane.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 238 "../src/contacts-contact-pane.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 238 "../src/contacts-contact-pane.vala"
				g_object_unref (_data_->_async_result);
#line 238 "../src/contacts-contact-pane.vala"
				return FALSE;
#line 1730 "contacts-contact-pane.c"
			}
#line 237 "../src/contacts-contact-pane.vala"
			_g_object_unref0 (_data_->prop);
#line 1734 "contacts-contact-pane.c"
		}
#line 237 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->_prop_it);
#line 1738 "contacts-contact-pane.c"
	}
#line 245 "../src/contacts-contact-pane.vala"
	_data_->_tmp24_ = _data_->self->priv->editor;
#line 245 "../src/contacts-contact-pane.vala"
	if (contacts_contact_editor_name_changed (_data_->_tmp24_)) {
#line 246 "../src/contacts-contact-pane.vala"
		_data_->_tmp25_ = _data_->self->priv->editor;
#line 246 "../src/contacts-contact-pane.vala"
		memset (&_data_->_tmp26_, 0, sizeof (GValue));
#line 246 "../src/contacts-contact-pane.vala"
		contacts_contact_editor_get_full_name_value (_data_->_tmp25_, &_data_->_tmp26_);
#line 246 "../src/contacts-contact-pane.vala"
		_data_->v = _data_->_tmp26_;
#line 1752 "contacts-contact-pane.c"
		{
#line 248 "../src/contacts-contact-pane.vala"
			_data_->_tmp27_ = _data_->self->individual;
#line 248 "../src/contacts-contact-pane.vala"
			_data_->_tmp28_ = _data_->v;
#line 248 "../src/contacts-contact-pane.vala"
			_data_->_state_ = 2;
#line 248 "../src/contacts-contact-pane.vala"
			contacts_utils_set_individual_property (_data_->_tmp27_, "full-name", &_data_->_tmp28_, contacts_contact_pane_save_editor_changes_ready, _data_);
#line 248 "../src/contacts-contact-pane.vala"
			return FALSE;
#line 1764 "contacts-contact-pane.c"
			_state_2:
#line 248 "../src/contacts-contact-pane.vala"
			contacts_utils_set_individual_property_finish (_data_->_res_, &_data_->_inner_error0_);
#line 248 "../src/contacts-contact-pane.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 1770 "contacts-contact-pane.c"
				goto __catch11_g_error;
			}
#line 249 "../src/contacts-contact-pane.vala"
			_data_->_tmp29_ = g_value_get_string (&_data_->v);
#line 249 "../src/contacts-contact-pane.vala"
			g_signal_emit (_data_->self, contacts_contact_pane_signals[CONTACTS_CONTACT_PANE_DISPLAY_NAME_CHANGED_SIGNAL], 0, _data_->_tmp29_);
#line 1777 "contacts-contact-pane.c"
		}
		goto __finally11;
		__catch11_g_error:
		{
#line 247 "../src/contacts-contact-pane.vala"
			_data_->_vala1_e = _data_->_inner_error0_;
#line 247 "../src/contacts-contact-pane.vala"
			_data_->_inner_error0_ = NULL;
#line 251 "../src/contacts-contact-pane.vala"
			_data_->_tmp30_ = _data_->_vala1_e;
#line 251 "../src/contacts-contact-pane.vala"
			_data_->_tmp31_ = _data_->_tmp30_->message;
#line 251 "../src/contacts-contact-pane.vala"
			contacts_contact_pane_show_message (_data_->self, _data_->_tmp31_);
#line 247 "../src/contacts-contact-pane.vala"
			_g_error_free0 (_data_->_vala1_e);
#line 1794 "contacts-contact-pane.c"
		}
		__finally11:
#line 247 "../src/contacts-contact-pane.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 247 "../src/contacts-contact-pane.vala"
			G_IS_VALUE (&_data_->v) ? (g_value_unset (&_data_->v), NULL) : NULL;
#line 247 "../src/contacts-contact-pane.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 247 "../src/contacts-contact-pane.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 247 "../src/contacts-contact-pane.vala"
			g_object_unref (_data_->_async_result);
#line 247 "../src/contacts-contact-pane.vala"
			return FALSE;
#line 1809 "contacts-contact-pane.c"
		}
#line 245 "../src/contacts-contact-pane.vala"
		G_IS_VALUE (&_data_->v) ? (g_value_unset (&_data_->v), NULL) : NULL;
#line 1813 "contacts-contact-pane.c"
	}
#line 255 "../src/contacts-contact-pane.vala"
	_data_->_tmp32_ = _data_->self->priv->editor;
#line 255 "../src/contacts-contact-pane.vala"
	if (contacts_contact_editor_avatar_changed (_data_->_tmp32_)) {
#line 256 "../src/contacts-contact-pane.vala"
		_data_->_tmp33_ = _data_->self->priv->editor;
#line 256 "../src/contacts-contact-pane.vala"
		memset (&_data_->_tmp34_, 0, sizeof (GValue));
#line 256 "../src/contacts-contact-pane.vala"
		contacts_contact_editor_get_avatar_value (_data_->_tmp33_, &_data_->_tmp34_);
#line 256 "../src/contacts-contact-pane.vala"
		_data_->_vala1_v = _data_->_tmp34_;
#line 1827 "contacts-contact-pane.c"
		{
#line 258 "../src/contacts-contact-pane.vala"
			_data_->_tmp35_ = _data_->self->individual;
#line 258 "../src/contacts-contact-pane.vala"
			_data_->_tmp36_ = _data_->_vala1_v;
#line 258 "../src/contacts-contact-pane.vala"
			_data_->_state_ = 3;
#line 258 "../src/contacts-contact-pane.vala"
			contacts_utils_set_individual_property (_data_->_tmp35_, "avatar", &_data_->_tmp36_, contacts_contact_pane_save_editor_changes_ready, _data_);
#line 258 "../src/contacts-contact-pane.vala"
			return FALSE;
#line 1839 "contacts-contact-pane.c"
			_state_3:
#line 258 "../src/contacts-contact-pane.vala"
			contacts_utils_set_individual_property_finish (_data_->_res_, &_data_->_inner_error0_);
#line 258 "../src/contacts-contact-pane.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 1845 "contacts-contact-pane.c"
				goto __catch12_g_error;
			}
		}
		goto __finally12;
		__catch12_g_error:
		{
#line 257 "../src/contacts-contact-pane.vala"
			_data_->_vala2_e = _data_->_inner_error0_;
#line 257 "../src/contacts-contact-pane.vala"
			_data_->_inner_error0_ = NULL;
#line 260 "../src/contacts-contact-pane.vala"
			_data_->_tmp37_ = _data_->_vala2_e;
#line 260 "../src/contacts-contact-pane.vala"
			_data_->_tmp38_ = _data_->_tmp37_->message;
#line 260 "../src/contacts-contact-pane.vala"
			contacts_contact_pane_show_message (_data_->self, _data_->_tmp38_);
#line 257 "../src/contacts-contact-pane.vala"
			_g_error_free0 (_data_->_vala2_e);
#line 1864 "contacts-contact-pane.c"
		}
		__finally12:
#line 257 "../src/contacts-contact-pane.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 257 "../src/contacts-contact-pane.vala"
			G_IS_VALUE (&_data_->_vala1_v) ? (g_value_unset (&_data_->_vala1_v), NULL) : NULL;
#line 257 "../src/contacts-contact-pane.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 257 "../src/contacts-contact-pane.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 257 "../src/contacts-contact-pane.vala"
			g_object_unref (_data_->_async_result);
#line 257 "../src/contacts-contact-pane.vala"
			return FALSE;
#line 1879 "contacts-contact-pane.c"
		}
#line 255 "../src/contacts-contact-pane.vala"
		G_IS_VALUE (&_data_->_vala1_v) ? (g_value_unset (&_data_->_vala1_v), NULL) : NULL;
#line 1883 "contacts-contact-pane.c"
	}
#line 236 "../src/contacts-contact-pane.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 236 "../src/contacts-contact-pane.vala"
	if (_data_->_state_ != 0) {
#line 236 "../src/contacts-contact-pane.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 236 "../src/contacts-contact-pane.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1893 "contacts-contact-pane.c"
		}
	}
#line 236 "../src/contacts-contact-pane.vala"
	g_object_unref (_data_->_async_result);
#line 236 "../src/contacts-contact-pane.vala"
	return FALSE;
#line 1900 "contacts-contact-pane.c"
}

void
contacts_contact_pane_new_contact (ContactsContactPane* self)
{
	GtkBox* _tmp0_;
#line 265 "../src/contacts-contact-pane.vala"
	g_return_if_fail (self != NULL);
#line 266 "../src/contacts-contact-pane.vala"
	self->on_edit_mode = TRUE;
#line 267 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->individual);
#line 267 "../src/contacts-contact-pane.vala"
	self->individual = NULL;
#line 268 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_remove_contact_sheet (self);
#line 269 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_create_contact_editor (self);
#line 270 "../src/contacts-contact-pane.vala"
	_tmp0_ = self->priv->contact_editor_page;
#line 270 "../src/contacts-contact-pane.vala"
	gtk_stack_set_visible_child ((GtkStack*) self, (GtkWidget*) _tmp0_);
#line 1923 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_create_contact_data_free (gpointer _data)
{
	ContactsContactPaneCreateContactData* _data_;
	_data_ = _data;
#line 30 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (_data_->self);
#line 30 "../src/contacts-contact-pane.vala"
	g_slice_free (ContactsContactPaneCreateContactData, _data_);
#line 1935 "contacts-contact-pane.c"
}

void
contacts_contact_pane_create_contact (ContactsContactPane* self,
                                      GAsyncReadyCallback _callback_,
                                      gpointer _user_data_)
{
	ContactsContactPaneCreateContactData* _data_;
	ContactsContactPane* _tmp0_;
#line 30 "../src/contacts-contact-pane.vala"
	_data_ = g_slice_new0 (ContactsContactPaneCreateContactData);
#line 30 "../src/contacts-contact-pane.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 30 "../src/contacts-contact-pane.vala"
	g_task_set_task_data (_data_->_async_result, _data_, contacts_contact_pane_create_contact_data_free);
#line 30 "../src/contacts-contact-pane.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 30 "../src/contacts-contact-pane.vala"
	_data_->self = _tmp0_;
#line 30 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_create_contact_co (_data_);
#line 1957 "contacts-contact-pane.c"
}

void
contacts_contact_pane_create_contact_finish (ContactsContactPane* self,
                                             GAsyncResult* _res_)
{
	ContactsContactPaneCreateContactData* _data_;
#line 30 "../src/contacts-contact-pane.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 1967 "contacts-contact-pane.c"
}

static void
_g_free0_ (gpointer var)
{
#line 275 "../src/contacts-contact-pane.vala"
	var = (g_free (var), NULL);
#line 1975 "contacts-contact-pane.c"
}

static void
_vala_GValue_free (GValue* self)
{
#line 275 "../src/contacts-contact-pane.vala"
	g_value_unset (self);
#line 275 "../src/contacts-contact-pane.vala"
	g_free (self);
#line 1985 "contacts-contact-pane.c"
}

static void
__vala_GValue_free0_ (gpointer var)
{
#line 275 "../src/contacts-contact-pane.vala"
	(var == NULL) ? NULL : (var = (_vala_GValue_free (var), NULL));
#line 1993 "contacts-contact-pane.c"
}

static GValue*
_g_value_dup (GValue* self)
{
#line 279 "../src/contacts-contact-pane.vala"
	return g_boxed_copy (G_TYPE_VALUE, self);
#line 2001 "contacts-contact-pane.c"
}

static gpointer
__g_value_dup0 (gpointer self)
{
#line 279 "../src/contacts-contact-pane.vala"
	return self ? _g_value_dup (self) : NULL;
#line 2009 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_create_contact_ready (GObject* source_object,
                                            GAsyncResult* _res_,
                                            gpointer _user_data_)
{
	ContactsContactPaneCreateContactData* _data_;
#line 311 "../src/contacts-contact-pane.vala"
	_data_ = _user_data_;
#line 311 "../src/contacts-contact-pane.vala"
	_data_->_source_object_ = source_object;
#line 311 "../src/contacts-contact-pane.vala"
	_data_->_res_ = _res_;
#line 311 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_create_contact_co (_data_);
#line 2026 "contacts-contact-pane.c"
}

static gboolean
contacts_contact_pane_create_contact_co (ContactsContactPaneCreateContactData* _data_)
{
#line 274 "../src/contacts-contact-pane.vala"
	switch (_data_->_state_) {
#line 274 "../src/contacts-contact-pane.vala"
		case 0:
#line 2036 "contacts-contact-pane.c"
		goto _state_0;
#line 274 "../src/contacts-contact-pane.vala"
		case 1:
#line 2040 "contacts-contact-pane.c"
		goto _state_1;
		default:
#line 274 "../src/contacts-contact-pane.vala"
		g_assert_not_reached ();
#line 2045 "contacts-contact-pane.c"
	}
	_state_0:
#line 275 "../src/contacts-contact-pane.vala"
	_data_->_tmp0_ = g_str_hash;
#line 275 "../src/contacts-contact-pane.vala"
	_data_->_tmp1_ = g_str_equal;
#line 275 "../src/contacts-contact-pane.vala"
	_data_->_tmp2_ = g_hash_table_new_full (_data_->_tmp0_, _data_->_tmp1_, _g_free0_, __vala_GValue_free0_);
#line 275 "../src/contacts-contact-pane.vala"
	_data_->details = _data_->_tmp2_;
#line 278 "../src/contacts-contact-pane.vala"
	_data_->_tmp3_ = _data_->self->priv->editor;
#line 278 "../src/contacts-contact-pane.vala"
	if (contacts_contact_editor_name_changed (_data_->_tmp3_)) {
#line 279 "../src/contacts-contact-pane.vala"
		_data_->_tmp4_ = _data_->details;
#line 279 "../src/contacts-contact-pane.vala"
		_data_->_tmp5_ = g_strdup ("full-name");
#line 279 "../src/contacts-contact-pane.vala"
		_data_->_tmp6_ = _data_->self->priv->editor;
#line 279 "../src/contacts-contact-pane.vala"
		memset (&_data_->_tmp7_, 0, sizeof (GValue));
#line 279 "../src/contacts-contact-pane.vala"
		contacts_contact_editor_get_full_name_value (_data_->_tmp6_, &_data_->_tmp7_);
#line 279 "../src/contacts-contact-pane.vala"
		_data_->_tmp8_ = _data_->_tmp7_;
#line 279 "../src/contacts-contact-pane.vala"
		_data_->_tmp9_ = __g_value_dup0 (&_data_->_tmp8_);
#line 279 "../src/contacts-contact-pane.vala"
		g_hash_table_insert (_data_->_tmp4_, _data_->_tmp5_, _data_->_tmp9_);
#line 279 "../src/contacts-contact-pane.vala"
		G_IS_VALUE (&_data_->_tmp8_) ? (g_value_unset (&_data_->_tmp8_), NULL) : NULL;
#line 2078 "contacts-contact-pane.c"
	}
#line 281 "../src/contacts-contact-pane.vala"
	_data_->_tmp10_ = _data_->self->priv->editor;
#line 281 "../src/contacts-contact-pane.vala"
	if (contacts_contact_editor_avatar_changed (_data_->_tmp10_)) {
#line 282 "../src/contacts-contact-pane.vala"
		_data_->_tmp11_ = _data_->details;
#line 282 "../src/contacts-contact-pane.vala"
		_data_->_tmp12_ = g_strdup ("avatar");
#line 282 "../src/contacts-contact-pane.vala"
		_data_->_tmp13_ = _data_->self->priv->editor;
#line 282 "../src/contacts-contact-pane.vala"
		memset (&_data_->_tmp14_, 0, sizeof (GValue));
#line 282 "../src/contacts-contact-pane.vala"
		contacts_contact_editor_get_avatar_value (_data_->_tmp13_, &_data_->_tmp14_);
#line 282 "../src/contacts-contact-pane.vala"
		_data_->_tmp15_ = _data_->_tmp14_;
#line 282 "../src/contacts-contact-pane.vala"
		_data_->_tmp16_ = __g_value_dup0 (&_data_->_tmp15_);
#line 282 "../src/contacts-contact-pane.vala"
		g_hash_table_insert (_data_->_tmp11_, _data_->_tmp12_, _data_->_tmp16_);
#line 282 "../src/contacts-contact-pane.vala"
		G_IS_VALUE (&_data_->_tmp15_) ? (g_value_unset (&_data_->_tmp15_), NULL) : NULL;
#line 2102 "contacts-contact-pane.c"
	}
	{
#line 284 "../src/contacts-contact-pane.vala"
		_data_->_tmp17_ = _data_->self->priv->editor;
#line 284 "../src/contacts-contact-pane.vala"
		_data_->_tmp18_ = contacts_contact_editor_properties_changed (_data_->_tmp17_);
#line 284 "../src/contacts-contact-pane.vala"
		_data_->_tmp19_ = _data_->_tmp18_;
#line 284 "../src/contacts-contact-pane.vala"
		_data_->_tmp20_ = gee_abstract_map_get_entries ((GeeAbstractMap*) _data_->_tmp19_);
#line 284 "../src/contacts-contact-pane.vala"
		_data_->_tmp21_ = _data_->_tmp20_;
#line 284 "../src/contacts-contact-pane.vala"
		_data_->_tmp22_ = _data_->_tmp21_;
#line 284 "../src/contacts-contact-pane.vala"
		_data_->_tmp23_ = gee_iterable_iterator ((GeeIterable*) _data_->_tmp22_);
#line 284 "../src/contacts-contact-pane.vala"
		_data_->_tmp24_ = _data_->_tmp23_;
#line 284 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->_tmp22_);
#line 284 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->_tmp19_);
#line 284 "../src/contacts-contact-pane.vala"
		_data_->_prop_it = _data_->_tmp24_;
#line 284 "../src/contacts-contact-pane.vala"
		while (TRUE) {
#line 284 "../src/contacts-contact-pane.vala"
			_data_->_tmp25_ = _data_->_prop_it;
#line 284 "../src/contacts-contact-pane.vala"
			if (!gee_iterator_next (_data_->_tmp25_)) {
#line 284 "../src/contacts-contact-pane.vala"
				break;
#line 2135 "contacts-contact-pane.c"
			}
#line 284 "../src/contacts-contact-pane.vala"
			_data_->_tmp26_ = _data_->_prop_it;
#line 284 "../src/contacts-contact-pane.vala"
			_data_->_tmp27_ = gee_iterator_get (_data_->_tmp26_);
#line 284 "../src/contacts-contact-pane.vala"
			_data_->prop = (GeeMapEntry*) _data_->_tmp27_;
#line 285 "../src/contacts-contact-pane.vala"
			_data_->_tmp28_ = _data_->details;
#line 285 "../src/contacts-contact-pane.vala"
			_data_->_tmp29_ = _data_->prop;
#line 285 "../src/contacts-contact-pane.vala"
			_data_->_tmp30_ = gee_map_entry_get_key (_data_->_tmp29_);
#line 285 "../src/contacts-contact-pane.vala"
			_data_->_tmp31_ = _data_->_tmp30_;
#line 285 "../src/contacts-contact-pane.vala"
			_data_->_tmp32_ = g_strdup ((const gchar*) _data_->_tmp31_);
#line 285 "../src/contacts-contact-pane.vala"
			_data_->_tmp33_ = _data_->prop;
#line 285 "../src/contacts-contact-pane.vala"
			_data_->_tmp34_ = gee_map_entry_get_value (_data_->_tmp33_);
#line 285 "../src/contacts-contact-pane.vala"
			_data_->_tmp35_ = _data_->_tmp34_;
#line 285 "../src/contacts-contact-pane.vala"
			_data_->_tmp36_ = (*((ContactsContactEditorPropertyData*) _data_->_tmp35_)).value;
#line 285 "../src/contacts-contact-pane.vala"
			_data_->_tmp37_ = _data_->_tmp36_;
#line 285 "../src/contacts-contact-pane.vala"
			_data_->_tmp38_ = __g_value_dup0 (&_data_->_tmp37_);
#line 285 "../src/contacts-contact-pane.vala"
			g_hash_table_insert (_data_->_tmp28_, _data_->_tmp32_, _data_->_tmp38_);
#line 284 "../src/contacts-contact-pane.vala"
			_g_object_unref0 (_data_->prop);
#line 2169 "contacts-contact-pane.c"
		}
#line 284 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->_prop_it);
#line 2173 "contacts-contact-pane.c"
	}
#line 288 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_stop_editing (_data_->self, TRUE);
#line 290 "../src/contacts-contact-pane.vala"
	_data_->_tmp39_ = _data_->details;
#line 290 "../src/contacts-contact-pane.vala"
	if (g_hash_table_size (_data_->_tmp39_) == ((guint) 0)) {
#line 291 "../src/contacts-contact-pane.vala"
		contacts_contact_pane_show_message_dialog (_data_->self, _ ("You need to enter some data"));
#line 292 "../src/contacts-contact-pane.vala"
		_g_hash_table_unref0 (_data_->details);
#line 292 "../src/contacts-contact-pane.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 292 "../src/contacts-contact-pane.vala"
		if (_data_->_state_ != 0) {
#line 292 "../src/contacts-contact-pane.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 292 "../src/contacts-contact-pane.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2193 "contacts-contact-pane.c"
			}
		}
#line 292 "../src/contacts-contact-pane.vala"
		g_object_unref (_data_->_async_result);
#line 292 "../src/contacts-contact-pane.vala"
		return FALSE;
#line 2200 "contacts-contact-pane.c"
	}
#line 295 "../src/contacts-contact-pane.vala"
	_data_->_tmp40_ = _data_->self->priv->store;
#line 295 "../src/contacts-contact-pane.vala"
	_data_->_tmp41_ = contacts_store_get_aggregator (_data_->_tmp40_);
#line 295 "../src/contacts-contact-pane.vala"
	_data_->_tmp42_ = _data_->_tmp41_;
#line 295 "../src/contacts-contact-pane.vala"
	_data_->_tmp43_ = folks_individual_aggregator_get_primary_store (_data_->_tmp42_);
#line 295 "../src/contacts-contact-pane.vala"
	_data_->_tmp44_ = _data_->_tmp43_;
#line 295 "../src/contacts-contact-pane.vala"
	if (_data_->_tmp44_ == NULL) {
#line 296 "../src/contacts-contact-pane.vala"
		contacts_contact_pane_show_message_dialog (_data_->self, _ ("No primary addressbook configured"));
#line 297 "../src/contacts-contact-pane.vala"
		_g_hash_table_unref0 (_data_->details);
#line 297 "../src/contacts-contact-pane.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 297 "../src/contacts-contact-pane.vala"
		if (_data_->_state_ != 0) {
#line 297 "../src/contacts-contact-pane.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 297 "../src/contacts-contact-pane.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2226 "contacts-contact-pane.c"
			}
		}
#line 297 "../src/contacts-contact-pane.vala"
		g_object_unref (_data_->_async_result);
#line 297 "../src/contacts-contact-pane.vala"
		return FALSE;
#line 2233 "contacts-contact-pane.c"
	}
#line 301 "../src/contacts-contact-pane.vala"
	_data_->_tmp45_ = contacts_fake_persona_store_the_store ();
#line 301 "../src/contacts-contact-pane.vala"
	_data_->_tmp46_ = _data_->_tmp45_;
#line 301 "../src/contacts-contact-pane.vala"
	_data_->_tmp47_ = _data_->details;
#line 301 "../src/contacts-contact-pane.vala"
	_data_->_tmp48_ = contacts_fake_persona_new ((FolksPersonaStore*) _data_->_tmp46_, _data_->_tmp47_);
#line 301 "../src/contacts-contact-pane.vala"
	_data_->_tmp49_ = _data_->_tmp48_;
#line 301 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (_data_->_tmp46_);
#line 301 "../src/contacts-contact-pane.vala"
	_data_->fake_persona = _data_->_tmp49_;
#line 302 "../src/contacts-contact-pane.vala"
	_data_->_tmp50_ = gee_hash_set_new (FOLKS_TYPE_PERSONA, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, NULL, NULL, NULL, NULL, NULL, NULL);
#line 302 "../src/contacts-contact-pane.vala"
	_data_->fake_personas = _data_->_tmp50_;
#line 303 "../src/contacts-contact-pane.vala"
	_data_->_tmp51_ = _data_->fake_personas;
#line 303 "../src/contacts-contact-pane.vala"
	_data_->_tmp52_ = _data_->fake_persona;
#line 303 "../src/contacts-contact-pane.vala"
	gee_abstract_collection_add ((GeeAbstractCollection*) _data_->_tmp51_, (FolksPersona*) _data_->_tmp52_);
#line 304 "../src/contacts-contact-pane.vala"
	_data_->_tmp53_ = _data_->fake_personas;
#line 304 "../src/contacts-contact-pane.vala"
	_data_->_tmp54_ = folks_individual_new ((GeeSet*) _data_->_tmp53_);
#line 304 "../src/contacts-contact-pane.vala"
	_data_->fake_individual = _data_->_tmp54_;
#line 305 "../src/contacts-contact-pane.vala"
	_data_->_tmp55_ = _data_->self->priv->parent_window;
#line 305 "../src/contacts-contact-pane.vala"
	_data_->_tmp56_ = _data_->fake_individual;
#line 305 "../src/contacts-contact-pane.vala"
	contacts_window_set_shown_contact (_data_->_tmp55_, _data_->_tmp56_);
#line 308 "../src/contacts-contact-pane.vala"
	_data_->_tmp57_ = _data_->self->priv->store;
#line 308 "../src/contacts-contact-pane.vala"
	_data_->_tmp58_ = contacts_store_get_aggregator (_data_->_tmp57_);
#line 308 "../src/contacts-contact-pane.vala"
	_data_->_tmp59_ = _data_->_tmp58_;
#line 308 "../src/contacts-contact-pane.vala"
	_data_->_tmp60_ = folks_individual_aggregator_get_primary_store (_data_->_tmp59_);
#line 308 "../src/contacts-contact-pane.vala"
	_data_->_tmp61_ = _data_->_tmp60_;
#line 308 "../src/contacts-contact-pane.vala"
	_data_->_tmp62_ = _g_object_ref0 (_data_->_tmp61_);
#line 308 "../src/contacts-contact-pane.vala"
	_data_->primary_store = _data_->_tmp62_;
#line 309 "../src/contacts-contact-pane.vala"
	_data_->persona = NULL;
#line 2287 "contacts-contact-pane.c"
	{
#line 311 "../src/contacts-contact-pane.vala"
		_data_->_tmp64_ = _data_->primary_store;
#line 311 "../src/contacts-contact-pane.vala"
		_data_->_tmp65_ = _data_->details;
#line 311 "../src/contacts-contact-pane.vala"
		_data_->_state_ = 1;
#line 311 "../src/contacts-contact-pane.vala"
		folks_persona_store_add_persona_from_details (_data_->_tmp64_, _data_->_tmp65_, contacts_contact_pane_create_contact_ready, _data_);
#line 311 "../src/contacts-contact-pane.vala"
		return FALSE;
#line 2299 "contacts-contact-pane.c"
		_state_1:
#line 311 "../src/contacts-contact-pane.vala"
		_data_->_tmp66_ = folks_persona_store_add_persona_from_details_finish (_data_->_tmp64_, _data_->_res_, &_data_->_inner_error0_);
#line 311 "../src/contacts-contact-pane.vala"
		_data_->_tmp63_ = _data_->_tmp66_;
#line 311 "../src/contacts-contact-pane.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 2307 "contacts-contact-pane.c"
			goto __catch13_g_error;
		}
#line 311 "../src/contacts-contact-pane.vala"
		_data_->_tmp67_ = _data_->_tmp63_;
#line 311 "../src/contacts-contact-pane.vala"
		_data_->_tmp63_ = NULL;
#line 311 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->persona);
#line 311 "../src/contacts-contact-pane.vala"
		_data_->persona = _data_->_tmp67_;
#line 310 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->_tmp63_);
#line 2320 "contacts-contact-pane.c"
	}
	goto __finally13;
	__catch13_g_error:
	{
#line 310 "../src/contacts-contact-pane.vala"
		_data_->e = _data_->_inner_error0_;
#line 310 "../src/contacts-contact-pane.vala"
		_data_->_inner_error0_ = NULL;
#line 313 "../src/contacts-contact-pane.vala"
		_data_->_tmp68_ = _data_->e;
#line 313 "../src/contacts-contact-pane.vala"
		_data_->_tmp69_ = _data_->_tmp68_->message;
#line 313 "../src/contacts-contact-pane.vala"
		_data_->_tmp70_ = g_strdup_printf (_ ("Unable to create new contacts: %s"), _data_->_tmp69_);
#line 313 "../src/contacts-contact-pane.vala"
		_data_->_tmp71_ = _data_->_tmp70_;
#line 313 "../src/contacts-contact-pane.vala"
		contacts_contact_pane_show_message_dialog (_data_->self, _data_->_tmp71_);
#line 313 "../src/contacts-contact-pane.vala"
		_g_free0 (_data_->_tmp71_);
#line 314 "../src/contacts-contact-pane.vala"
		_data_->_tmp72_ = _data_->self->priv->parent_window;
#line 314 "../src/contacts-contact-pane.vala"
		contacts_window_set_shown_contact (_data_->_tmp72_, NULL);
#line 315 "../src/contacts-contact-pane.vala"
		_g_error_free0 (_data_->e);
#line 315 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->persona);
#line 315 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->primary_store);
#line 315 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->fake_individual);
#line 315 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->fake_personas);
#line 315 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->fake_persona);
#line 315 "../src/contacts-contact-pane.vala"
		_g_hash_table_unref0 (_data_->details);
#line 315 "../src/contacts-contact-pane.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 315 "../src/contacts-contact-pane.vala"
		if (_data_->_state_ != 0) {
#line 315 "../src/contacts-contact-pane.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 315 "../src/contacts-contact-pane.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2367 "contacts-contact-pane.c"
			}
		}
#line 315 "../src/contacts-contact-pane.vala"
		g_object_unref (_data_->_async_result);
#line 315 "../src/contacts-contact-pane.vala"
		return FALSE;
#line 2374 "contacts-contact-pane.c"
	}
	__finally13:
#line 310 "../src/contacts-contact-pane.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 310 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->persona);
#line 310 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->primary_store);
#line 310 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->fake_individual);
#line 310 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->fake_personas);
#line 310 "../src/contacts-contact-pane.vala"
		_g_object_unref0 (_data_->fake_persona);
#line 310 "../src/contacts-contact-pane.vala"
		_g_hash_table_unref0 (_data_->details);
#line 310 "../src/contacts-contact-pane.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 310 "../src/contacts-contact-pane.vala"
		g_clear_error (&_data_->_inner_error0_);
#line 310 "../src/contacts-contact-pane.vala"
		g_object_unref (_data_->_async_result);
#line 310 "../src/contacts-contact-pane.vala"
		return FALSE;
#line 2399 "contacts-contact-pane.c"
	}
#line 319 "../src/contacts-contact-pane.vala"
	_data_->_tmp73_ = _data_->persona;
#line 319 "../src/contacts-contact-pane.vala"
	_data_->_tmp74_ = folks_persona_get_individual (_data_->_tmp73_);
#line 319 "../src/contacts-contact-pane.vala"
	_data_->_tmp75_ = _data_->_tmp74_;
#line 319 "../src/contacts-contact-pane.vala"
	_data_->_tmp76_ = _g_object_ref0 (_data_->_tmp75_);
#line 319 "../src/contacts-contact-pane.vala"
	_data_->individual = _data_->_tmp76_;
#line 320 "../src/contacts-contact-pane.vala"
	_data_->_tmp77_ = _data_->individual;
#line 320 "../src/contacts-contact-pane.vala"
	if (_data_->_tmp77_ != NULL) {
#line 322 "../src/contacts-contact-pane.vala"
		_data_->_tmp78_ = _data_->self->priv->parent_window;
#line 322 "../src/contacts-contact-pane.vala"
		_data_->_tmp79_ = _data_->individual;
#line 322 "../src/contacts-contact-pane.vala"
		contacts_window_set_shown_contact (_data_->_tmp78_, _data_->_tmp79_);
#line 2421 "contacts-contact-pane.c"
	} else {
#line 324 "../src/contacts-contact-pane.vala"
		contacts_contact_pane_show_message_dialog (_data_->self, _ ("Unable to find newly created contact"));
#line 325 "../src/contacts-contact-pane.vala"
		_data_->_tmp80_ = _data_->self->priv->parent_window;
#line 325 "../src/contacts-contact-pane.vala"
		contacts_window_set_shown_contact (_data_->_tmp80_, NULL);
#line 2429 "contacts-contact-pane.c"
	}
#line 274 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (_data_->individual);
#line 274 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (_data_->persona);
#line 274 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (_data_->primary_store);
#line 274 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (_data_->fake_individual);
#line 274 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (_data_->fake_personas);
#line 274 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (_data_->fake_persona);
#line 274 "../src/contacts-contact-pane.vala"
	_g_hash_table_unref0 (_data_->details);
#line 274 "../src/contacts-contact-pane.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 274 "../src/contacts-contact-pane.vala"
	if (_data_->_state_ != 0) {
#line 274 "../src/contacts-contact-pane.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 274 "../src/contacts-contact-pane.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2453 "contacts-contact-pane.c"
		}
	}
#line 274 "../src/contacts-contact-pane.vala"
	g_object_unref (_data_->_async_result);
#line 274 "../src/contacts-contact-pane.vala"
	return FALSE;
#line 2460 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_show_message_dialog (ContactsContactPane* self,
                                           const gchar* message)
{
	GtkMessageDialog* dialog = NULL;
	ContactsWindow* _tmp0_;
	GtkMessageDialog* _tmp1_;
#line 329 "../src/contacts-contact-pane.vala"
	g_return_if_fail (self != NULL);
#line 329 "../src/contacts-contact-pane.vala"
	g_return_if_fail (message != NULL);
#line 330 "../src/contacts-contact-pane.vala"
	_tmp0_ = self->priv->parent_window;
#line 330 "../src/contacts-contact-pane.vala"
	_tmp1_ = (GtkMessageDialog*) gtk_message_dialog_new ((GtkWindow*) _tmp0_, GTK_DIALOG_DESTROY_WITH_PARENT | GTK_DIALOG_MODAL, GTK_MESSAGE_ERROR, GTK_BUTTONS_OK, "%s", message);
#line 330 "../src/contacts-contact-pane.vala"
	g_object_ref_sink (_tmp1_);
#line 330 "../src/contacts-contact-pane.vala"
	dialog = _tmp1_;
#line 336 "../src/contacts-contact-pane.vala"
	gtk_dialog_run ((GtkDialog*) dialog);
#line 337 "../src/contacts-contact-pane.vala"
	gtk_widget_destroy ((GtkWidget*) dialog);
#line 329 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (dialog);
#line 2488 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_show_message (ContactsContactPane* self,
                                    const gchar* message)
{
	ContactsInAppNotification* notification = NULL;
	ContactsInAppNotification* _tmp0_;
	ContactsWindow* _tmp1_;
#line 340 "../src/contacts-contact-pane.vala"
	g_return_if_fail (self != NULL);
#line 340 "../src/contacts-contact-pane.vala"
	g_return_if_fail (message != NULL);
#line 341 "../src/contacts-contact-pane.vala"
	_tmp0_ = contacts_in_app_notification_new (message, NULL);
#line 341 "../src/contacts-contact-pane.vala"
	g_object_ref_sink (_tmp0_);
#line 341 "../src/contacts-contact-pane.vala"
	notification = _tmp0_;
#line 342 "../src/contacts-contact-pane.vala"
	contacts_in_app_notification_show (notification);
#line 343 "../src/contacts-contact-pane.vala"
	_tmp1_ = self->priv->parent_window;
#line 343 "../src/contacts-contact-pane.vala"
	contacts_window_add_notification (_tmp1_, notification);
#line 340 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (notification);
#line 2516 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_remove_suggestion_grid (ContactsContactPane* self)
{
	ContactsLinkSuggestionGrid* _tmp0_;
	ContactsLinkSuggestionGrid* _tmp1_;
#line 346 "../src/contacts-contact-pane.vala"
	g_return_if_fail (self != NULL);
#line 347 "../src/contacts-contact-pane.vala"
	_tmp0_ = self->priv->suggestion_grid;
#line 347 "../src/contacts-contact-pane.vala"
	if (_tmp0_ == NULL) {
#line 348 "../src/contacts-contact-pane.vala"
		return;
#line 2532 "contacts-contact-pane.c"
	}
#line 350 "../src/contacts-contact-pane.vala"
	_tmp1_ = self->priv->suggestion_grid;
#line 350 "../src/contacts-contact-pane.vala"
	gtk_widget_destroy ((GtkWidget*) _tmp1_);
#line 351 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->suggestion_grid);
#line 351 "../src/contacts-contact-pane.vala"
	self->priv->suggestion_grid = NULL;
#line 2542 "contacts-contact-pane.c"
}

static void
g_cclosure_user_marshal_VOID__STRING_STRING_OBJECT (GClosure * closure,
                                                    GValue * return_value,
                                                    guint n_param_values,
                                                    const GValue * param_values,
                                                    gpointer invocation_hint,
                                                    gpointer marshal_data)
{
	typedef void (*GMarshalFunc_VOID__STRING_STRING_OBJECT) (gpointer data1, const char* arg_1, const char* arg_2, gpointer arg_3, gpointer data2);
	register GMarshalFunc_VOID__STRING_STRING_OBJECT callback;
	register GCClosure * cc;
	register gpointer data1;
	register gpointer data2;
	cc = (GCClosure *) closure;
#line 30 "../src/contacts-contact-pane.vala"
	g_return_if_fail (n_param_values == 4);
#line 30 "../src/contacts-contact-pane.vala"
	if (G_CCLOSURE_SWAP_DATA (closure)) {
#line 30 "../src/contacts-contact-pane.vala"
		data1 = closure->data;
#line 30 "../src/contacts-contact-pane.vala"
		data2 = param_values->data[0].v_pointer;
#line 2567 "contacts-contact-pane.c"
	} else {
#line 30 "../src/contacts-contact-pane.vala"
		data1 = param_values->data[0].v_pointer;
#line 30 "../src/contacts-contact-pane.vala"
		data2 = closure->data;
#line 2573 "contacts-contact-pane.c"
	}
#line 30 "../src/contacts-contact-pane.vala"
	callback = (GMarshalFunc_VOID__STRING_STRING_OBJECT) (marshal_data ? marshal_data : cc->callback);
#line 30 "../src/contacts-contact-pane.vala"
	callback (data1, g_value_get_string (param_values + 1), g_value_get_string (param_values + 2), g_value_get_object (param_values + 3), data2);
#line 2579 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_class_init (ContactsContactPaneClass * klass,
                                  gpointer klass_data)
{
#line 30 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_parent_class = g_type_class_peek_parent (klass);
#line 30 "../src/contacts-contact-pane.vala"
	g_type_class_adjust_private_offset (klass, &ContactsContactPane_private_offset);
#line 30 "../src/contacts-contact-pane.vala"
	G_OBJECT_CLASS (klass)->finalize = contacts_contact_pane_finalize;
#line 30 "../src/contacts-contact-pane.vala"
	gtk_widget_class_set_template_from_resource (GTK_WIDGET_CLASS (klass), "/org/gnome/Contacts/ui/contacts-contact-pane.ui");
#line 30 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_signals[CONTACTS_CONTACT_PANE_CONTACTS_LINKED_SIGNAL] = g_signal_new ("contacts-linked", CONTACTS_TYPE_CONTACT_PANE, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_user_marshal_VOID__STRING_STRING_OBJECT, G_TYPE_NONE, 3, G_TYPE_STRING, G_TYPE_STRING, CONTACTS_TYPE_LINK_OPERATION);
#line 30 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_signals[CONTACTS_CONTACT_PANE_WILL_DELETE_SIGNAL] = g_signal_new ("will-delete", CONTACTS_TYPE_CONTACT_PANE, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__OBJECT, G_TYPE_NONE, 1, FOLKS_TYPE_INDIVIDUAL);
#line 2598 "contacts-contact-pane.c"
	/**
	   * Passes the changed display name to all listeners after edit mode has been completed.
	   */
#line 30 "../src/contacts-contact-pane.vala"
	contacts_contact_pane_signals[CONTACTS_CONTACT_PANE_DISPLAY_NAME_CHANGED_SIGNAL] = g_signal_new ("display-name-changed", CONTACTS_TYPE_CONTACT_PANE, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__STRING, G_TYPE_NONE, 1, G_TYPE_STRING);
#line 30 "../src/contacts-contact-pane.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "none_selected_page", FALSE, ContactsContactPane_private_offset + G_STRUCT_OFFSET (ContactsContactPanePrivate, none_selected_page));
#line 30 "../src/contacts-contact-pane.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "contact_sheet_page", FALSE, ContactsContactPane_private_offset + G_STRUCT_OFFSET (ContactsContactPanePrivate, contact_sheet_page));
#line 30 "../src/contacts-contact-pane.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "contact_editor_page", FALSE, ContactsContactPane_private_offset + G_STRUCT_OFFSET (ContactsContactPanePrivate, contact_editor_page));
#line 2610 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_instance_init (ContactsContactPane * self,
                                     gpointer klass)
{
	GSimpleActionGroup* _tmp0_;
#line 30 "../src/contacts-contact-pane.vala"
	self->priv = contacts_contact_pane_get_instance_private (self);
#line 36 "../src/contacts-contact-pane.vala"
	self->individual = NULL;
#line 43 "../src/contacts-contact-pane.vala"
	self->priv->sheet = NULL;
#line 47 "../src/contacts-contact-pane.vala"
	self->priv->editor = NULL;
#line 49 "../src/contacts-contact-pane.vala"
	_tmp0_ = g_simple_action_group_new ();
#line 49 "../src/contacts-contact-pane.vala"
	self->priv->edit_contact_actions = _tmp0_;
#line 64 "../src/contacts-contact-pane.vala"
	self->on_edit_mode = FALSE;
#line 65 "../src/contacts-contact-pane.vala"
	self->priv->suggestion_grid = NULL;
#line 30 "../src/contacts-contact-pane.vala"
	gtk_widget_init_template (GTK_WIDGET (self));
#line 2636 "contacts-contact-pane.c"
}

static void
contacts_contact_pane_finalize (GObject * obj)
{
	ContactsContactPane * self;
#line 30 "../src/contacts-contact-pane.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, CONTACTS_TYPE_CONTACT_PANE, ContactsContactPane);
#line 32 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->parent_window);
#line 34 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->store);
#line 36 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->individual);
#line 39 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->none_selected_page);
#line 42 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->contact_sheet_page);
#line 43 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->sheet);
#line 46 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->contact_editor_page);
#line 47 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->editor);
#line 49 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->edit_contact_actions);
#line 65 "../src/contacts-contact-pane.vala"
	_g_object_unref0 (self->priv->suggestion_grid);
#line 30 "../src/contacts-contact-pane.vala"
	G_OBJECT_CLASS (contacts_contact_pane_parent_class)->finalize (obj);
#line 2667 "contacts-contact-pane.c"
}

/**
 * The ContactPage is the right pane. It consists of 3 possible pages:
 * a page if nothing is selected, a ContactSheet to view contact information,
 * and a ContactEditor to edit contact information.
 */
static GType
contacts_contact_pane_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (ContactsContactPaneClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) contacts_contact_pane_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ContactsContactPane), 0, (GInstanceInitFunc) contacts_contact_pane_instance_init, NULL };
	GType contacts_contact_pane_type_id;
	contacts_contact_pane_type_id = g_type_register_static (gtk_stack_get_type (), "ContactsContactPane", &g_define_type_info, 0);
	ContactsContactPane_private_offset = g_type_add_instance_private (contacts_contact_pane_type_id, sizeof (ContactsContactPanePrivate));
	return contacts_contact_pane_type_id;
}

GType
contacts_contact_pane_get_type (void)
{
	static volatile gsize contacts_contact_pane_type_id__volatile = 0;
	if (g_once_init_enter (&contacts_contact_pane_type_id__volatile)) {
		GType contacts_contact_pane_type_id;
		contacts_contact_pane_type_id = contacts_contact_pane_get_type_once ();
		g_once_init_leave (&contacts_contact_pane_type_id__volatile, contacts_contact_pane_type_id);
	}
	return contacts_contact_pane_type_id__volatile;
}

static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		gint i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}

static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}

static gint
_vala_array_length (gpointer array)
{
	gint length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}

