/* contacts-max-width-bin.c generated by valac 0.47.2.1-ce69, the Vala compiler
 * generated from contacts-max-width-bin.vala, do not modify */

/*
 * Copyright (C) 2011 Alexander Larsson <alexl@redhat.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

#include <gtk/gtk.h>
#include <glib-object.h>
#include <glib.h>
#include <cairo.h>

#define CONTACTS_TYPE_MAX_WIDTH_BIN (contacts_max_width_bin_get_type ())
#define CONTACTS_MAX_WIDTH_BIN(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CONTACTS_TYPE_MAX_WIDTH_BIN, ContactsMaxWidthBin))
#define CONTACTS_MAX_WIDTH_BIN_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CONTACTS_TYPE_MAX_WIDTH_BIN, ContactsMaxWidthBinClass))
#define CONTACTS_IS_MAX_WIDTH_BIN(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CONTACTS_TYPE_MAX_WIDTH_BIN))
#define CONTACTS_IS_MAX_WIDTH_BIN_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CONTACTS_TYPE_MAX_WIDTH_BIN))
#define CONTACTS_MAX_WIDTH_BIN_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CONTACTS_TYPE_MAX_WIDTH_BIN, ContactsMaxWidthBinClass))

typedef struct _ContactsMaxWidthBin ContactsMaxWidthBin;
typedef struct _ContactsMaxWidthBinClass ContactsMaxWidthBinClass;
typedef struct _ContactsMaxWidthBinPrivate ContactsMaxWidthBinPrivate;
enum  {
	CONTACTS_MAX_WIDTH_BIN_0_PROPERTY,
	CONTACTS_MAX_WIDTH_BIN_MAX_WIDTH_PROPERTY,
	CONTACTS_MAX_WIDTH_BIN_NUM_PROPERTIES
};
static GParamSpec* contacts_max_width_bin_properties[CONTACTS_MAX_WIDTH_BIN_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

struct _ContactsMaxWidthBin {
	GtkBin parent_instance;
	ContactsMaxWidthBinPrivate * priv;
};

struct _ContactsMaxWidthBinClass {
	GtkBinClass parent_class;
};

struct _ContactsMaxWidthBinPrivate {
	gint _max_width;
};

static gint ContactsMaxWidthBin_private_offset;
static gpointer contacts_max_width_bin_parent_class = NULL;

GType contacts_max_width_bin_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (ContactsMaxWidthBin, g_object_unref)
static void contacts_max_width_bin_real_get_preferred_height (GtkWidget* base,
                                                       gint* minimum_height,
                                                       gint* natural_height);
static void contacts_max_width_bin_real_get_preferred_width (GtkWidget* base,
                                                      gint* minimum_width,
                                                      gint* natural_width);
static void contacts_max_width_bin_real_size_allocate (GtkWidget* base,
                                                GtkAllocation* allocation);
gint contacts_max_width_bin_get_max_width (ContactsMaxWidthBin* self);
ContactsMaxWidthBin* contacts_max_width_bin_new (void);
ContactsMaxWidthBin* contacts_max_width_bin_construct (GType object_type);
void contacts_max_width_bin_set_max_width (ContactsMaxWidthBin* self,
                                           gint value);
static void contacts_max_width_bin_finalize (GObject * obj);
static GType contacts_max_width_bin_get_type_once (void);
static void _vala_contacts_max_width_bin_get_property (GObject * object,
                                                guint property_id,
                                                GValue * value,
                                                GParamSpec * pspec);
static void _vala_contacts_max_width_bin_set_property (GObject * object,
                                                guint property_id,
                                                const GValue * value,
                                                GParamSpec * pspec);

static inline gpointer
contacts_max_width_bin_get_instance_private (ContactsMaxWidthBin* self)
{
	return G_STRUCT_MEMBER_P (self, ContactsMaxWidthBin_private_offset);
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 28 "../src/contacts-max-width-bin.vala"
	return self ? g_object_ref (self) : NULL;
#line 98 "contacts-max-width-bin.c"
}

static void
contacts_max_width_bin_real_get_preferred_height (GtkWidget* base,
                                                  gint* minimum_height,
                                                  gint* natural_height)
{
	ContactsMaxWidthBin * self;
	gint _vala_minimum_height = 0;
	gint _vala_natural_height = 0;
	GtkWidget* child = NULL;
	GtkWidget* _tmp0_;
	GtkWidget* _tmp1_;
	GtkWidget* _tmp2_;
#line 27 "../src/contacts-max-width-bin.vala"
	self = (ContactsMaxWidthBin*) base;
#line 28 "../src/contacts-max-width-bin.vala"
	_tmp0_ = gtk_bin_get_child ((GtkBin*) self);
#line 28 "../src/contacts-max-width-bin.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 28 "../src/contacts-max-width-bin.vala"
	child = _tmp1_;
#line 29 "../src/contacts-max-width-bin.vala"
	_tmp2_ = child;
#line 29 "../src/contacts-max-width-bin.vala"
	if (_tmp2_ != NULL) {
#line 125 "contacts-max-width-bin.c"
		gint min = 0;
		gint nat = 0;
		GtkWidget* _tmp3_;
		gint _tmp4_ = 0;
		gint _tmp5_ = 0;
#line 31 "../src/contacts-max-width-bin.vala"
		_tmp3_ = child;
#line 31 "../src/contacts-max-width-bin.vala"
		gtk_widget_get_preferred_height (_tmp3_, &_tmp4_, &_tmp5_);
#line 31 "../src/contacts-max-width-bin.vala"
		min = _tmp4_;
#line 31 "../src/contacts-max-width-bin.vala"
		nat = _tmp5_;
#line 32 "../src/contacts-max-width-bin.vala"
		_vala_minimum_height = min;
#line 33 "../src/contacts-max-width-bin.vala"
		_vala_natural_height = nat;
#line 143 "contacts-max-width-bin.c"
	} else {
#line 35 "../src/contacts-max-width-bin.vala"
		_vala_minimum_height = -1;
#line 36 "../src/contacts-max-width-bin.vala"
		_vala_natural_height = -1;
#line 149 "contacts-max-width-bin.c"
	}
#line 27 "../src/contacts-max-width-bin.vala"
	_g_object_unref0 (child);
#line 27 "../src/contacts-max-width-bin.vala"
	if (minimum_height) {
#line 27 "../src/contacts-max-width-bin.vala"
		*minimum_height = _vala_minimum_height;
#line 157 "contacts-max-width-bin.c"
	}
#line 27 "../src/contacts-max-width-bin.vala"
	if (natural_height) {
#line 27 "../src/contacts-max-width-bin.vala"
		*natural_height = _vala_natural_height;
#line 163 "contacts-max-width-bin.c"
	}
}

static void
contacts_max_width_bin_real_get_preferred_width (GtkWidget* base,
                                                 gint* minimum_width,
                                                 gint* natural_width)
{
	ContactsMaxWidthBin * self;
	gint _vala_minimum_width = 0;
	gint _vala_natural_width = 0;
	GtkWidget* child = NULL;
	GtkWidget* _tmp0_;
	GtkWidget* _tmp1_;
	GtkWidget* _tmp2_;
#line 40 "../src/contacts-max-width-bin.vala"
	self = (ContactsMaxWidthBin*) base;
#line 41 "../src/contacts-max-width-bin.vala"
	_tmp0_ = gtk_bin_get_child ((GtkBin*) self);
#line 41 "../src/contacts-max-width-bin.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 41 "../src/contacts-max-width-bin.vala"
	child = _tmp1_;
#line 42 "../src/contacts-max-width-bin.vala"
	_tmp2_ = child;
#line 42 "../src/contacts-max-width-bin.vala"
	if (_tmp2_ != NULL) {
#line 191 "contacts-max-width-bin.c"
		gint min = 0;
		gint nat = 0;
		GtkWidget* _tmp3_;
		gint _tmp4_ = 0;
		gint _tmp5_ = 0;
#line 44 "../src/contacts-max-width-bin.vala"
		_tmp3_ = child;
#line 44 "../src/contacts-max-width-bin.vala"
		gtk_widget_get_preferred_width (_tmp3_, &_tmp4_, &_tmp5_);
#line 44 "../src/contacts-max-width-bin.vala"
		min = _tmp4_;
#line 44 "../src/contacts-max-width-bin.vala"
		nat = _tmp5_;
#line 45 "../src/contacts-max-width-bin.vala"
		_vala_minimum_width = min;
#line 46 "../src/contacts-max-width-bin.vala"
		_vala_natural_width = nat;
#line 209 "contacts-max-width-bin.c"
	} else {
#line 48 "../src/contacts-max-width-bin.vala"
		_vala_minimum_width = -1;
#line 49 "../src/contacts-max-width-bin.vala"
		_vala_natural_width = -1;
#line 215 "contacts-max-width-bin.c"
	}
#line 40 "../src/contacts-max-width-bin.vala"
	_g_object_unref0 (child);
#line 40 "../src/contacts-max-width-bin.vala"
	if (minimum_width) {
#line 40 "../src/contacts-max-width-bin.vala"
		*minimum_width = _vala_minimum_width;
#line 223 "contacts-max-width-bin.c"
	}
#line 40 "../src/contacts-max-width-bin.vala"
	if (natural_width) {
#line 40 "../src/contacts-max-width-bin.vala"
		*natural_width = _vala_natural_width;
#line 229 "contacts-max-width-bin.c"
	}
}

static void
contacts_max_width_bin_real_size_allocate (GtkWidget* base,
                                           GtkAllocation* allocation)
{
	ContactsMaxWidthBin * self;
	GtkAllocation new_alloc = {0};
	GtkAllocation _tmp0_;
	GtkAllocation _tmp1_;
	GtkAllocation _tmp2_;
	gint _tmp3_;
	GtkWidget* child = NULL;
	GtkWidget* _tmp6_;
	GtkWidget* _tmp7_;
	GtkAllocation _tmp8_;
#line 53 "../src/contacts-max-width-bin.vala"
	self = (ContactsMaxWidthBin*) base;
#line 53 "../src/contacts-max-width-bin.vala"
	g_return_if_fail (allocation != NULL);
#line 56 "../src/contacts-max-width-bin.vala"
	_tmp0_ = *allocation;
#line 56 "../src/contacts-max-width-bin.vala"
	gtk_widget_set_allocation ((GtkWidget*) self, &_tmp0_);
#line 57 "../src/contacts-max-width-bin.vala"
	_tmp1_ = *allocation;
#line 57 "../src/contacts-max-width-bin.vala"
	new_alloc = _tmp1_;
#line 58 "../src/contacts-max-width-bin.vala"
	_tmp2_ = *allocation;
#line 58 "../src/contacts-max-width-bin.vala"
	_tmp3_ = self->priv->_max_width;
#line 58 "../src/contacts-max-width-bin.vala"
	if (_tmp2_.width > _tmp3_) {
#line 265 "contacts-max-width-bin.c"
		gint _tmp4_;
		GtkAllocation _tmp5_;
#line 59 "../src/contacts-max-width-bin.vala"
		_tmp4_ = self->priv->_max_width;
#line 59 "../src/contacts-max-width-bin.vala"
		new_alloc.width = _tmp4_;
#line 60 "../src/contacts-max-width-bin.vala"
		_tmp5_ = *allocation;
#line 60 "../src/contacts-max-width-bin.vala"
		new_alloc.x = _tmp5_.x;
#line 276 "contacts-max-width-bin.c"
	}
#line 63 "../src/contacts-max-width-bin.vala"
	_tmp6_ = gtk_bin_get_child ((GtkBin*) self);
#line 63 "../src/contacts-max-width-bin.vala"
	_tmp7_ = _g_object_ref0 (_tmp6_);
#line 63 "../src/contacts-max-width-bin.vala"
	child = _tmp7_;
#line 64 "../src/contacts-max-width-bin.vala"
	_tmp8_ = new_alloc;
#line 64 "../src/contacts-max-width-bin.vala"
	gtk_widget_size_allocate (child, &_tmp8_);
#line 53 "../src/contacts-max-width-bin.vala"
	_g_object_unref0 (child);
#line 290 "contacts-max-width-bin.c"
}

ContactsMaxWidthBin*
contacts_max_width_bin_construct (GType object_type)
{
	ContactsMaxWidthBin * self = NULL;
#line 23 "../src/contacts-max-width-bin.vala"
	self = (ContactsMaxWidthBin*) g_object_new (object_type, NULL);
#line 23 "../src/contacts-max-width-bin.vala"
	return self;
#line 301 "contacts-max-width-bin.c"
}

ContactsMaxWidthBin*
contacts_max_width_bin_new (void)
{
#line 23 "../src/contacts-max-width-bin.vala"
	return contacts_max_width_bin_construct (CONTACTS_TYPE_MAX_WIDTH_BIN);
#line 309 "contacts-max-width-bin.c"
}

gint
contacts_max_width_bin_get_max_width (ContactsMaxWidthBin* self)
{
	gint result;
#line 25 "../src/contacts-max-width-bin.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 25 "../src/contacts-max-width-bin.vala"
	result = self->priv->_max_width;
#line 25 "../src/contacts-max-width-bin.vala"
	return result;
#line 322 "contacts-max-width-bin.c"
}

void
contacts_max_width_bin_set_max_width (ContactsMaxWidthBin* self,
                                      gint value)
{
#line 25 "../src/contacts-max-width-bin.vala"
	g_return_if_fail (self != NULL);
#line 25 "../src/contacts-max-width-bin.vala"
	if (contacts_max_width_bin_get_max_width (self) != value) {
#line 25 "../src/contacts-max-width-bin.vala"
		self->priv->_max_width = value;
#line 25 "../src/contacts-max-width-bin.vala"
		g_object_notify_by_pspec ((GObject *) self, contacts_max_width_bin_properties[CONTACTS_MAX_WIDTH_BIN_MAX_WIDTH_PROPERTY]);
#line 337 "contacts-max-width-bin.c"
	}
}

static void
contacts_max_width_bin_class_init (ContactsMaxWidthBinClass * klass,
                                   gpointer klass_data)
{
#line 23 "../src/contacts-max-width-bin.vala"
	contacts_max_width_bin_parent_class = g_type_class_peek_parent (klass);
#line 23 "../src/contacts-max-width-bin.vala"
	g_type_class_adjust_private_offset (klass, &ContactsMaxWidthBin_private_offset);
#line 23 "../src/contacts-max-width-bin.vala"
	((GtkWidgetClass *) klass)->get_preferred_height = (void (*) (GtkWidget*, gint*, gint*)) contacts_max_width_bin_real_get_preferred_height;
#line 23 "../src/contacts-max-width-bin.vala"
	((GtkWidgetClass *) klass)->get_preferred_width = (void (*) (GtkWidget*, gint*, gint*)) contacts_max_width_bin_real_get_preferred_width;
#line 23 "../src/contacts-max-width-bin.vala"
	((GtkWidgetClass *) klass)->size_allocate = (void (*) (GtkWidget*, GtkAllocation*)) contacts_max_width_bin_real_size_allocate;
#line 23 "../src/contacts-max-width-bin.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_contacts_max_width_bin_get_property;
#line 23 "../src/contacts-max-width-bin.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_contacts_max_width_bin_set_property;
#line 23 "../src/contacts-max-width-bin.vala"
	G_OBJECT_CLASS (klass)->finalize = contacts_max_width_bin_finalize;
#line 23 "../src/contacts-max-width-bin.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), CONTACTS_MAX_WIDTH_BIN_MAX_WIDTH_PROPERTY, contacts_max_width_bin_properties[CONTACTS_MAX_WIDTH_BIN_MAX_WIDTH_PROPERTY] = g_param_spec_int ("max-width", "max-width", "max-width", G_MININT, G_MAXINT, 0, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 363 "contacts-max-width-bin.c"
}

static void
contacts_max_width_bin_instance_init (ContactsMaxWidthBin * self,
                                      gpointer klass)
{
#line 23 "../src/contacts-max-width-bin.vala"
	self->priv = contacts_max_width_bin_get_instance_private (self);
#line 372 "contacts-max-width-bin.c"
}

static void
contacts_max_width_bin_finalize (GObject * obj)
{
	ContactsMaxWidthBin * self;
#line 23 "../src/contacts-max-width-bin.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, CONTACTS_TYPE_MAX_WIDTH_BIN, ContactsMaxWidthBin);
#line 23 "../src/contacts-max-width-bin.vala"
	G_OBJECT_CLASS (contacts_max_width_bin_parent_class)->finalize (obj);
#line 383 "contacts-max-width-bin.c"
}

/**
 * The MaxWidthBin is a very basic helper class to restrict a given widget's
 * width to a given maximum. Set the widget as the child of this Bin to
 * restrict its width.
 */
static GType
contacts_max_width_bin_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (ContactsMaxWidthBinClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) contacts_max_width_bin_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ContactsMaxWidthBin), 0, (GInstanceInitFunc) contacts_max_width_bin_instance_init, NULL };
	GType contacts_max_width_bin_type_id;
	contacts_max_width_bin_type_id = g_type_register_static (gtk_bin_get_type (), "ContactsMaxWidthBin", &g_define_type_info, 0);
	ContactsMaxWidthBin_private_offset = g_type_add_instance_private (contacts_max_width_bin_type_id, sizeof (ContactsMaxWidthBinPrivate));
	return contacts_max_width_bin_type_id;
}

GType
contacts_max_width_bin_get_type (void)
{
	static volatile gsize contacts_max_width_bin_type_id__volatile = 0;
	if (g_once_init_enter (&contacts_max_width_bin_type_id__volatile)) {
		GType contacts_max_width_bin_type_id;
		contacts_max_width_bin_type_id = contacts_max_width_bin_get_type_once ();
		g_once_init_leave (&contacts_max_width_bin_type_id__volatile, contacts_max_width_bin_type_id);
	}
	return contacts_max_width_bin_type_id__volatile;
}

static void
_vala_contacts_max_width_bin_get_property (GObject * object,
                                           guint property_id,
                                           GValue * value,
                                           GParamSpec * pspec)
{
	ContactsMaxWidthBin * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, CONTACTS_TYPE_MAX_WIDTH_BIN, ContactsMaxWidthBin);
#line 23 "../src/contacts-max-width-bin.vala"
	switch (property_id) {
#line 23 "../src/contacts-max-width-bin.vala"
		case CONTACTS_MAX_WIDTH_BIN_MAX_WIDTH_PROPERTY:
#line 23 "../src/contacts-max-width-bin.vala"
		g_value_set_int (value, contacts_max_width_bin_get_max_width (self));
#line 23 "../src/contacts-max-width-bin.vala"
		break;
#line 429 "contacts-max-width-bin.c"
		default:
#line 23 "../src/contacts-max-width-bin.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 23 "../src/contacts-max-width-bin.vala"
		break;
#line 435 "contacts-max-width-bin.c"
	}
}

static void
_vala_contacts_max_width_bin_set_property (GObject * object,
                                           guint property_id,
                                           const GValue * value,
                                           GParamSpec * pspec)
{
	ContactsMaxWidthBin * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, CONTACTS_TYPE_MAX_WIDTH_BIN, ContactsMaxWidthBin);
#line 23 "../src/contacts-max-width-bin.vala"
	switch (property_id) {
#line 23 "../src/contacts-max-width-bin.vala"
		case CONTACTS_MAX_WIDTH_BIN_MAX_WIDTH_PROPERTY:
#line 23 "../src/contacts-max-width-bin.vala"
		contacts_max_width_bin_set_max_width (self, g_value_get_int (value));
#line 23 "../src/contacts-max-width-bin.vala"
		break;
#line 455 "contacts-max-width-bin.c"
		default:
#line 23 "../src/contacts-max-width-bin.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 23 "../src/contacts-max-width-bin.vala"
		break;
#line 461 "contacts-max-width-bin.c"
	}
}

