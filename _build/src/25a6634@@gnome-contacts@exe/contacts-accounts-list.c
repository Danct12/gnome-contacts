/* contacts-accounts-list.c generated by valac 0.47.2.1-ce69, the Vala compiler
 * generated from contacts-accounts-list.vala, do not modify */

/*
 * Copyright (C) 2011 Erick PÃ©rez Castellanos <erick.red@gmail.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

#include <gtk/gtk.h>
#include <glib-object.h>
#include <folks/folks.h>
#include "contacts.h"
#include <glib.h>
#include <libedataserver/libedataserver.h>
#include <folks/folks-eds.h>
#include <stdlib.h>
#include <string.h>
#include <handy.h>
#include <config.h>
#include <glib/gi18n-lib.h>

#define CONTACTS_TYPE_ACCOUNTS_LIST (contacts_accounts_list_get_type ())
#define CONTACTS_ACCOUNTS_LIST(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CONTACTS_TYPE_ACCOUNTS_LIST, ContactsAccountsList))
#define CONTACTS_ACCOUNTS_LIST_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CONTACTS_TYPE_ACCOUNTS_LIST, ContactsAccountsListClass))
#define CONTACTS_IS_ACCOUNTS_LIST(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CONTACTS_TYPE_ACCOUNTS_LIST))
#define CONTACTS_IS_ACCOUNTS_LIST_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CONTACTS_TYPE_ACCOUNTS_LIST))
#define CONTACTS_ACCOUNTS_LIST_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CONTACTS_TYPE_ACCOUNTS_LIST, ContactsAccountsListClass))

typedef struct _ContactsAccountsList ContactsAccountsList;
typedef struct _ContactsAccountsListClass ContactsAccountsListClass;
typedef struct _ContactsAccountsListPrivate ContactsAccountsListPrivate;
enum  {
	CONTACTS_ACCOUNTS_LIST_0_PROPERTY,
	CONTACTS_ACCOUNTS_LIST_NUM_PROPERTIES
};
static GParamSpec* contacts_accounts_list_properties[CONTACTS_ACCOUNTS_LIST_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
enum  {
	CONTACTS_ACCOUNTS_LIST_ACCOUNT_SELECTED_SIGNAL,
	CONTACTS_ACCOUNTS_LIST_NUM_SIGNALS
};
static guint contacts_accounts_list_signals[CONTACTS_ACCOUNTS_LIST_NUM_SIGNALS] = {0};

struct _ContactsAccountsList {
	GtkListBox parent_instance;
	ContactsAccountsListPrivate * priv;
	FolksPersonaStore* selected_store;
};

struct _ContactsAccountsListClass {
	GtkListBoxClass parent_class;
};

struct _ContactsAccountsListPrivate {
	GtkListBoxRow* last_selected_row;
	ContactsStore* contacts_store;
};

static gint ContactsAccountsList_private_offset;
static gpointer contacts_accounts_list_parent_class = NULL;

GType contacts_accounts_list_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (ContactsAccountsList, g_object_unref)
ContactsAccountsList* contacts_accounts_list_new (ContactsStore* contacts_store);
ContactsAccountsList* contacts_accounts_list_construct (GType object_type,
                                                        ContactsStore* contacts_store);
static void _contacts_add_separator_gtk_list_box_update_header_func (GtkListBoxRow* row,
                                                              GtkListBoxRow* before,
                                                              gpointer self);
static void contacts_accounts_list_real_row_activated (GtkListBox* base,
                                                GtkListBoxRow* row);
void contacts_accounts_list_update_contents (ContactsAccountsList* self,
                                             gboolean select_active);
static void contacts_accounts_list_finalize (GObject * obj);
static GType contacts_accounts_list_get_type_once (void);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);

static inline gpointer
contacts_accounts_list_get_instance_private (ContactsAccountsList* self)
{
	return G_STRUCT_MEMBER_P (self, ContactsAccountsList_private_offset);
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 33 "../src/contacts-accounts-list.vala"
	return self ? g_object_ref (self) : NULL;
#line 108 "contacts-accounts-list.c"
}

static void
_contacts_add_separator_gtk_list_box_update_header_func (GtkListBoxRow* row,
                                                         GtkListBoxRow* before,
                                                         gpointer self)
{
#line 36 "../src/contacts-accounts-list.vala"
	contacts_add_separator (row, before);
#line 118 "contacts-accounts-list.c"
}

ContactsAccountsList*
contacts_accounts_list_construct (GType object_type,
                                  ContactsStore* contacts_store)
{
	ContactsAccountsList * self = NULL;
	ContactsStore* _tmp0_;
#line 32 "../src/contacts-accounts-list.vala"
	g_return_val_if_fail (contacts_store != NULL, NULL);
#line 32 "../src/contacts-accounts-list.vala"
	self = (ContactsAccountsList*) g_object_new (object_type, NULL);
#line 33 "../src/contacts-accounts-list.vala"
	_tmp0_ = _g_object_ref0 (contacts_store);
#line 33 "../src/contacts-accounts-list.vala"
	_g_object_unref0 (self->priv->contacts_store);
#line 33 "../src/contacts-accounts-list.vala"
	self->priv->contacts_store = _tmp0_;
#line 34 "../src/contacts-accounts-list.vala"
	_g_object_unref0 (self->selected_store);
#line 34 "../src/contacts-accounts-list.vala"
	self->selected_store = NULL;
#line 36 "../src/contacts-accounts-list.vala"
	gtk_list_box_set_header_func ((GtkListBox*) self, _contacts_add_separator_gtk_list_box_update_header_func, NULL, NULL);
#line 32 "../src/contacts-accounts-list.vala"
	return self;
#line 145 "contacts-accounts-list.c"
}

ContactsAccountsList*
contacts_accounts_list_new (ContactsStore* contacts_store)
{
#line 32 "../src/contacts-accounts-list.vala"
	return contacts_accounts_list_construct (CONTACTS_TYPE_ACCOUNTS_LIST, contacts_store);
#line 153 "contacts-accounts-list.c"
}

static void
contacts_accounts_list_real_row_activated (GtkListBox* base,
                                           GtkListBoxRow* row)
{
	ContactsAccountsList * self;
	gboolean _tmp0_ = FALSE;
	GtkListBoxRow* _tmp1_;
	GtkImage* checkmark = NULL;
	gconstpointer _tmp3_;
	GtkImage* _tmp4_;
	GtkImage* _tmp5_;
	GtkListBoxRow* _tmp6_;
	GtkListBoxRow* _tmp12_;
	gconstpointer _tmp13_;
	FolksPersonaStore* _tmp14_;
#line 39 "../src/contacts-accounts-list.vala"
	self = (ContactsAccountsList*) base;
#line 39 "../src/contacts-accounts-list.vala"
	g_return_if_fail (row != NULL);
#line 40 "../src/contacts-accounts-list.vala"
	if (row == NULL) {
#line 41 "../src/contacts-accounts-list.vala"
		return;
#line 179 "contacts-accounts-list.c"
	}
#line 43 "../src/contacts-accounts-list.vala"
	_tmp1_ = self->priv->last_selected_row;
#line 43 "../src/contacts-accounts-list.vala"
	if (_tmp1_ != NULL) {
#line 185 "contacts-accounts-list.c"
		GtkListBoxRow* _tmp2_;
#line 44 "../src/contacts-accounts-list.vala"
		_tmp2_ = self->priv->last_selected_row;
#line 44 "../src/contacts-accounts-list.vala"
		_tmp0_ = _tmp2_ == row;
#line 191 "contacts-accounts-list.c"
	} else {
#line 43 "../src/contacts-accounts-list.vala"
		_tmp0_ = FALSE;
#line 195 "contacts-accounts-list.c"
	}
#line 43 "../src/contacts-accounts-list.vala"
	if (_tmp0_) {
#line 45 "../src/contacts-accounts-list.vala"
		return;
#line 201 "contacts-accounts-list.c"
	}
#line 48 "../src/contacts-accounts-list.vala"
	_tmp3_ = g_object_get_data ((GObject*) row, "checkmark");
#line 48 "../src/contacts-accounts-list.vala"
	_tmp4_ = _g_object_ref0 ((GtkImage*) _tmp3_);
#line 48 "../src/contacts-accounts-list.vala"
	checkmark = _tmp4_;
#line 49 "../src/contacts-accounts-list.vala"
	_tmp5_ = checkmark;
#line 49 "../src/contacts-accounts-list.vala"
	gtk_widget_show ((GtkWidget*) _tmp5_);
#line 51 "../src/contacts-accounts-list.vala"
	_tmp6_ = self->priv->last_selected_row;
#line 51 "../src/contacts-accounts-list.vala"
	if (_tmp6_ != NULL) {
#line 217 "contacts-accounts-list.c"
		GtkListBoxRow* _tmp7_;
		gconstpointer _tmp8_;
		GtkImage* _tmp9_;
		GtkImage* _tmp10_;
#line 52 "../src/contacts-accounts-list.vala"
		_tmp7_ = self->priv->last_selected_row;
#line 52 "../src/contacts-accounts-list.vala"
		_tmp8_ = g_object_get_data ((GObject*) _tmp7_, "checkmark");
#line 52 "../src/contacts-accounts-list.vala"
		_tmp9_ = _g_object_ref0 ((GtkImage*) _tmp8_);
#line 52 "../src/contacts-accounts-list.vala"
		_g_object_unref0 (checkmark);
#line 52 "../src/contacts-accounts-list.vala"
		checkmark = _tmp9_;
#line 53 "../src/contacts-accounts-list.vala"
		_tmp10_ = checkmark;
#line 53 "../src/contacts-accounts-list.vala"
		if (_tmp10_ != NULL) {
#line 236 "contacts-accounts-list.c"
			GtkImage* _tmp11_;
#line 54 "../src/contacts-accounts-list.vala"
			_tmp11_ = checkmark;
#line 54 "../src/contacts-accounts-list.vala"
			gtk_widget_hide ((GtkWidget*) _tmp11_);
#line 242 "contacts-accounts-list.c"
		}
	}
#line 57 "../src/contacts-accounts-list.vala"
	_tmp12_ = _g_object_ref0 (row);
#line 57 "../src/contacts-accounts-list.vala"
	_g_object_unref0 (self->priv->last_selected_row);
#line 57 "../src/contacts-accounts-list.vala"
	self->priv->last_selected_row = _tmp12_;
#line 59 "../src/contacts-accounts-list.vala"
	_tmp13_ = g_object_get_data ((GObject*) row, "store");
#line 59 "../src/contacts-accounts-list.vala"
	_tmp14_ = _g_object_ref0 ((FolksPersonaStore*) _tmp13_);
#line 59 "../src/contacts-accounts-list.vala"
	_g_object_unref0 (self->selected_store);
#line 59 "../src/contacts-accounts-list.vala"
	self->selected_store = _tmp14_;
#line 61 "../src/contacts-accounts-list.vala"
	g_signal_emit (self, contacts_accounts_list_signals[CONTACTS_ACCOUNTS_LIST_ACCOUNT_SELECTED_SIGNAL], 0);
#line 39 "../src/contacts-accounts-list.vala"
	_g_object_unref0 (checkmark);
#line 263 "contacts-accounts-list.c"
}

void
contacts_accounts_list_update_contents (ContactsAccountsList* self,
                                        gboolean select_active)
{
	GList* _tmp0_;
	FolksPersonaStore** eds_stores = NULL;
	ContactsStore* _tmp2_;
	gint _tmp3_ = 0;
	FolksPersonaStore** _tmp4_;
	gint eds_stores_length1;
	gint _eds_stores_size_;
	FolksPersonaStore** _tmp5_;
	gint _tmp5__length1;
	FolksPersonaStore* local_store = NULL;
	FolksPersonaStore** _tmp6_;
	gint _tmp6__length1;
	FolksPersonaStore* _tmp68_;
#line 64 "../src/contacts-accounts-list.vala"
	g_return_if_fail (self != NULL);
#line 65 "../src/contacts-accounts-list.vala"
	_tmp0_ = gtk_container_get_children ((GtkContainer*) self);
#line 287 "contacts-accounts-list.c"
	{
		GList* child_collection = NULL;
		GList* child_it = NULL;
#line 65 "../src/contacts-accounts-list.vala"
		child_collection = _tmp0_;
#line 65 "../src/contacts-accounts-list.vala"
		for (child_it = child_collection; child_it != NULL; child_it = child_it->next) {
#line 295 "contacts-accounts-list.c"
			GtkWidget* child = NULL;
#line 65 "../src/contacts-accounts-list.vala"
			child = (GtkWidget*) child_it->data;
#line 299 "contacts-accounts-list.c"
			{
				GtkWidget* _tmp1_;
#line 66 "../src/contacts-accounts-list.vala"
				_tmp1_ = child;
#line 66 "../src/contacts-accounts-list.vala"
				gtk_widget_destroy (_tmp1_);
#line 306 "contacts-accounts-list.c"
			}
		}
#line 65 "../src/contacts-accounts-list.vala"
		(child_collection == NULL) ? NULL : (child_collection = (g_list_free (child_collection), NULL));
#line 311 "contacts-accounts-list.c"
	}
#line 70 "../src/contacts-accounts-list.vala"
	_tmp2_ = self->priv->contacts_store;
#line 70 "../src/contacts-accounts-list.vala"
	_tmp4_ = contacts_utils_get_eds_address_books (_tmp2_, &_tmp3_);
#line 70 "../src/contacts-accounts-list.vala"
	eds_stores = _tmp4_;
#line 70 "../src/contacts-accounts-list.vala"
	eds_stores_length1 = _tmp3_;
#line 70 "../src/contacts-accounts-list.vala"
	_eds_stores_size_ = eds_stores_length1;
#line 71 "../src/contacts-accounts-list.vala"
	_tmp5_ = eds_stores;
#line 71 "../src/contacts-accounts-list.vala"
	_tmp5__length1 = eds_stores_length1;
#line 71 "../src/contacts-accounts-list.vala"
	g_debug ("contacts-accounts-list.vala:71: Found %d EDS stores", _tmp5__length1);
#line 73 "../src/contacts-accounts-list.vala"
	local_store = NULL;
#line 74 "../src/contacts-accounts-list.vala"
	_tmp6_ = eds_stores;
#line 74 "../src/contacts-accounts-list.vala"
	_tmp6__length1 = eds_stores_length1;
#line 335 "contacts-accounts-list.c"
	{
		FolksPersonaStore** persona_store_collection = NULL;
		gint persona_store_collection_length1 = 0;
		gint _persona_store_collection_size_ = 0;
		gint persona_store_it = 0;
#line 74 "../src/contacts-accounts-list.vala"
		persona_store_collection = _tmp6_;
#line 74 "../src/contacts-accounts-list.vala"
		persona_store_collection_length1 = _tmp6__length1;
#line 74 "../src/contacts-accounts-list.vala"
		for (persona_store_it = 0; persona_store_it < persona_store_collection_length1; persona_store_it = persona_store_it + 1) {
#line 347 "contacts-accounts-list.c"
			FolksPersonaStore* _tmp7_;
			FolksPersonaStore* persona_store = NULL;
#line 74 "../src/contacts-accounts-list.vala"
			_tmp7_ = _g_object_ref0 (persona_store_collection[persona_store_it]);
#line 74 "../src/contacts-accounts-list.vala"
			persona_store = _tmp7_;
#line 354 "contacts-accounts-list.c"
			{
				FolksPersonaStore* _tmp8_;
				const gchar* _tmp9_;
				const gchar* _tmp10_;
				ESource* source = NULL;
				FolksPersonaStore* _tmp13_;
				ESource* _tmp14_;
				ESource* _tmp15_;
				ESource* _tmp16_;
				ESource* parent_source = NULL;
				ESourceRegistry* _tmp17_;
				ESource* _tmp18_;
				const gchar* _tmp19_;
				const gchar* _tmp20_;
				ESource* _tmp21_;
				gchar* provider_name = NULL;
				FolksPersonaStore* _tmp22_;
				gchar* _tmp23_;
				const gchar* _tmp24_;
				gchar* source_account_id = NULL;
				gchar* _tmp25_;
				ESource* _tmp26_;
				HdyActionRow* row = NULL;
				HdyActionRow* _tmp34_;
				HdyActionRow* _tmp35_;
				FolksPersonaStore* _tmp36_;
				FolksPersonaStore* _tmp37_;
				GtkImage* provider_image = NULL;
				const gchar* _tmp38_;
				HdyActionRow* _tmp42_;
				GtkImage* _tmp43_;
				HdyActionRow* _tmp44_;
				const gchar* _tmp45_;
				HdyActionRow* _tmp46_;
				ESource* _tmp47_;
				const gchar* _tmp48_;
				const gchar* _tmp49_;
				HdyActionRow* _tmp50_;
				HdyActionRow* _tmp51_;
				GtkImage* checkmark = NULL;
				GtkImage* _tmp52_;
				GtkImage* _tmp53_;
				HdyActionRow* _tmp54_;
				GtkImage* _tmp55_;
				HdyActionRow* _tmp56_;
				GtkImage* _tmp57_;
				GtkImage* _tmp58_;
				HdyActionRow* _tmp59_;
				gboolean _tmp60_ = FALSE;
#line 75 "../src/contacts-accounts-list.vala"
				_tmp8_ = persona_store;
#line 75 "../src/contacts-accounts-list.vala"
				_tmp9_ = folks_persona_store_get_id (_tmp8_);
#line 75 "../src/contacts-accounts-list.vala"
				_tmp10_ = _tmp9_;
#line 75 "../src/contacts-accounts-list.vala"
				if (g_strcmp0 (_tmp10_, "system-address-book") == 0) {
#line 412 "contacts-accounts-list.c"
					FolksPersonaStore* _tmp11_;
					FolksPersonaStore* _tmp12_;
#line 76 "../src/contacts-accounts-list.vala"
					_tmp11_ = persona_store;
#line 76 "../src/contacts-accounts-list.vala"
					_tmp12_ = _g_object_ref0 (_tmp11_);
#line 76 "../src/contacts-accounts-list.vala"
					_g_object_unref0 (local_store);
#line 76 "../src/contacts-accounts-list.vala"
					local_store = _tmp12_;
#line 77 "../src/contacts-accounts-list.vala"
					_g_object_unref0 (persona_store);
#line 77 "../src/contacts-accounts-list.vala"
					continue;
#line 427 "contacts-accounts-list.c"
				}
#line 79 "../src/contacts-accounts-list.vala"
				_tmp13_ = persona_store;
#line 79 "../src/contacts-accounts-list.vala"
				_tmp14_ = edsf_persona_store_get_source (G_TYPE_CHECK_INSTANCE_TYPE (_tmp13_, EDSF_TYPE_PERSONA_STORE) ? ((EdsfPersonaStore*) _tmp13_) : NULL);
#line 79 "../src/contacts-accounts-list.vala"
				_tmp15_ = _tmp14_;
#line 79 "../src/contacts-accounts-list.vala"
				_tmp16_ = _g_object_ref0 (_tmp15_);
#line 79 "../src/contacts-accounts-list.vala"
				source = _tmp16_;
#line 80 "../src/contacts-accounts-list.vala"
				_tmp17_ = contacts_eds_source_registry;
#line 80 "../src/contacts-accounts-list.vala"
				_tmp18_ = source;
#line 80 "../src/contacts-accounts-list.vala"
				_tmp19_ = e_source_get_parent (_tmp18_);
#line 80 "../src/contacts-accounts-list.vala"
				_tmp20_ = _tmp19_;
#line 80 "../src/contacts-accounts-list.vala"
				_tmp21_ = e_source_registry_ref_source (_tmp17_, _tmp20_);
#line 80 "../src/contacts-accounts-list.vala"
				parent_source = _tmp21_;
#line 81 "../src/contacts-accounts-list.vala"
				_tmp22_ = persona_store;
#line 81 "../src/contacts-accounts-list.vala"
				_tmp23_ = contacts_utils_format_persona_store_name (_tmp22_);
#line 81 "../src/contacts-accounts-list.vala"
				provider_name = _tmp23_;
#line 83 "../src/contacts-accounts-list.vala"
				_tmp24_ = provider_name;
#line 83 "../src/contacts-accounts-list.vala"
				g_debug ("contacts-accounts-list.vala:83: Contact store \"%s\"", _tmp24_);
#line 85 "../src/contacts-accounts-list.vala"
				_tmp25_ = g_strdup ("");
#line 85 "../src/contacts-accounts-list.vala"
				source_account_id = _tmp25_;
#line 86 "../src/contacts-accounts-list.vala"
				_tmp26_ = parent_source;
#line 86 "../src/contacts-accounts-list.vala"
				if (e_source_has_extension (_tmp26_, E_SOURCE_EXTENSION_GOA)) {
#line 469 "contacts-accounts-list.c"
					ESourceGoa* goa_source_ext = NULL;
					ESource* _tmp27_;
					ESourceExtension* _tmp28_;
					ESourceGoa* _tmp29_;
					ESourceGoa* _tmp30_;
					const gchar* _tmp31_;
					const gchar* _tmp32_;
					gchar* _tmp33_;
#line 87 "../src/contacts-accounts-list.vala"
					_tmp27_ = parent_source;
#line 87 "../src/contacts-accounts-list.vala"
					_tmp28_ = e_source_get_extension (_tmp27_, E_SOURCE_EXTENSION_GOA);
#line 87 "../src/contacts-accounts-list.vala"
					_tmp29_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp28_, e_source_goa_get_type ()) ? ((ESourceGoa*) _tmp28_) : NULL);
#line 87 "../src/contacts-accounts-list.vala"
					goa_source_ext = _tmp29_;
#line 88 "../src/contacts-accounts-list.vala"
					_tmp30_ = goa_source_ext;
#line 88 "../src/contacts-accounts-list.vala"
					_tmp31_ = e_source_goa_get_account_id (_tmp30_);
#line 88 "../src/contacts-accounts-list.vala"
					_tmp32_ = _tmp31_;
#line 88 "../src/contacts-accounts-list.vala"
					_tmp33_ = g_strdup (_tmp32_);
#line 88 "../src/contacts-accounts-list.vala"
					_g_free0 (source_account_id);
#line 88 "../src/contacts-accounts-list.vala"
					source_account_id = _tmp33_;
#line 86 "../src/contacts-accounts-list.vala"
					_g_object_unref0 (goa_source_ext);
#line 500 "contacts-accounts-list.c"
				}
#line 91 "../src/contacts-accounts-list.vala"
				_tmp34_ = hdy_action_row_new ();
#line 91 "../src/contacts-accounts-list.vala"
				g_object_ref_sink (_tmp34_);
#line 91 "../src/contacts-accounts-list.vala"
				row = _tmp34_;
#line 92 "../src/contacts-accounts-list.vala"
				_tmp35_ = row;
#line 92 "../src/contacts-accounts-list.vala"
				_tmp36_ = persona_store;
#line 92 "../src/contacts-accounts-list.vala"
				_tmp37_ = _g_object_ref0 (_tmp36_);
#line 92 "../src/contacts-accounts-list.vala"
				g_object_set_data_full ((GObject*) _tmp35_, "store", _tmp37_, g_object_unref);
#line 95 "../src/contacts-accounts-list.vala"
				_tmp38_ = source_account_id;
#line 95 "../src/contacts-accounts-list.vala"
				if (g_strcmp0 (_tmp38_, "") != 0) {
#line 520 "contacts-accounts-list.c"
					const gchar* _tmp39_;
					GtkImage* _tmp40_;
#line 96 "../src/contacts-accounts-list.vala"
					_tmp39_ = source_account_id;
#line 96 "../src/contacts-accounts-list.vala"
					_tmp40_ = contacts_get_icon_for_goa_account (_tmp39_);
#line 96 "../src/contacts-accounts-list.vala"
					_g_object_unref0 (provider_image);
#line 96 "../src/contacts-accounts-list.vala"
					provider_image = _tmp40_;
#line 531 "contacts-accounts-list.c"
				} else {
					GtkImage* _tmp41_;
#line 98 "../src/contacts-accounts-list.vala"
					_tmp41_ = (GtkImage*) gtk_image_new_from_icon_name (APP_ID, (GtkIconSize) GTK_ICON_SIZE_DIALOG);
#line 98 "../src/contacts-accounts-list.vala"
					g_object_ref_sink (_tmp41_);
#line 98 "../src/contacts-accounts-list.vala"
					_g_object_unref0 (provider_image);
#line 98 "../src/contacts-accounts-list.vala"
					provider_image = _tmp41_;
#line 542 "contacts-accounts-list.c"
				}
#line 99 "../src/contacts-accounts-list.vala"
				_tmp42_ = row;
#line 99 "../src/contacts-accounts-list.vala"
				_tmp43_ = provider_image;
#line 99 "../src/contacts-accounts-list.vala"
				hdy_action_row_add_prefix (_tmp42_, (GtkWidget*) _tmp43_);
#line 100 "../src/contacts-accounts-list.vala"
				_tmp44_ = row;
#line 100 "../src/contacts-accounts-list.vala"
				_tmp45_ = provider_name;
#line 100 "../src/contacts-accounts-list.vala"
				hdy_action_row_set_title (_tmp44_, _tmp45_);
#line 101 "../src/contacts-accounts-list.vala"
				_tmp46_ = row;
#line 101 "../src/contacts-accounts-list.vala"
				_tmp47_ = parent_source;
#line 101 "../src/contacts-accounts-list.vala"
				_tmp48_ = e_source_get_display_name (_tmp47_);
#line 101 "../src/contacts-accounts-list.vala"
				_tmp49_ = _tmp48_;
#line 101 "../src/contacts-accounts-list.vala"
				hdy_action_row_set_subtitle (_tmp46_, _tmp49_);
#line 102 "../src/contacts-accounts-list.vala"
				_tmp50_ = row;
#line 102 "../src/contacts-accounts-list.vala"
				gtk_widget_show_all ((GtkWidget*) _tmp50_);
#line 103 "../src/contacts-accounts-list.vala"
				_tmp51_ = row;
#line 103 "../src/contacts-accounts-list.vala"
				gtk_widget_set_no_show_all ((GtkWidget*) _tmp51_, TRUE);
#line 104 "../src/contacts-accounts-list.vala"
				_tmp52_ = (GtkImage*) gtk_image_new_from_icon_name ("object-select-symbolic", (GtkIconSize) GTK_ICON_SIZE_MENU);
#line 104 "../src/contacts-accounts-list.vala"
				g_object_ref_sink (_tmp52_);
#line 104 "../src/contacts-accounts-list.vala"
				checkmark = _tmp52_;
#line 105 "../src/contacts-accounts-list.vala"
				_tmp53_ = checkmark;
#line 105 "../src/contacts-accounts-list.vala"
				g_object_set ((GObject*) _tmp53_, "margin-end", 6, "valign", GTK_ALIGN_CENTER, "halign", GTK_ALIGN_END, "vexpand", TRUE, "hexpand", TRUE, NULL);
#line 110 "../src/contacts-accounts-list.vala"
				_tmp54_ = row;
#line 110 "../src/contacts-accounts-list.vala"
				_tmp55_ = checkmark;
#line 110 "../src/contacts-accounts-list.vala"
				hdy_action_row_add_action (_tmp54_, (GtkWidget*) _tmp55_);
#line 111 "../src/contacts-accounts-list.vala"
				_tmp56_ = row;
#line 111 "../src/contacts-accounts-list.vala"
				_tmp57_ = checkmark;
#line 111 "../src/contacts-accounts-list.vala"
				_tmp58_ = _g_object_ref0 (_tmp57_);
#line 111 "../src/contacts-accounts-list.vala"
				g_object_set_data_full ((GObject*) _tmp56_, "checkmark", _tmp58_, g_object_unref);
#line 112 "../src/contacts-accounts-list.vala"
				_tmp59_ = row;
#line 112 "../src/contacts-accounts-list.vala"
				gtk_container_add ((GtkContainer*) self, (GtkWidget*) _tmp59_);
#line 114 "../src/contacts-accounts-list.vala"
				if (select_active) {
#line 604 "contacts-accounts-list.c"
					FolksPersonaStore* _tmp61_;
					ContactsStore* _tmp62_;
					FolksIndividualAggregator* _tmp63_;
					FolksIndividualAggregator* _tmp64_;
					FolksPersonaStore* _tmp65_;
					FolksPersonaStore* _tmp66_;
#line 115 "../src/contacts-accounts-list.vala"
					_tmp61_ = persona_store;
#line 115 "../src/contacts-accounts-list.vala"
					_tmp62_ = self->priv->contacts_store;
#line 115 "../src/contacts-accounts-list.vala"
					_tmp63_ = contacts_store_get_aggregator (_tmp62_);
#line 115 "../src/contacts-accounts-list.vala"
					_tmp64_ = _tmp63_;
#line 115 "../src/contacts-accounts-list.vala"
					_tmp65_ = folks_individual_aggregator_get_primary_store (_tmp64_);
#line 115 "../src/contacts-accounts-list.vala"
					_tmp66_ = _tmp65_;
#line 115 "../src/contacts-accounts-list.vala"
					_tmp60_ = _tmp61_ == _tmp66_;
#line 625 "contacts-accounts-list.c"
				} else {
#line 114 "../src/contacts-accounts-list.vala"
					_tmp60_ = FALSE;
#line 629 "contacts-accounts-list.c"
				}
#line 114 "../src/contacts-accounts-list.vala"
				if (_tmp60_) {
#line 633 "contacts-accounts-list.c"
					HdyActionRow* _tmp67_;
#line 116 "../src/contacts-accounts-list.vala"
					_tmp67_ = row;
#line 116 "../src/contacts-accounts-list.vala"
					g_signal_emit_by_name ((GtkListBox*) self, "row-activated", (GtkListBoxRow*) _tmp67_);
#line 639 "contacts-accounts-list.c"
				}
#line 74 "../src/contacts-accounts-list.vala"
				_g_object_unref0 (checkmark);
#line 74 "../src/contacts-accounts-list.vala"
				_g_object_unref0 (provider_image);
#line 74 "../src/contacts-accounts-list.vala"
				_g_object_unref0 (row);
#line 74 "../src/contacts-accounts-list.vala"
				_g_free0 (source_account_id);
#line 74 "../src/contacts-accounts-list.vala"
				_g_free0 (provider_name);
#line 74 "../src/contacts-accounts-list.vala"
				_g_object_unref0 (parent_source);
#line 74 "../src/contacts-accounts-list.vala"
				_g_object_unref0 (source);
#line 74 "../src/contacts-accounts-list.vala"
				_g_object_unref0 (persona_store);
#line 657 "contacts-accounts-list.c"
			}
		}
	}
#line 120 "../src/contacts-accounts-list.vala"
	_tmp68_ = local_store;
#line 120 "../src/contacts-accounts-list.vala"
	if (_tmp68_ != NULL) {
#line 665 "contacts-accounts-list.c"
		HdyActionRow* local_row = NULL;
		HdyActionRow* _tmp69_;
		GtkImage* provider_image = NULL;
		GtkImage* _tmp70_;
		HdyActionRow* _tmp71_;
		GtkImage* _tmp72_;
		HdyActionRow* _tmp73_;
		HdyActionRow* _tmp74_;
		HdyActionRow* _tmp75_;
		GtkImage* checkmark = NULL;
		GtkImage* _tmp76_;
		GtkImage* _tmp77_;
		HdyActionRow* _tmp78_;
		GtkImage* _tmp79_;
		HdyActionRow* _tmp80_;
		GtkImage* _tmp81_;
		GtkImage* _tmp82_;
		HdyActionRow* _tmp83_;
		gboolean _tmp84_ = FALSE;
#line 121 "../src/contacts-accounts-list.vala"
		_tmp69_ = hdy_action_row_new ();
#line 121 "../src/contacts-accounts-list.vala"
		g_object_ref_sink (_tmp69_);
#line 121 "../src/contacts-accounts-list.vala"
		local_row = _tmp69_;
#line 122 "../src/contacts-accounts-list.vala"
		_tmp70_ = (GtkImage*) gtk_image_new_from_icon_name (APP_ID, (GtkIconSize) GTK_ICON_SIZE_DIALOG);
#line 122 "../src/contacts-accounts-list.vala"
		g_object_ref_sink (_tmp70_);
#line 122 "../src/contacts-accounts-list.vala"
		provider_image = _tmp70_;
#line 123 "../src/contacts-accounts-list.vala"
		_tmp71_ = local_row;
#line 123 "../src/contacts-accounts-list.vala"
		_tmp72_ = provider_image;
#line 123 "../src/contacts-accounts-list.vala"
		hdy_action_row_add_prefix (_tmp71_, (GtkWidget*) _tmp72_);
#line 124 "../src/contacts-accounts-list.vala"
		_tmp73_ = local_row;
#line 124 "../src/contacts-accounts-list.vala"
		hdy_action_row_set_title (_tmp73_, _ ("Local Address Book"));
#line 125 "../src/contacts-accounts-list.vala"
		_tmp74_ = local_row;
#line 125 "../src/contacts-accounts-list.vala"
		gtk_widget_show_all ((GtkWidget*) _tmp74_);
#line 126 "../src/contacts-accounts-list.vala"
		_tmp75_ = local_row;
#line 126 "../src/contacts-accounts-list.vala"
		gtk_widget_set_no_show_all ((GtkWidget*) _tmp75_, TRUE);
#line 127 "../src/contacts-accounts-list.vala"
		_tmp76_ = (GtkImage*) gtk_image_new_from_icon_name ("object-select-symbolic", (GtkIconSize) GTK_ICON_SIZE_MENU);
#line 127 "../src/contacts-accounts-list.vala"
		g_object_ref_sink (_tmp76_);
#line 127 "../src/contacts-accounts-list.vala"
		checkmark = _tmp76_;
#line 128 "../src/contacts-accounts-list.vala"
		_tmp77_ = checkmark;
#line 128 "../src/contacts-accounts-list.vala"
		g_object_set ((GObject*) _tmp77_, "margin-end", 6, "valign", GTK_ALIGN_CENTER, "halign", GTK_ALIGN_END, "vexpand", TRUE, "hexpand", TRUE, NULL);
#line 133 "../src/contacts-accounts-list.vala"
		_tmp78_ = local_row;
#line 133 "../src/contacts-accounts-list.vala"
		_tmp79_ = checkmark;
#line 133 "../src/contacts-accounts-list.vala"
		hdy_action_row_add_action (_tmp78_, (GtkWidget*) _tmp79_);
#line 134 "../src/contacts-accounts-list.vala"
		_tmp80_ = local_row;
#line 134 "../src/contacts-accounts-list.vala"
		_tmp81_ = checkmark;
#line 134 "../src/contacts-accounts-list.vala"
		_tmp82_ = _g_object_ref0 (_tmp81_);
#line 134 "../src/contacts-accounts-list.vala"
		g_object_set_data_full ((GObject*) _tmp80_, "checkmark", _tmp82_, g_object_unref);
#line 135 "../src/contacts-accounts-list.vala"
		_tmp83_ = local_row;
#line 135 "../src/contacts-accounts-list.vala"
		gtk_container_add ((GtkContainer*) self, (GtkWidget*) _tmp83_);
#line 136 "../src/contacts-accounts-list.vala"
		if (select_active) {
#line 745 "contacts-accounts-list.c"
			FolksPersonaStore* _tmp85_;
			ContactsStore* _tmp86_;
			FolksIndividualAggregator* _tmp87_;
			FolksIndividualAggregator* _tmp88_;
			FolksPersonaStore* _tmp89_;
			FolksPersonaStore* _tmp90_;
#line 137 "../src/contacts-accounts-list.vala"
			_tmp85_ = local_store;
#line 137 "../src/contacts-accounts-list.vala"
			_tmp86_ = self->priv->contacts_store;
#line 137 "../src/contacts-accounts-list.vala"
			_tmp87_ = contacts_store_get_aggregator (_tmp86_);
#line 137 "../src/contacts-accounts-list.vala"
			_tmp88_ = _tmp87_;
#line 137 "../src/contacts-accounts-list.vala"
			_tmp89_ = folks_individual_aggregator_get_primary_store (_tmp88_);
#line 137 "../src/contacts-accounts-list.vala"
			_tmp90_ = _tmp89_;
#line 137 "../src/contacts-accounts-list.vala"
			_tmp84_ = _tmp85_ == _tmp90_;
#line 766 "contacts-accounts-list.c"
		} else {
#line 136 "../src/contacts-accounts-list.vala"
			_tmp84_ = FALSE;
#line 770 "contacts-accounts-list.c"
		}
#line 136 "../src/contacts-accounts-list.vala"
		if (_tmp84_) {
#line 774 "contacts-accounts-list.c"
			HdyActionRow* _tmp91_;
#line 138 "../src/contacts-accounts-list.vala"
			_tmp91_ = local_row;
#line 138 "../src/contacts-accounts-list.vala"
			g_signal_emit_by_name ((GtkListBox*) self, "row-activated", (GtkListBoxRow*) _tmp91_);
#line 780 "contacts-accounts-list.c"
		}
#line 120 "../src/contacts-accounts-list.vala"
		_g_object_unref0 (checkmark);
#line 120 "../src/contacts-accounts-list.vala"
		_g_object_unref0 (provider_image);
#line 120 "../src/contacts-accounts-list.vala"
		_g_object_unref0 (local_row);
#line 788 "contacts-accounts-list.c"
	}
#line 142 "../src/contacts-accounts-list.vala"
	gtk_widget_show_all ((GtkWidget*) self);
#line 64 "../src/contacts-accounts-list.vala"
	_g_object_unref0 (local_store);
#line 64 "../src/contacts-accounts-list.vala"
	eds_stores = (_vala_array_free (eds_stores, eds_stores_length1, (GDestroyNotify) g_object_unref), NULL);
#line 796 "contacts-accounts-list.c"
}

static void
contacts_accounts_list_class_init (ContactsAccountsListClass * klass,
                                   gpointer klass_data)
{
#line 23 "../src/contacts-accounts-list.vala"
	contacts_accounts_list_parent_class = g_type_class_peek_parent (klass);
#line 23 "../src/contacts-accounts-list.vala"
	g_type_class_adjust_private_offset (klass, &ContactsAccountsList_private_offset);
#line 23 "../src/contacts-accounts-list.vala"
	((GtkListBoxClass *) klass)->row_activated = (void (*) (GtkListBox*, GtkListBoxRow*)) contacts_accounts_list_real_row_activated;
#line 23 "../src/contacts-accounts-list.vala"
	G_OBJECT_CLASS (klass)->finalize = contacts_accounts_list_finalize;
#line 23 "../src/contacts-accounts-list.vala"
	gtk_widget_class_set_template_from_resource (GTK_WIDGET_CLASS (klass), "/org/gnome/Contacts/ui/contacts-accounts-list.ui");
#line 23 "../src/contacts-accounts-list.vala"
	contacts_accounts_list_signals[CONTACTS_ACCOUNTS_LIST_ACCOUNT_SELECTED_SIGNAL] = g_signal_new ("account-selected", CONTACTS_TYPE_ACCOUNTS_LIST, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 815 "contacts-accounts-list.c"
}

static void
contacts_accounts_list_instance_init (ContactsAccountsList * self,
                                      gpointer klass)
{
#line 23 "../src/contacts-accounts-list.vala"
	self->priv = contacts_accounts_list_get_instance_private (self);
#line 23 "../src/contacts-accounts-list.vala"
	gtk_widget_init_template (GTK_WIDGET (self));
#line 826 "contacts-accounts-list.c"
}

static void
contacts_accounts_list_finalize (GObject * obj)
{
	ContactsAccountsList * self;
#line 23 "../src/contacts-accounts-list.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, CONTACTS_TYPE_ACCOUNTS_LIST, ContactsAccountsList);
#line 24 "../src/contacts-accounts-list.vala"
	_g_object_unref0 (self->priv->last_selected_row);
#line 26 "../src/contacts-accounts-list.vala"
	_g_object_unref0 (self->priv->contacts_store);
#line 28 "../src/contacts-accounts-list.vala"
	_g_object_unref0 (self->selected_store);
#line 23 "../src/contacts-accounts-list.vala"
	G_OBJECT_CLASS (contacts_accounts_list_parent_class)->finalize (obj);
#line 843 "contacts-accounts-list.c"
}

static GType
contacts_accounts_list_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (ContactsAccountsListClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) contacts_accounts_list_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ContactsAccountsList), 0, (GInstanceInitFunc) contacts_accounts_list_instance_init, NULL };
	GType contacts_accounts_list_type_id;
	contacts_accounts_list_type_id = g_type_register_static (gtk_list_box_get_type (), "ContactsAccountsList", &g_define_type_info, 0);
	ContactsAccountsList_private_offset = g_type_add_instance_private (contacts_accounts_list_type_id, sizeof (ContactsAccountsListPrivate));
	return contacts_accounts_list_type_id;
}

GType
contacts_accounts_list_get_type (void)
{
	static volatile gsize contacts_accounts_list_type_id__volatile = 0;
	if (g_once_init_enter (&contacts_accounts_list_type_id__volatile)) {
		GType contacts_accounts_list_type_id;
		contacts_accounts_list_type_id = contacts_accounts_list_get_type_once ();
		g_once_init_leave (&contacts_accounts_list_type_id__volatile, contacts_accounts_list_type_id);
	}
	return contacts_accounts_list_type_id__volatile;
}

static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		gint i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}

static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}

